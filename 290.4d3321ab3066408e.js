(self.webpackChunkghs_editor=self.webpackChunkghs_editor||[]).push([[290],{1290:(bt,ie,u)=>{"use strict";u.r(ie),u.d(ie,{ScenariosModule:()=>Ne});var p=u(6895),f=u(5142),e=u(4650),w=u(1135),C=u(4004),N=u(3900),Z=u(4128),T=u(1856);class x{constructor(i){this.storage=i,this._model=new w.X([]),this.scenarios$=this._model.asObservable(),this.maxOrder$=this._model.pipe((0,C.U)(t=>Math.max(...t.map(o=>o.order),0))),this.reload()}reload(){this.storage.scenarios.getAllIds().pipe((0,N.w)(i=>(0,Z.D)(i.map(t=>this.storage.scenarios.withId(t).get())))).subscribe(i=>{this._model.next(i.filter(t=>null!==t))})}setScenariosOrder(i){const t=Array.from(this._model.value);i.forEach((o,r)=>{const s={...this._model.value.at(r),order:o};this.storage.scenarios.withId(s.id).set(s).subscribe(),t.at(r).order=o}),this._model.next(t)}remove(i){this.storage.scenarios.withId(i).remove().subscribe();const t=Array.from(this._model.value),o=t.findIndex(r=>r.id===i);t.splice(o,1),this._model.next(t)}}x.\u0275fac=function(i){return new(i||x)(e.LFG(T.O))},x.\u0275prov=e.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"});var O=u(9367),v=u(7819),b=u(8276),c=u(655),I=u(9751);const X=new e.OlP("MutationObserver config");let _=(()=>{class n extends I.y{constructor({nativeElement:t},o){super(r=>{const s=new MutationObserver(a=>{r.next(a)});return s.observe(t,o),()=>{s.disconnect()}})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.SBq),e.LFG(X))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var h=u(7776),l=u(8923),F=u(5753),M=u(3679),fe=u(3054),Y=u(7579),re=u(5963),D=u(9841),le=u(7331),V=u(9300),te=u(1884),L=u(8675),B=u(8372);const P=["*"];function de(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("transitionend.self",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onTransitionEnd())}),e.Hsn(1),e.qZA()}if(2&n){const t=i.ngIf;e.Udp("top",t.top,"px")("left",t.left,"px")("width",t.width,"px")("height",t.height,"px")}}let H=(()=>{class n{constructor(t){this.elementRef=t,this.element$=new Y.x,this.debounce=0,this.orderChange=this.element$.pipe((0,le.D)(()=>(0,re.H)(this.debounce)),(0,V.h)(this.filter.bind(this)),(0,C.U)(o=>this.reorder(o))),this.element=null,this.order$=new w.X(new Map)}set order(t){this.order$.next(t)}get order(){return this.order$.value}rearrange(t){this.element$.next(t)}filter(t){return!!this.element&&!!t&&this.element!==t}reorder(t){var o,r;const s=Array.from(this.elementRef.nativeElement.children),a=s.indexOf(this.element||t),m=s.indexOf(t),g=this.order.size?new Map(this.order):new Map(s.map((J,me)=>[me,me])),k=null!==(o=g.get(a))&&void 0!==o?o:a,q=null!==(r=g.get(m))&&void 0!==r?r:m;return g.set(a,q),g.set(m,k),this.order$.next(g),g}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tiles"]],hostVars:2,hostBindings:function(t,o){1&t&&e.NdJ("pointerleave.silent",function(){return o.rearrange()}),2&t&&e.ekj("_dragged",o.element)},inputs:{debounce:"debounce",order:"order"},outputs:{orderChange:"orderChange"},features:[e._Bn([h.a3,h.tl,_,{provide:X,useValue:{childList:!0}}])],ngContentSelectors:P,decls:1,vars:0,template:function(t,o){1&t&&(e.F$t(),e.Hsn(0))},styles:["tui-tiles{position:relative;z-index:0;display:grid;grid-auto-flow:dense;justify-items:stretch}tui-tiles._dragged tui-tile>.t-wrapper{pointer-events:none}tui-tiles._dragged tui-tile:not(._dragged)>.t-wrapper{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}tui-tiles:not(._dragged) tui-tile._dragged>.t-wrapper{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}tui-tile>.t-wrapper{position:absolute;z-index:0;border-radius:inherit}tui-tile._dragged>.t-wrapper{z-index:1;transition:none}\n"],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"debounce",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"order",null),n})(),se=(()=>{class n{constructor(t,o,r,s,a){this.ngZone=t,this.elementRef=o,this.tiles=r,this.resize$=s,this.mutation$=a,this.width=1,this.height=1,this.dragged=!1,this.offset$=new w.X([0,0]),this.position$=(0,D.a)([this.offset$.pipe((0,te.x)(F.Hh)),this.resize$.pipe((0,L.O)(null)),this.mutation$.pipe((0,L.O)(null)),this.tiles.order$.pipe((0,B.b)(0))]).pipe((0,C.U)(([[m,g]])=>({top:g||this.element.offsetTop,left:m||this.element.offsetLeft,width:this.element.clientWidth,height:this.element.clientHeight})),(0,M.Ao)(this.ngZone))}get column(){return`span var(--tui-width, ${this.width})`}get row(){return`span var(--tui-height, ${this.height})`}get element(){return this.elementRef.nativeElement}onEnter(){this.tiles.rearrange(this.element)}onDrag(t){this.dragged=this.dragged||t,this.tiles.element=t?this.element:null}onTransitionEnd(){this.dragged=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(H),e.Y36(h.tl),e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tile"]],hostVars:6,hostBindings:function(t,o){1&t&&e.NdJ("pointerenter",function(){return o.onEnter()}),2&t&&(e.Udp("grid-column",o.column)("grid-row",o.row),e.ekj("_dragged",o.dragged))},inputs:{width:"width",height:"height"},ngContentSelectors:P,decls:2,vars:3,consts:[["class","t-wrapper",3,"top","left","width","height","transitionend.self",4,"ngIf"],[1,"t-wrapper",3,"transitionend.self"]],template:function(t,o){1&t&&(e.F$t(),e.YNc(0,de,2,8,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.position$))},dependencies:[p.O5,p.Ov],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"width",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"height",void 0),n})(),ae=(()=>{class n{constructor(t){this.tile=t,this.x=NaN,this.y=NaN}onStart(t){const o=(0,fe.mA)(t),{x:r,y:s,pointerId:a}=t;(0,fe.ve)(o)&&o.releasePointerCapture(a),this.onPointer(r,s)}onPointer(t=NaN,o=NaN){this.x=t-this.tile.element.offsetLeft,this.y=o-this.tile.element.offsetTop,this.tile.onDrag(!Number.isNaN(t)),this.tile.offset$.next([0,0])}onMove(t,o){Number.isNaN(this.x)||this.tile.offset$.next([t-this.x,o-this.y])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(se))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiTileHandle",""]],hostVars:2,hostBindings:function(t,o){1&t&&e.NdJ("pointerdown.silent.prevent",function(s){return o.onStart(s)})("pointerup.silent",function(){return o.onPointer()},!1,e.evT)("pointermove.silent",function(s){return o.onMove(s.x,s.y)},!1,e.evT),2&t&&e.Udp("touch-action","none")}}),n})(),ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez]]}),n})();function Ce(n,i){if(1&n&&(e.TgZ(0,"button",7),e._uU(1," Add scenario "),e.qZA()),2&n){const t=e.oxw();e.Q6J("routerLink",t.newScenarioId)}}function ge(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"h3",9),e._uU(2,"No scenarios yet"),e.qZA(),e.TgZ(3,"p",10),e._uU(4,"Add a scenario using button below or by importing existig json in the main menu"),e.qZA(),e.TgZ(5,"button",11),e._uU(6,"Add scenario"),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("routerLink",t.newScenarioId)}}function xe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tui-tile",15)(1,"div",16),e._uU(2),e.qZA(),e._UZ(3,"tui-svg",17),e.TgZ(4,"tui-svg",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.removeScenario(s))}),e.qZA()()}if(2&n){const t=i.$implicit,o=i.index,r=e.oxw(2);e.Udp("order",r.scenariosOrder.get(o)),e.xp6(1),e.Q6J("routerLink",t.id),e.xp6(1),e.AsE(" #",t.generalInfo.index,": ",t.generalInfo.name," ")}}function Me(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"tui-tiles",13),e.NdJ("orderChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.reorder(r))}),e.YNc(2,xe,5,5,"tui-tile",14),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("debounce",500)("order",t.scenariosOrder),e.xp6(1),e.Q6J("ngForOf",t.scenarios)}}class K{constructor(i){this.scenariosService=i,this.newScenarioId=crypto.randomUUID(),this.isLoading=!0,this.scenarios=[]}ngOnInit(){this.scenariosService.scenarios$.subscribe(i=>{this.scenarios=i,this.scenariosOrder=new Map(i.map((t,o)=>[o,t.order])),this.isLoading=!1})}reorder(i){this.scenariosService.setScenariosOrder(i)}removeScenario(i){this.scenariosService.remove(i.id)}}K.\u0275fac=function(i){return new(i||K)(e.Y36(x))},K.\u0275cmp=e.Xpm({type:K,selectors:[["ghse-scenarios-list"]],decls:8,vars:7,consts:[[1,"page-header"],[1,"tui-text_h2"],["tuiButton","","size","s","icon","tuiIconPlusLarge",3,"routerLink",4,"ngIf"],[1,"page-content"],["size","xxl",3,"showLoader","overlay"],["class","no-items",4,"ngIf"],["class","items",4,"ngIf"],["tuiButton","","size","s","icon","tuiIconPlusLarge",3,"routerLink"],[1,"no-items"],[1,"tui-text_h3"],[1,"tui-text_body-l"],["tuiButton","","size","xl","icon","tuiIconPlusLarge",3,"routerLink"],[1,"items"],[1,"tiles",3,"debounce","order","orderChange"],["class","tile",3,"order",4,"ngFor","ngForOf"],[1,"tile"],[1,"scenario",3,"routerLink"],["tuiTileHandle","","src","tuiIconDragLarge",1,"handle"],["src","tuiIconTrashLarge",1,"remove",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Scenarios"),e.qZA(),e.YNc(3,Ce,2,1,"button",2),e.qZA(),e.TgZ(4,"div",3)(5,"tui-loader",4),e.YNc(6,ge,7,1,"div",5),e.YNc(7,Me,3,3,"div",6),e.qZA()()),2&i&&(e.ekj("with-button",0!==t.scenarios.length),e.xp6(3),e.Q6J("ngIf",0!==t.scenarios.length),e.xp6(2),e.Q6J("showLoader",t.isLoading)("overlay",!0),e.xp6(1),e.Q6J("ngIf",0===t.scenarios.length),e.xp6(1),e.Q6J("ngIf",0!==t.scenarios.length&&t.scenariosOrder))},dependencies:[p.sg,p.O5,f.rH,O.v0,v.kM,b.P,H,se,ae],styles:['.ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 0rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   a[tuiButton][_ngcontent-%COMP%], [_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   button[tuiButton][_ngcontent-%COMP%]{margin-left:2rem;margin-top:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .no-items[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .tiles[_ngcontent-%COMP%]{gap:1rem;grid:auto-flow minmax(6rem,auto) / repeat(auto-fill,minmax(20rem,1fr))}[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]:before{content:"Drop here";display:flex;height:100%;justify-content:center;align-items:center;box-sizing:border-box;color:var(--tui-base-04);border-radius:var(--tui-radius-l);border:2px dashed var(--tui-base-03)}.scenario[_ngcontent-%COMP%]{transition-property:box-shadow;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;height:100%;padding:1rem;background:var(--tui-base-01);box-sizing:border-box;border-radius:var(--tui-radius-l);border:1px solid var(--tui-base-03);overflow:hidden}.scenario[_ngcontent-%COMP%]:hover{box-shadow:0 .75rem 2.25rem #0003}tui-tile._dragged[_ngcontent-%COMP%]   .scenario[_ngcontent-%COMP%]{box-shadow:0 .75rem 2.25rem #0003}.handle[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;right:.75rem;top:1rem;background:var(--tui-base-01);color:var(--tui-base-05);opacity:0;cursor:move}.handle[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}tui-tiles[_ngcontent-%COMP%]:not(._dragged)   tui-tile[_ngcontent-%COMP%]:hover   .handle[_ngcontent-%COMP%], tui-tile._dragged[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{opacity:1}.remove[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;right:.75rem;bottom:1rem;background:var(--tui-base-01);color:var(--tui-base-05);opacity:0;cursor:pointer}.remove[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}tui-tiles[_ngcontent-%COMP%]:not(._dragged)   tui-tile[_ngcontent-%COMP%]:hover   .remove[_ngcontent-%COMP%]{opacity:1}']});var j=u(2722);class ${static getBusinessId(i){return 0!==i.generalInfo.group.length?`${i.generalInfo.index}-${i.generalInfo.group}`:i.generalInfo.index}static getFullName(i){return`#${$.getBusinessId(i)}: ${i.generalInfo.name}`}}var U=u(5888),E=u(8505);class ne{constructor(i,t,o,r){this.listService=i,this.storageService=t,this.alertService=o,this.scenarioId=r,this._dataSaved$=this.alertService.open("Data saved",{status:"success"}),this._maxOrder=0,this._model=new w.X(U.zI),this.reload(),this.businessId$=this._model.asObservable().pipe((0,C.U)(s=>$.getBusinessId(s))),this.exists$=this._model.asObservable().pipe((0,C.U)(s=>""!==s.generalInfo.index)),this.listService.maxOrder$.subscribe(s=>this._maxOrder=s),this.fullModel$=this._model.asObservable(),this.generalInfo$=this._model.asObservable().pipe((0,C.U)(s=>s.generalInfo)),this.properties$=this._model.asObservable().pipe((0,C.U)(s=>s.properties)),this.objectives$=this._model.asObservable().pipe((0,C.U)(s=>s.objectives)),this.monsters$=this._model.asObservable().pipe((0,C.U)(s=>s.monsters)),this.rooms$=this._model.asObservable().pipe((0,C.U)(s=>s.rooms))}updateGeneralInfo(i){const t={...this._model.value,generalInfo:i};""===this._model.value.id&&(t.id=this.scenarioId),0===this._model.value.order&&(t.order=this._maxOrder+1),this.notifyUpdated(t)}updateProperties(i){this.notifyUpdated({...this._model.value,properties:i})}updateObjectives(i){this.notifyUpdated({...this._model.value,objectives:i})}updateMonsters(i){this.notifyUpdated({...this._model.value,monsters:i})}updateRooms(i){this.notifyUpdated({...this._model.value,rooms:i})}reload(){this.storageService.scenarios.withId(this.scenarioId).get().subscribe(i=>{null!==i&&this._model.next(i)})}notifyUpdated(i){this.storageService.scenarios.withId(this.scenarioId).set(i).pipe((0,E.b)(()=>this._model.next(i)),(0,E.b)(()=>this.listService.reload()),(0,N.w)(()=>this._dataSaved$)).subscribe()}}var oe=u(343);class y{constructor(i,t,o){this.listService=i,this.storageService=t,this.alertService=o,this.services=new Map}create(i){return this.services.has(i)||this.services.set(i,new ne(this.listService,this.storageService,this.alertService,i)),this.services.get(i)}}y.\u0275fac=function(i){return new(i||y)(e.LFG(x),e.LFG(T.O),e.LFG(oe.J9))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"});var Pe=u(9791),pe=u(9255),z=u(8535),Ze=u(9982);let fn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Mt=u(8790),Ot=u(4645),ue=u(1308),Ge=u(1127),ot=u(4677),Tt=u(515),it=u(6451),vn=u(4671),Cn=u(4707),xt=u(9646),bn=u(3099),ye=u(9740),Ve=u(9892),rt=u(5917);const Mn=["tuiTab",""];function On(n,i){1&n&&e.GkF(0)}const st=["*"];function Tn(n,i){1&n&&e.GkF(0)}function xn(n,i){if(1&n&&e._UZ(0,"tui-underline",2),2&n){const t=e.oxw();e.Q6J("element",t.activeElement)}}const Pn=["vertical",""],Pt=new e.OlP("[TUI_TAB_EVENT]: Stream of tab activation events"),Fn=[h.a3,h.ku,Mt.Ok,{provide:Pt,deps:[e.SBq,Mt.Ok,[new e.FiY,_],[new e.FiY,f.Od]],useFactory:({nativeElement:n},i,t,o)=>{const r=o&&t?t.pipe((0,V.h)(()=>o.isActive)):Tt.E;return(0,it.T)(r,i.pipe((0,V.h)(vn.y)),n.matches("button")?(0,M.mL)(n,"click"):Tt.E).pipe((0,C.U)(()=>n.dispatchEvent(new CustomEvent("tui-tab-activate",{bubbles:!0}))))}},Ot.CV];let at=(()=>{class n{constructor(t,o,r,s,a,m){this.routerLinkActive=t,this.elementRef=o,this.mode$=r,this.event$=s,this.margin=a,this.focusVisible=!1,m.subscribe(g=>{this.focusVisible=g})}get isActive(){return!!this.routerLinkActive&&this.routerLinkActive.isActive}ngOnDestroy(){(0,pe.V8)(this.elementRef.nativeElement)&&this.elementRef.nativeElement.blur()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.Od,8),e.Y36(e.SBq),e.Y36(ue.Au),e.Y36(Pt),e.Y36(ot.WO),e.Y36(h.ku))},n.\u0275cmp=e.Xpm({type:n,selectors:[["a","tuiTab","",3,"routerLink",""],["a","tuiTab","","routerLink","","routerLinkActive",""],["button","tuiTab",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(t,o){1&t&&e.NdJ("$.data-mode.attr",function(){return o.mode$}),2&t&&(e.Udp("cursor","pointer")("--tui-tab-margin",o.margin,"px"),e.ekj("_focus-visible",o.focusVisible)("_active",o.isActive))},features:[e._Bn(Fn)],attrs:Mn,ngContentSelectors:st,decls:4,vars:3,consts:[[4,"ngIf"],[1,"t-highlight"]],template:function(t,o){1&t&&(e.F$t(),e.YNc(0,On,1,0,"ng-container",0),e.ALo(1,"async"),e.TgZ(2,"span",1),e.Hsn(3),e.qZA()),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.event$))},dependencies:[p.O5,p.Ov],styles:['._underline[_nghost-%COMP%]:hover, ._underline   [_nghost-%COMP%]:hover{box-shadow:inset 0 -2px var(--tui-base-03)}tui-tabs    > [_nghost-%COMP%]:first-child, tui-tabs    > [_nghost-%COMP%]:first-child, [tuiTabs]    > [_nghost-%COMP%]:first-child, [tuiTabs]    > [_nghost-%COMP%]:first-child, tui-tabs    > :first-child[_nghost-%COMP%], tui-tabs    > :first-child   [_nghost-%COMP%], [tuiTabs]    > :first-child[_nghost-%COMP%], [tuiTabs]    > :first-child   [_nghost-%COMP%]{margin-left:0}[_nghost-%COMP%]{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;position:relative;display:flex;flex-shrink:0;height:100%;box-sizing:border-box;justify-content:space-between;align-items:center;white-space:nowrap;cursor:pointer;outline:none;text-decoration:none;color:inherit;transition-property:color,box-shadow,opacity;margin-left:var(--tui-tab-margin, 1.5rem)}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);pointer-events:none}[_nghost-%COMP%]:not([data-mode])._active{opacity:1;color:var(--tui-text-01);box-shadow:none}[data-mode=onDark][_nghost-%COMP%]{color:rgba(255,255,255,.72)}[data-mode=onDark][_nghost-%COMP%]:hover, [data-mode=onDark]._active[_nghost-%COMP%]{color:#fff}[data-mode=onDark]._focus-visible[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{background:var(--tui-clear-inverse);color:var(--tui-text-01)}[data-mode=onLight][_nghost-%COMP%]{color:var(--tui-text-02)}[data-mode=onLight][_nghost-%COMP%]:hover, [data-mode=onLight]._active[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._focus-visible[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{background:var(--tui-text-01);color:#fff}._focus-visible[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{background:var(--tui-selection)}._android[_nghost-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;height:3rem;flex:1;flex-shrink:0;justify-content:center;margin:0;text-transform:uppercase;color:var(--tui-base-09);opacity:.5;font-size:.875rem;font-weight:500;letter-spacing:-.008125rem;font-family:-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif}._android[_nghost-%COMP%]:hover{box-shadow:none}._android._active[_nghost-%COMP%]{opacity:1;color:var(--tui-base-09)}._android[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{width:auto}._ios[_nghost-%COMP%]{height:1.75rem;flex:1;flex-shrink:0;justify-content:center;margin:0;color:var(--tui-base-01);opacity:1;font-size:.8125rem;font-weight:500;letter-spacing:-.005rem;font-family:-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif}._ios[_nghost-%COMP%]:hover{box-shadow:none}._ios._active[_nghost-%COMP%]{font-size:.875rem;font-weight:600;color:var(--tui-link)}._ios[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{width:auto}@media (hover: hover){[_nghost-%COMP%]:hover{color:var(--tui-text-01)}}.t-highlight[_ngcontent-%COMP%]{display:inline-flex;width:100%;align-items:center;justify-content:inherit}.t-highlight[_ngcontent-%COMP%]    >*{flex-shrink:0}tui-tabs[data-vertical][_nghost-%COMP%], tui-tabs[data-vertical]   [_nghost-%COMP%], [tuiTabs][data-vertical][_nghost-%COMP%], [tuiTabs][data-vertical]   [_nghost-%COMP%]{min-height:2.75rem;height:auto;white-space:normal;margin:0;text-align:left;padding:.25rem 1.25rem .25rem 0}tui-tabs[data-vertical][_nghost-%COMP%]:after, tui-tabs[data-vertical]   [_nghost-%COMP%]:after, [tuiTabs][data-vertical][_nghost-%COMP%]:after, [tuiTabs][data-vertical]   [_nghost-%COMP%]:after{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";position:absolute;top:0;bottom:0;right:0;width:2px;background:var(--tui-primary);transform:scaleX(0);transform-origin:right}tui-tabs[data-vertical][_nghost-%COMP%]:hover, tui-tabs[data-vertical]   [_nghost-%COMP%]:hover, [tuiTabs][data-vertical][_nghost-%COMP%]:hover, [tuiTabs][data-vertical]   [_nghost-%COMP%]:hover{box-shadow:inset -2px 0 var(--tui-base-03)}tui-tabs[data-vertical]._active[_nghost-%COMP%]:after, tui-tabs[data-vertical]   ._active[_nghost-%COMP%]:after, [tuiTabs][data-vertical]._active[_nghost-%COMP%]:after, [tuiTabs][data-vertical]   ._active[_nghost-%COMP%]:after{transform:none}tui-tabs[data-vertical="right"][_nghost-%COMP%], tui-tabs[data-vertical="right"]   [_nghost-%COMP%], [tuiTabs][data-vertical="right"][_nghost-%COMP%], [tuiTabs][data-vertical="right"]   [_nghost-%COMP%]{text-align:right;padding:.25rem 0 .25rem 1.25rem}tui-tabs[data-vertical="right"][_nghost-%COMP%]:after, tui-tabs[data-vertical="right"]   [_nghost-%COMP%]:after, [tuiTabs][data-vertical="right"][_nghost-%COMP%]:after, [tuiTabs][data-vertical="right"]   [_nghost-%COMP%]:after{right:auto;left:0;transform-origin:left}tui-tabs[data-vertical="right"][_nghost-%COMP%]:hover, tui-tabs[data-vertical="right"]   [_nghost-%COMP%]:hover, [tuiTabs][data-vertical="right"][_nghost-%COMP%]:hover, [tuiTabs][data-vertical="right"]   [_nghost-%COMP%]:hover{box-shadow:inset 2px 0 var(--tui-base-03)}'],changeDetection:0}),n})(),We=(()=>{class n{constructor(t){this.elementRef=t,this.activeItemIndex=0,this.activeItemIndexChange=new e.vpe}get tabs(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiTab]"))}get activeElement(){return this.tabs[this.activeItemIndex]||null}onActivate(t,o){const r=this.tabs.findIndex(s=>s===o);t.stopPropagation(),r!==this.activeItemIndex&&(this.activeItemIndexChange.emit(r),this.activeItemIndex=r)}moveFocus(t,o){const{tabs:r}=this;(0,pe.VR)(r.indexOf(t),r,o)}ngAfterViewChecked(){const{tabs:t,activeElement:o}=this;t.forEach(r=>{const s=r===o;r.classList.toggle("_active",s),r.setAttribute("tabIndex",s?"0":"-1")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["tui-tabs"],["nav","tuiTabs",""]],hostBindings:function(t,o){1&t&&e.NdJ("tui-tab-activate",function(s){return o.onActivate(s,s.target)})},inputs:{activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"}}),(0,c.gn)([(0,l.TH)()],n.prototype,"activeItemIndex",void 0),n})();const yt={underline:!0,exposeActive:!0,itemsLimit:1/0},wt=new e.OlP("[TUI_TABS_OPTIONS]: Default parameters for tabs component",{factory:()=>yt});let An=(()=>{class n{constructor({nativeElement:t},o,r,s){this.ngZone=o,this.animationFrame$=r,this.mode$=s,this.element$=new Cn.t(1),this.refresh$=this.element$.pipe((0,N.w)(a=>a?this.animationFrame$.pipe((0,C.U)(()=>a),(0,M.fL)(this.ngZone)):(0,xt.of)(null)),(0,bn.B)()),this.transition$=(0,rt.Gt)(this.element$.pipe((0,C.U)(a=>a&&"all"),(0,B.b)(50))),this.transform$=(0,rt.Gt)(this.refresh$.pipe((0,C.U)(a=>a?`translate3d(${a.offsetLeft}px, 0, 0)`:null))),this.width$=(0,rt.Gt)(this.refresh$.pipe((0,C.U)(a=>a?.clientWidth||0))),t["$.style.transitionProperty"]=this.transition$,t["$.style.transform"]=this.transform$,t["$.style.width.px"]=this.width$}set element(t){this.element$.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(Ve.L1),e.Y36(ue.Au))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-underline"]],hostBindings:function(t,o){1&t&&e.NdJ("$.data-mode.attr",function(){return o.mode$})("$.style.transitionProperty",function(){return o.transition$()})("$.style.transform",function(){return o.transform$()})("$.style.width.px",function(){return o.width$()})},inputs:{element:"element"},features:[e._Bn([Ot.CV])],decls:0,vars:0,template:function(t,o){},styles:["[_nghost-%COMP%]{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;left:0;height:100%;color:var(--tui-primary);transform:scale(0);box-shadow:inset 0 -.1875rem 0 -.0625rem;transition-property:none;pointer-events:none}[data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onLight][_nghost-%COMP%]{color:var(--tui-text-02)}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"element",null),n})(),Dn=(()=>{class n{constructor(t,o,r,s,a){this.options=t,this.elementRef=o,this.tabs=r,this.children=z.Mm,this.underline=this.options.underline,a.pipe((0,V.h)(()=>this.underline)).subscribe(()=>{s.detectChanges()})}get activeItemIndex(){return this.tabs.activeItemIndex}set activeItemIndex(t){this.tabs.activeItemIndex=t}get activeElement(){return this.tabs.activeElement}onKeyDownArrow(t,o){this.tabs.moveFocus(t,o)}ngAfterViewChecked(){this.scrollTo(this.tabs.activeItemIndex)}scrollTo(t){const o=this.tabs.tabs[t];if(!o)return;const{offsetLeft:r,offsetWidth:s}=o,{nativeElement:a}=this.elementRef;r<a.scrollLeft&&(a.scrollLeft=r),r+s>a.scrollLeft+a.offsetWidth&&(a.scrollLeft=r+s-a.offsetWidth)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(wt),e.Y36(e.SBq),e.Y36(We),e.Y36(e.sBO),e.Y36(h.tl))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tabs",3,"vertical",""],["nav","tuiTabs","",3,"vertical",""]],contentQueries:function(t,o,r){if(1&t&&e.Suo(r,at,4),2&t){let s;e.iGM(s=e.CRH())&&(o.children=s)}},hostVars:2,hostBindings:function(t,o){1&t&&e.NdJ("keydown.arrowRight.prevent",function(s){return o.onKeyDownArrow(s.target,1)})("keydown.arrowLeft.prevent",function(s){return o.onKeyDownArrow(s.target,-1)}),2&t&&e.ekj("_underline",o.underline)},inputs:{underline:"underline"},features:[e._Bn([h.a3,h.tl,_,{provide:X,useValue:{childList:!0}}])],ngContentSelectors:st,decls:4,vars:4,consts:[[4,"ngIf"],["class","t-underline",3,"element",4,"ngIf"],[1,"t-underline",3,"element"]],template:function(t,o){1&t&&(e.F$t(),e.YNc(0,Tn,1,0,"ng-container",0),e.ALo(1,"async"),e.Hsn(2),e.YNc(3,xn,1,1,"tui-underline",1)),2&t&&(e.Q6J("ngIf",e.lcZ(1,2,o.children.changes)),e.xp6(3),e.Q6J("ngIf",o.underline))},dependencies:[An,p.O5,p.Ov],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;position:relative;z-index:0;display:flex;font:var(--tui-font-text-m);height:var(--tui-height-l);color:var(--tui-text-02);box-shadow:inset 0 -1px var(--tui-base-03);overflow:auto}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-underline[_ngcontent-%COMP%]{z-index:-1}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"underline",void 0),(0,c.gn)([l.UM],n.prototype,"scrollTo",null),n})(),Bn=(()=>{class n{constructor(t){this.tabs=t,this.vertical="left"}onKeyDownArrow(t,o){this.tabs.moveFocus(t,o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(We))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tabs","vertical",""],["nav","tuiTabs","","vertical",""]],hostVars:1,hostBindings:function(t,o){1&t&&e.NdJ("keydown.arrowDown.prevent",function(s){return o.onKeyDownArrow(s.target,1)})("keydown.arrowUp.prevent",function(s){return o.onKeyDownArrow(s.target,-1)}),2&t&&e.uIk("data-vertical",o.vertical)},inputs:{vertical:"vertical"},attrs:Pn,ngContentSelectors:st,decls:1,vars:0,template:function(t,o){1&t&&(e.F$t(),e.Hsn(0))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;font:var(--tui-font-text-m);color:var(--tui-text-02);box-shadow:inset -1px 0 var(--tui-base-03)}[data-vertical=right][_nghost-%COMP%]{box-shadow:inset 1px 0 var(--tui-base-03)}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"vertical",void 0),n})();new e.OlP("[TUI_TABS_REFRESH]: Refresh stream");let Nn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,ye.wq,Ge.jh,b.E,Ze.u,fn]]}),n})();class Re{constructor(i,t,o,r){this.detailsServiceFactory=i,this.route=t,this.router=o,this.destroy$=r}ngOnInit(){const i=this.route.snapshot.paramMap.get("id");this.detailsService=this.detailsServiceFactory.create(i),this.detailsService.fullModel$?.pipe((0,j.R)(this.destroy$)).subscribe(t=>this.model=t)}get areStepsDisabled(){return""===this.model?.generalInfo.index}get header(){return this.model&&""!==this.model.generalInfo.name?$.getFullName(this.model):"New scenario"}}Re.\u0275fac=function(i){return new(i||Re)(e.Y36(y),e.Y36(f.gz),e.Y36(f.F0),e.Y36(h.a3))},Re.\u0275cmp=e.Xpm({type:Re,selectors:[["ghse-scenario-detail"]],features:[e._Bn([h.a3])],decls:23,vars:7,consts:[[1,"page-header","with-link"],["tuiLink","","routerLink",".."],["src","tuiIconChevronLeft"],[1,"tui-text_h2"],["tuiTab","","routerLink",".","routerLinkActive",""],["tuiTab","","routerLink","properties","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","objectives","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","monsters","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","rooms","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","rules","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","sections","routerLinkActive","",3,"disabled"],[1,"page-content"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"tui-svg",2),e._uU(3," Scenarios"),e.qZA(),e.TgZ(4,"h2",3),e._uU(5),e.qZA(),e.TgZ(6,"tui-tabs")(7,"button",4),e._uU(8,"General"),e.qZA(),e.TgZ(9,"button",5),e._uU(10,"Properties"),e.qZA(),e.TgZ(11,"button",6),e._uU(12,"Objectives"),e.qZA(),e.TgZ(13,"button",7),e._uU(14,"Monsters"),e.qZA(),e.TgZ(15,"button",8),e._uU(16,"Rooms"),e.qZA(),e.TgZ(17,"button",9),e._uU(18,"Special rules"),e.qZA(),e.TgZ(19,"button",10),e._uU(20,"Sections"),e.qZA()()(),e.TgZ(21,"div",11),e._UZ(22,"router-outlet"),e.qZA()),2&i&&(e.xp6(5),e.Oqu(t.header),e.xp6(4),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled))},dependencies:[f.lC,f.rH,f.Od,Pe.V,b.P,Dn,We,at],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 0rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   a[tuiButton][_ngcontent-%COMP%], [_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   button[tuiButton][_ngcontent-%COMP%]{margin-left:2rem;margin-top:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{flex-direction:row}[_nghost-%COMP%]   tui-tabs[_ngcontent-%COMP%]{margin-top:1rem}"],changeDetection:0});var d=u(4006);function qe(n){return new d.cw(Object.entries(n).reduce((i,[t,[o,r]])=>({...i,[t]:new d.NI(o,{validators:r,nonNullable:null!==o})}),{}))}class ut{constructor(i,t,o,r,s){this.destroy$=t,this.details$=o,this.updateDetails=r,this.form=s,this.currentScenarioId="",i.data.pipe((0,j.R)(this.destroy$)).subscribe(({detailsService:a})=>{this.detailsService=a,this.detailsService&&(this.detailsService.businessId$.subscribe(m=>this.currentScenarioId=m),o(this.detailsService).subscribe(m=>{this.savedModel=m}))})}save(){if(this.detailsService){const i=this.form.getRawValue();this.updateDetails(this.detailsService,i),this.form.markAsPristine()}}reset(){this.savedModel?(this.form.patchValue(this.savedModel),this.form.markAsPristine()):this.form.reset()}}class ct extends ut{constructor(i,t,o,r,s){super(i,t,o,r,new d.Oe([])),this.instanceFormCreator=s}addNew(i=!1){i?this.form.push(this.instanceFormCreator()):this.form.insert(0,this.instanceFormCreator()),this.form.markAsDirty()}remove(i){this.form.removeAt(i),this.form.markAsDirty()}reset(){if(this.savedModel){this.form.clear();for(const i of this.savedModel){const t=this.instanceFormCreator();t.patchValue(i),this.form.push(t)}this.form.markAsPristine()}else this.form.reset()}}var lt=u(4601),Q=u(117),he=u(6679),R=u(1054),G=u(7414),dt=u(2302);let kt=(()=>{class n{constructor(t,o){this.element=t,this.renderer=o,this.tuiCheckedChange=new e.vpe,this.updateProperty("checked",!1)}set tuiChecked(t){this.updateProperty("checked",t||!1),this.updateProperty("indeterminate",null===t)}onChange({checked:t}){this.updateProperty("indeterminate",!1),this.tuiCheckedChange.emit(t)}updateProperty(t,o){this.renderer.setProperty(this.element.nativeElement,t,o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj))},n.\u0275dir=e.lG2({type:n,selectors:[["input","tuiChecked",""],["input","tuiCheckedChange",""]],hostBindings:function(t,o){1&t&&e.NdJ("change",function(s){return o.onChange(s.target)})},inputs:{tuiChecked:"tuiChecked"},outputs:{tuiCheckedChange:"tuiCheckedChange"}}),n})(),It=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Zn=u(5684);let St=(()=>{class n{constructor({nativeElement:t},o){this.tuiFocusedChange=(0,it.T)((0,M.mL)(t,"focusin"),(0,M.mL)(t,"focusout")).pipe((0,C.U)(()=>(0,pe.V8)(t)),(0,L.O)(!1),(0,te.x)(),(0,Zn.T)(1),(0,M.Yr)(o))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.R0b))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiFocusedChange",""]],outputs:{tuiFocusedChange:"tuiFocusedChange"}}),n})(),Ft=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),At=(()=>{class n{constructor(t){this.tuiFocusVisibleChange=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.ku))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiFocusVisibleChange",""]],outputs:{tuiFocusVisibleChange:"tuiFocusVisibleChange"},features:[e._Bn([h.a3,h.ku])]}),n})(),Dt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var pt=u(2973);const Vn=["focusableElement"];let Ke=(()=>{class n extends R.F9{constructor(t,o,r){super(t,r),this.options=o,this.size=this.options.size}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get computedFocusable(){return this.interactive&&this.focusable}onChecked(t){this.updateValue(t)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.a5,10),e.Y36(pt.Y2),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox"]],viewQuery:function(t,o){if(1&t&&e.Gf(Vn,5),2&t){let r;e.iGM(r=e.CRH())&&(o.focusableElement=r.first)}},hostVars:1,hostBindings:function(t,o){2&t&&e.uIk("data-size",o.size)},inputs:{size:"size"},features:[e._Bn([(0,G.FT)(n),(0,R.wB)(n)]),e.qOj],decls:3,vars:11,consts:[[3,"size","disabled","focused","hovered","pressed","invalid","value"],["type","checkbox","automation-id","tui-checkbox__native",1,"t-native",3,"disabled","id","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""]],template:function(t,o){1&t&&(e.TgZ(0,"tui-primitive-checkbox",0)(1,"input",1,2),e.NdJ("tuiFocusedChange",function(s){return o.onFocused(s)})("tuiCheckedChange",function(s){return o.onChecked(s)})("tuiFocusVisibleChange",function(s){return o.onFocusVisible(s)}),e.qZA()()),2&t&&(e.Q6J("size",o.size)("disabled",o.disabled)("focused",o.computedFocusVisible)("hovered",o.pseudoHover)("pressed",o.pseudoActive)("invalid",o.computedInvalid)("value",o.value),e.xp6(1),e.Q6J("disabled",o.disabled)("id",o.id)("tuiChecked",o.value)("tuiFocusable",o.computedFocusable))},dependencies:[pt.r3,kt,Ze.t,St,At],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),Bt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,It,Ze.u,Ft,Dt,pt.fB]]}),n})();const Rn=["*"];let Ln=(()=>{class n extends R.F9{constructor(t,o,r){super(t,o),this.modeDirective=r,this.size="m"}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get nativeFocusableElement(){return this.checkbox?this.checkbox.nativeFocusableElement:null}get hostMode(){return this.modeDirective?this.modeDirective.mode:null}onFocused(t){this.updateFocused(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.a5,10),e.Y36(e.sBO),e.Y36(dt.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox-labeled"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ke,5),2&t){let r;e.iGM(r=e.CRH())&&(o.checkbox=r.first)}},hostVars:2,hostBindings:function(t,o){2&t&&e.uIk("data-size",o.size)("data-mode",o.hostMode)},inputs:{size:"size"},features:[e._Bn([(0,G.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:Rn,decls:4,vars:12,consts:[[1,"t-wrapper"],[3,"disabled","readOnly","focusable","nativeId","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","ngModel","ngModelChange","focusedChange"],[1,"t-content"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"tui-checkbox",1),e.NdJ("ngModelChange",function(s){return o.onModelChange(s)})("focusedChange",function(s){return o.onFocused(s)}),e.qZA(),e.TgZ(2,"div",2),e.Hsn(3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("disabled",o.computedDisabled)("readOnly",o.readOnly)("focusable",o.focusable)("nativeId",o.nativeId)("pseudoInvalid",o.computedInvalid)("pseudoFocus",o.pseudoFocus)("pseudoHover",o.pseudoHover)("pseudoActive",o.pseudoActive)("size",o.size)("ngModel",o.value),e.xp6(1),e.ekj("t-content_disabled",o.computedDisabled))},dependencies:[Ke,d.JJ,d.On],styles:["[_nghost-%COMP%]{position:relative;display:block;line-height:0}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{display:inline-flex;max-width:100%;cursor:pointer}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}[data-mode=onDark][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}.t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-s);line-height:1rem;word-wrap:break-word;min-width:0}.t-content_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-m);margin-left:.75rem}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),Hn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,d.u5,Bt]]}),n})();var mt=u(5120);const gt=function(){return[]};class Le extends ut{constructor(i,t){super(i,t,r=>r.generalInfo$,(r,s)=>r.updateGeneralInfo(s),qe({index:["",d.kI.required],group:[""],name:["",d.kI.required],initial:[!1]})),this.reset()}}Le.\u0275fac=function(i){return new(i||Le)(e.Y36(f.gz),e.Y36(h.a3))},Le.\u0275cmp=e.Xpm({type:Le,selectors:[["ghse-scenario-general-editor"]],features:[e._Bn([{provide:h.a3}]),e.qOj],decls:32,vars:27,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],["data-automation","edition.prefix",1,"prefixName",3,"formControl"],[1,"tui-required"],[3,"formControl","error"],[1,"form-row","multi-field"],[1,"scenario-index"],[1,"scenario-group"],["tuiTextfield","","placeholder","solo"],["size","l",3,"formControl"],[1,"form-row","buttons"],["tuiButton","","type","submit",3,"disabled"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(1,"div",1)(2,"tui-input",2),e._uU(3," Scenario name "),e._UZ(4,"span",3),e.qZA(),e._UZ(5,"tui-error",4),e.ALo(6,"async"),e.ALo(7,"tuiFieldError"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"tui-input",2),e._uU(11," Scenario # "),e._UZ(12,"span",3),e.qZA(),e._UZ(13,"tui-error",4),e.ALo(14,"async"),e.ALo(15,"tuiFieldError"),e.qZA(),e.TgZ(16,"div",7)(17,"tui-input",2),e._uU(18," Scenario group "),e._UZ(19,"input",8),e.qZA(),e._UZ(20,"tui-error",4),e.ALo(21,"async"),e.ALo(22,"tuiFieldError"),e.qZA()(),e.TgZ(23,"div",1)(24,"tui-checkbox-labeled",9),e._uU(25," It is initial scenario of a campaign "),e.qZA()(),e.TgZ(26,"div",10)(27,"div")(28,"button",11),e._uU(29,"Save"),e.qZA(),e.TgZ(30,"button",12),e.NdJ("click",function(){return t.reset()}),e._uU(31," Reset "),e.qZA()()()()),2&i&&(e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("formControl",t.form.controls.name),e.xp6(3),e.Q6J("formControl",t.form.controls.name)("error",e.lcZ(6,12,e.lcZ(7,14,e.DdM(24,gt)))),e.xp6(5),e.Q6J("formControl",t.form.controls.index),e.xp6(3),e.Q6J("formControl",t.form.controls.index)("error",e.lcZ(14,16,e.lcZ(15,18,e.DdM(25,gt)))),e.xp6(4),e.Q6J("formControl",t.form.controls.group),e.xp6(3),e.Q6J("formControl",t.form.controls.group)("error",e.lcZ(21,20,e.lcZ(22,22,e.DdM(26,gt)))),e.xp6(4),e.Q6J("formControl",t.form.controls.initial),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[d._Y,d.JJ,d.JL,d.oH,d.sg,O.v0,lt.v,he.K3,he.wU,Q.MB,Ln,p.Ov,mt.Ag],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .scenario-group[_ngcontent-%COMP%]{width:auto;flex-shrink:0}[_nghost-%COMP%]   .scenario-index[_ngcontent-%COMP%]{flex:1;margin-right:1.5rem}"]});var we=u(9886),ht=u(3861),Un=u(9343),Et=u(6772),_t=u(3935);function jn(n,i){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",15),e.ALo(1,"async")),2&n){const t=e.oxw(2);e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}function zn(n,i){1&n&&(e.TgZ(0,"span",16),e._uU(1,"-- OR --"),e.qZA())}function Jn(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tui-input-tag",13),e.NdJ("searchChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSearchChange(r))}),e._uU(2," Scenario requires "),e.YNc(3,jn,2,4,"tui-data-list-wrapper",9),e.qZA(),e.YNc(4,zn,2,0,"span",14),e.BQk()}if(2&n){const t=i.$implicit,o=i.index;e.xp6(1),e.Q6J("formControl",t)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("ngIf",0===o)}}function $n(n,i){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",17),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}function Yn(n,i){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",15),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}const Nt=function(){return[]};class He extends ut{constructor(i,t,o,r){super(i,t,a=>a.properties$,(a,m)=>a.updateProperties(m),o.group({blocks:[[]],unlocks:[[]],requires:o.array([o.control([]),o.control([])])})),this.scenariosListService=r,this.scenarios=null,this.scenariosIds=null,this.scenarioName=({$implicit:a})=>this.scenarios?.get(a),this.search$=new Y.x,this.reset()}ngOnInit(){this.scenariosListService.scenarios$.pipe((0,j.R)(this.destroy$)).subscribe(i=>{this.scenarios=new Map(i.filter(t=>$.getBusinessId(t)!==this.currentScenarioId).map(t=>[$.getBusinessId(t),$.getFullName(t)])),this.scenariosIds=Array.from(this.scenarios.keys()),this.filteredItems$=this.search$.pipe((0,N.w)(t=>(0,xt.of)(Array.from(this.scenarios?.entries()??[]).filter(o=>o[1].toLowerCase().includes(t.toLowerCase())).map(o=>o[0]))),(0,L.O)(this.scenariosIds))})}onSearchChange(i){this.search$.next(i)}}He.\u0275fac=function(i){return new(i||He)(e.Y36(f.gz),e.Y36(h.a3),e.Y36(d.j3),e.Y36(x))},He.\u0275cmp=e.Xpm({type:He,selectors:[["ghse-scenario-properties-editor"]],features:[e._Bn([{provide:h.a3}]),e.qOj],decls:24,vars:21,consts:[[3,"formGroup","ngSubmit"],["tuiLabel","Scenario requirements:",1,"form-row"],[1,"multi-field"],[4,"ngFor","ngForOf"],["tuiLabel","Scenario unlocks:",1,"form-row"],[3,"formControl","tuiTextfieldLabelOutside","searchChange"],["emptyContent","Be sure to create said scenario later.",3,"itemContent","items",4,"tuiDataList"],[3,"formControl","error"],["tuiLabel","Scenario blocks:",1,"form-row"],["emptyContent","No such scenario currently exists. You can insert it now but be sure to create said scenario later.",3,"itemContent","items",4,"tuiDataList"],[1,"form-row","buttons"],["tuiButton","","type","submit",3,"disabled"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[1,"requirement",3,"formControl","tuiTextfieldLabelOutside","searchChange"],["class","separator",4,"ngIf"],["emptyContent","No such scenario currently exists. You can insert it now but be sure to create said scenario later.",3,"itemContent","items"],[1,"separator"],["emptyContent","Be sure to create said scenario later.",3,"itemContent","items"]],template:function(i,t){1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(1,"label",1)(2,"div",2),e.YNc(3,Jn,5,3,"ng-container",3),e.qZA()(),e.TgZ(4,"label",4)(5,"tui-input-tag",5),e.NdJ("searchChange",function(r){return t.onSearchChange(r)}),e._uU(6," Scenario unlocks "),e.YNc(7,$n,2,4,"tui-data-list-wrapper",6),e.qZA(),e._UZ(8,"tui-error",7),e.ALo(9,"async"),e.ALo(10,"tuiFieldError"),e.qZA(),e.TgZ(11,"label",8)(12,"tui-input-tag",5),e.NdJ("searchChange",function(r){return t.onSearchChange(r)}),e._uU(13," Scenario blocks "),e.YNc(14,Yn,2,4,"tui-data-list-wrapper",9),e.qZA(),e._UZ(15,"tui-error",7),e.ALo(16,"async"),e.ALo(17,"tuiFieldError"),e.qZA(),e.TgZ(18,"div",10)(19,"div")(20,"button",11),e._uU(21,"Save"),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(){return t.reset()}),e._uU(23," Reset "),e.qZA()()()()),2&i&&(e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("ngForOf",t.form.controls.requires.controls),e.xp6(2),e.Q6J("formControl",t.form.controls.unlocks)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("formControl",t.form.controls.unlocks)("error",e.lcZ(9,11,e.lcZ(10,13,e.DdM(19,Nt)))),e.xp6(4),e.Q6J("formControl",t.form.controls.blocks)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("formControl",t.form.controls.blocks)("error",e.lcZ(16,15,e.lcZ(17,17,e.DdM(20,Nt)))),e.xp6(5),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[p.sg,p.O5,d._Y,d.JJ,d.JL,d.oH,d.sg,O.v0,we.xT,ht.gX,Un.A,lt.v,Et.eC,_t.PZ,p.Ov,mt.Ag],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .requirement[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 2rem}"],changeDetection:0});class Oe{}Oe.\u0275fac=function(i){return new(i||Oe)},Oe.\u0275mod=e.oAB({type:Oe}),Oe.\u0275inj=e.cJS({imports:[p.ez]});var Zt=u(1842),Vt=u(8574),Rt=u(529),Qn=u(1954);class Se{constructor(i,t,o){this.http=t,this.loaderService=o,this._labels=new Map,this.loaderService.addBlock("LocalizationLabelService"),i.baseEditionData$.pipe((0,C.U)(r=>r.extendedEditions),(0,N.w)(r=>(0,Z.D)(r.map(s=>this.loadEditionLabel(s))))).subscribe(r=>{this._labels=new Map(r.map(s=>[Object.keys(s.en.edition)[0],s])),this.loaderService.releaseBlock("LocalizationLabelService")})}getMonster(i,t){return this._labels.get(i)?.en.monster[t]??""}loadEditionLabel(i){return this.http.get(`assets/json/ghs-data/${i}/label.json`,{context:(0,Zt.DN)()})}}Se.\u0275fac=function(i){return new(i||Se)(e.LFG(Vt.C),e.LFG(Rt.eN),e.LFG(Qn.n))},Se.\u0275prov=e.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"});class ke{constructor(i,t,o){this.labelService=t,this.http=o,i.baseEditionData$.pipe((0,C.U)(r=>r.extendedEditions)).subscribe(r=>this.editions=r)}getAvailableMonsters(){return this.http.get("assets/json/monsters.generated.json",{context:(0,Zt.DN)()}).pipe((0,C.U)(i=>i.filter(t=>this.editions.includes(t.edition)).map(t=>(t.displayName=this.labelService.getMonster(t.edition,t.name),t))))}}ke.\u0275fac=function(i){return new(i||ke)(e.LFG(Vt.C),e.LFG(Se),e.LFG(Rt.eN))},ke.\u0275prov=e.Yz7({token:ke,factory:ke.\u0275fac,providedIn:Oe});var Gn=u(3675);let Wn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,o){},styles:[".tui-group{position:relative;z-index:0;display:flex}.tui-group>*{flex:1 1 0;min-width:0}.tui-group>*:nth-child(n){border-radius:0}.tui-group>*:not(:last-child){margin-right:.125rem}.tui-group_collapsed>*{z-index:1}.tui-group_collapsed>*:not(:last-child){margin-right:-1px}.tui-group_collapsed>*._readonly,.tui-group_collapsed>*._disabled,.tui-group_collapsed>*._readonly:hover,.tui-group_collapsed>*._disabled:hover{z-index:0}.tui-group_collapsed>*:hover,.tui-group_collapsed>*._hovered,.tui-group_collapsed>*._pressed{z-index:3}.tui-group_collapsed>*._invalid{z-index:2}.tui-group_collapsed>*._invalid:hover,.tui-group_collapsed>*._invalid._hovered,.tui-group_collapsed>*._invalid._pressed{z-index:4}.tui-group_collapsed>*._hosted_dropdown_focused,.tui-group_collapsed>*._focus-visible,.tui-group_collapsed>*._focused.ng-touched,.tui-group_collapsed>*._focused.ng-untouched{z-index:5}.tui-group_collapsed>*._active,.tui-group_collapsed>*[data-appearance=whiteblock-active]{z-index:6}.tui-group_collapsed>*._focus-visible._focused,.tui-group_collapsed>*._focus-visible._active,.tui-group_collapsed>*._focus-visible[data-appearance=whiteblock-active]{z-index:7}.tui-group_orientation_vertical{display:inline-flex;flex-direction:column}.tui-group_orientation_vertical>*{min-height:auto;flex:0 0 auto}.tui-group_orientation_vertical>*:not(:last-child){margin-right:0;margin-bottom:.125rem}.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}.tui-group_rounded.tui-group_orientation_horizontal>*:first-child{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal>*:last-child{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-bottom-left-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:last-child{border-top-right-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical>*:first-child{border-top-left-radius:var(--tui-radius-m);border-top-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical>*:last-child{border-bottom-left-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:last-child{border-bottom-left-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-m)}}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_vertical{width:100%}.tui-group_adaptive.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical>*:not(:last-child){margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_horizontal{flex-direction:column;width:100%}.tui-group_adaptive.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal>*:not(:last-child){margin-right:0;margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}.tui-group__auto-width-item{min-width:auto;flex:0 0 auto}.tui-group .tui-group__inherit-item{border-radius:inherit}\n"],encapsulation:2}),n})(),Xe=(()=>{class n{constructor(t){this.orientation="horizontal",this.adaptive=!1,this.collapsed=!1,this.rounded=!0,this.size="m",t.addComponent(Wn)}get orientationHorizontal(){return"horizontal"===this.orientation}get orientationVertical(){return"vertical"===this.orientation}get sizeLarge(){return"l"===this.size}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.gH))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiGroup","",5,"ng-container"]],hostAttrs:["role","group",1,"tui-group"],hostVars:12,hostBindings:function(t,o){2&t&&e.ekj("tui-group_adaptive",o.adaptive)("tui-group_collapsed",o.collapsed)("tui-group_rounded",o.rounded)("tui-group_orientation_horizontal",o.orientationHorizontal)("tui-group_orientation_vertical",o.orientationVertical)("tui-group_radius_large",o.sizeLarge)},inputs:{orientation:"orientation",adaptive:"adaptive",collapsed:"collapsed",rounded:"rounded",size:"size"}}),(0,c.gn)([(0,l.TH)()],n.prototype,"orientation",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"adaptive",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"collapsed",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"rounded",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),qn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez]]}),n})();var Lt=u(3422),ft=u(6966),Ht=u(8341),Ut=u(4606),jt=u(7377);function Kn(n,i){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=i.polymorpheusOutlet;e.xp6(1),e.hij(" ",t," ")}}const Xn=function(n,i){return{$implicit:n,active:i}};function eo(n,i){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,Kn,2,1,"ng-container",5),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("polymorpheusOutlet",t.computedContent)("polymorpheusOutletContext",e.WLB(2,Xn,t.value,t.computedFocused))}}function to(n,i){1&n&&e.GkF(0)}function no(n,i){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,to,1,0,"ng-container",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("polymorpheusOutlet",t.arrow)}}const oo=["*",[["input"]]],io=["*","input"];let zt=(()=>{class n extends R.F9{constructor(t,o,r,s){super(t,o),this.arrowMode=r,this.itemsHandlers=s,this.stringify=this.itemsHandlers.stringify,this.strictMatcher=z.zy,this.identityMatcher=this.itemsHandlers.identityMatcher,this.valueContent="",this.strict=!0,this.search=null,this.searchChange=new e.vpe,this.datalist="",this.open=!1}get arrow(){return this.interactive?this.arrowMode.interactive:this.arrowMode.disabled}get nativeFocusableElement(){var t,o;return null!==(o=null===(t=this.textfield)||void 0===t?void 0:t.nativeFocusableElement)&&void 0!==o?o:null}get focused(){return(0,pe.V8)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get nativeValue(){return null===this.value?this.search||"":this.stringify(this.value)}get showValueTemplate(){return(0,F.Pc)(this.value)&&!this.focused}get computedContent(){return this.valueContent||this.nativeValue}onActiveZone(t){this.updateFocused(t)}checkOption(t){this.isStrictMatch(t)&&(this.updateValue(t),this.updateSearch(null))}handleOption(t){this.setNativeValue(this.stringify(t)),this.focusInput(),this.close(),this.updateSearch(null),this.updateValue(t)}onFieldKeyDownEnter(t){var o;this.open&&t.preventDefault();const r=(null===(o=this.accessor)||void 0===o?void 0:o.getOptions())||[];1===r.length&&(this.updateValue(r[0]),this.updateSearch(null),this.close())}onValueChange(t){var o,r;this.updateSearch(t);const s=null===(o=this.accessor)||void 0===o?void 0:o.getOptions().find(a=>this.isStrictMatch(a));if(void 0!==s)return this.updateValue(s),void this.updateSearch(null);(this.strict||""===this.search)&&this.updateValue(null),null===(r=this.hostedDropdown)||void 0===r||r.updateOpen(!0)}updateValue(t){super.updateValue(t)}toggle(){var t;null===(t=this.hostedDropdown)||void 0===t||t.updateOpen(!this.open)}isStrictMatch(t){return this.strictMatcher(t,this.search||"",this.stringify)}close(){var t;null===(t=this.hostedDropdown)||void 0===t||t.updateOpen(!1)}updateSearch(t){this.search!==t&&(this.search=t,this.searchChange.emit(t))}setNativeValue(t){this.nativeFocusableElement&&(this.nativeFocusableElement.value=t)}focusInput(t=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.a5,10),e.Y36(e.sBO),e.Y36(Ht.Ii),e.Y36(ot.Ys))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-combo-box"]],contentQueries:function(t,o,r){if(1&t&&(e.Suo(r,ue.Cc,5),e.Suo(r,ht.gX,5,e.Rgc)),2&t){let s;e.iGM(s=e.CRH())&&(o.accessor=s.first),e.iGM(s=e.CRH())&&(o.datalist=s.first)}},viewQuery:function(t,o){if(1&t&&(e.Gf(Ge.o1,5),e.Gf(Q.yc,5)),2&t){let r;e.iGM(r=e.CRH())&&(o.hostedDropdown=r.first),e.iGM(r=e.CRH())&&(o.textfield=r.first)}},inputs:{stringify:"stringify",strictMatcher:"strictMatcher",identityMatcher:"identityMatcher",valueContent:"valueContent",strict:"strict",search:"search"},outputs:{searchChange:"searchChange"},features:[e._Bn([(0,G.FT)(n),(0,ue.oE)(n),(0,R.wB)(n),(0,ue.P7)(Ut.Q4)],[jt.yn]),e.qOj],ngContentSelectors:io,decls:7,vars:13,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-combo-box__textfield",1,"t-textfield",3,"pseudoFocus","pseudoHover","invalid","nativeId","readOnly","tuiTextfieldIcon","disabled","focusable","value","valueChange","click","keydown.enter"],["ngProjectAs","tuiContent","automation-id","tui-combo-box__template","class","t-value",5,["tuiContent"],4,"ngIf"],["icon",""],["ngProjectAs","tuiContent","automation-id","tui-combo-box__template",5,["tuiContent"],1,"t-value"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-icon"],[4,"polymorpheusOutlet"]],template:function(t,o){if(1&t&&(e.F$t(oo),e.TgZ(0,"tui-hosted-dropdown",0),e.NdJ("openChange",function(s){return o.open=s})("tuiActiveZoneChange",function(s){return o.onActiveZone(s)}),e.TgZ(1,"tui-primitive-textfield",1),e.NdJ("valueChange",function(s){return o.onValueChange(s)})("click",function(){return o.toggle()})("keydown.enter",function(s){return o.onFieldKeyDownEnter(s)}),e.Hsn(2),e.Hsn(3,1,["ngProjectAs","input",5,["input"]]),e.YNc(4,eo,2,5,"div",2),e.qZA(),e.YNc(5,no,2,1,"ng-template",null,3,e.W1O),e.qZA()),2&t){const r=e.MAs(6);e.Q6J("canOpen",o.interactive)("content",o.datalist||"")("open",o.open),e.xp6(1),e.Q6J("pseudoFocus",o.computedFocused)("pseudoHover",o.pseudoHover)("invalid",o.computedInvalid)("nativeId",o.nativeId)("readOnly",o.readOnly)("tuiTextfieldIcon",o.arrow?r:"")("disabled",o.computedDisabled)("focusable",o.computedFocusable)("value",o.nativeValue),e.xp6(3),e.Q6J("ngIf",o.showValueTemplate)}},dependencies:[Ge.o1,Q.yc,Lt.e,Q.B1,we.AW,p.O5,ye.Li],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center}.t-icon[_ngcontent-%COMP%]{pointer-events:auto}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"stringify",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"strictMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"valueContent",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"strict",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"search",void 0),n})(),ro=(()=>{class n extends ft.D1{get value(){return this.host.nativeValue}onValueChange(t){this.host.onValueChange(t)}}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-combo-box"]],features:[e._Bn([(0,ue.cp)(n)]),e.qOj]}),n})(),so=(()=>{class n{constructor(t){this.comboBox=t,this.strict=!0}onInput(){!this.strict&&this.comboBox.search&&this.comboBox.updateValue(this.comboBox.search)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(zt))},n.\u0275dir=e.lG2({type:n,selectors:[["tui-combo-box","strict",""]],hostBindings:function(t,o){1&t&&e.NdJ("input",function(){return o.onInput()})},inputs:{strict:"strict"}}),(0,c.gn)([(0,l.TH)()],n.prototype,"strict",void 0),n})(),ao=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,ye.wq,Lt.A,Q.KW,Ge.jh,Ut.Ig,Ht.Mt,we.cn]]}),n})();var uo=u(1225),Fe=u(8865),co=u(6422),W=u(5825);function Jt(n,i){const[,t=""]=function lo(n){const i=String(n),[t,o]=i.split("e-");let r=i;if(o){const[,s]=t.split("."),a=Number(o)+(s?.length||0);r=n.toFixed(a)}return r}(n).split(".");return(0,F.dt)(i)?t.slice(0,Math.max(0,i)):t}function $t(n,i={}){const{decimalLimit:t,decimalSeparator:o,thousandSeparator:r,zeroPadding:s}=Object.assign(Object.assign({},W.Jl),i),a=String(Math.floor(Math.abs(n)));let m=Jt(n,t);if(Number.isFinite(t))if(s){const J=Math.max(t-m.length,0);m=`${m}${"0".repeat(J)}`}else m=m.replace(/0*$/,"");const g=a.length%3;let q=(n<0?z.fv:"")+a.charAt(0);for(let J=1;J<a.length;J++)J%3===g&&a.length>3&&(q+=r),q+=a.charAt(J);return m?q+o+m:q}function Yt(n){return"."===n?",":"."}function po(n=0,i=",",t=z.f$,o,r,s=!1){Fe.z.assert(Number.isInteger(n)),Fe.z.assert(n>=0);let a=-1;const m=!!o&&(0,co.Ex)(o)||s;return o&&m&&o.addEventListener("beforeinput",()=>{a=o.selectionStart||0}),(g,k)=>{if(!g&&k.rawValue===z.fv&&r)return z.fv;if(o&&m&&(0,pe.V8)(o)){const _e=function go(n="",i,t,o=","){const r=new RegExp(`${o}.+`),s=n.replace(r,""),a=i.replace(r,"");if(Math.abs(s.length-a.length)>2)return i.length;if(n.length===i.length)return n.indexOf(o)<=t?function ho(n,i){for(let t=0;t<i.length;t++)if(n[t]!==i[t])return"0"===i[t]?t:t+1;return i.length}(n,i):s===a?t-1:t+1;if(0===n.length)return 1;return t+(i.length-n.length)}(k.previousConformedValue,g,a);setTimeout(()=>{o.setSelectionRange(_e,_e)})}if(o&&o.ownerDocument!==(0,fe.Wf)(o)&&(0,pe.V8)(o)&&k.currentCaretPosition){const _e=k.currentCaretPosition+function _o(n="",i,t){if(Math.abs(n.length-i.length)>2)return 0;const r=n.split(t).length;return i.split(t).length-r}(k.previousConformedValue,g,t);setTimeout(()=>{o.setSelectionRange(_e,_e)})}if(""===g||!n)return{value:g};const q=function mo(n,i=","){return n.includes(i)?n:n+i}(g,i),J=q.split(i)[1];return{value:q+"0".repeat(n-J.length)}}}const Qt=/[1-9]/;function Gt({allowDecimal:n=!1,decimalSymbol:i=",",thousandSymbol:t=z.f$,autoCorrectDecimalSymbol:o=!0,decimalLimit:r=2,requireDecimal:s=!1,allowNegative:a=!1,integerLimit:m=0}={}){return Fe.z.assert(Number.isInteger(r)),Fe.z.assert(r>=0),Fe.z.assert(Number.isInteger(m)),Fe.z.assert(m>=0),(g,{previousConformedValue:k})=>{k&&s&&g.split(t).join("")===k.split(t).join("").split(i).join("")&&(g=k);const q=(g[0]===z.fv||g[0]===z.F)&&a;if(function bo(n,i,t){return t?/^[,.]$/.test(n):n===i}(g,i,o)&&n)return["0",i,W.hW];q&&(g=g.slice(1));const J=function Co(n,i,t){return t?Math.max(n.lastIndexOf(i),n.lastIndexOf(Yt(i))):n.lastIndexOf(i)}(g,i,o),me=-1!==J,_e=me?g.slice(0,J):g,$i=_e.match(new RegExp(t,"g"))||[],gn=(m?_e.slice(0,m+$i.length):_e).replace(W.R3,""),[Yi]=gn.match(W.s9)||[""],Qi=Yi.length,hn=gn.replace(/^0+(?!\.|$)/,"").trim(),Gi=function Mo(n,i){return n.length>3?n.replace(/\B(?=(\d{3})+(?!\d))/g,i):n}(hn,t),Te=Wt(Gi);if(me&&n||s){const tt=me?Wt(g.slice(J+1).replace(W.R3,"")):[],nt=r?tt.slice(0,r):tt;g[J]!==Yt(i)&&Te.push(W.v1),Te.push(i,W.v1,...nt);for(let _n=0;_n<r-nt.length;_n++)Te.push(W.hW)}const Wi=1===Te.length&&"0"===hn;return q&&(0===Te.length&&Te.push(W.hW),Te.unshift(z.fv)),function vo(n,i=!1,t=0){if(i||0===t)return n;const o=n.indexOf(W.hW);if(-1===o)return n;const s=n[o+1]===W.v1;return s&&1===t?n:s?(n.unshift(Qt),n):(n[o]=Qt,n)}(Te,Wi,Qi)}}function Wt(n){return n.split("").map(i=>W.hW.test(i)?W.hW:i)}function Oo({thousandSeparator:n}){return!W.YZ.includes(n)}function et(n,i,t){return parseFloat(n.split(t).join("").split(i).join("."))}let qt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiValueAccessor",""]],features:[e._Bn([jt.E2])]}),n})(),Kt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var xo=u(2243);let Xt=(()=>{class n{constructor(t,o,r){this._renderer=t,this._elementRef=o,this._compositionMode=r,this.textMaskConfig={mask:[],guide:!0,placeholderChar:"_",pipe:void 0,keepCharPositions:!1},this.onChange=s=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Po(){const n=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}ngOnChanges(){this._setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)}writeValue(t){this._setupMask(),this._renderer.setProperty(this.inputElement,"value",t??""),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&(this._setupMask(),void 0!==this.textMaskInputElement&&(this.textMaskInputElement.update(t),this.onChange(t=this.inputElement.value)))}_setupMask(t=!1){this.inputElement||(this.inputElement="INPUT"===this._elementRef.nativeElement.tagName.toUpperCase()?this._elementRef.nativeElement:this._elementRef.nativeElement.getElementsByTagName("INPUT")[0]),this.inputElement&&t&&(this.textMaskInputElement=(0,xo.createTextMaskInputElement)(Object.assign({inputElement:this.inputElement},this.textMaskConfig)))}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this._handleInput(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(d.ve,8))},n.\u0275dir=e.lG2({type:n,selectors:[["","textMask",""]],hostBindings:function(t,o){1&t&&e.NdJ("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},inputs:{textMaskConfig:["textMask","textMaskConfig"]},exportAs:["textMask"],features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0}]),e.TTD]}),n})(),en=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();function yo(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"section",2)(2,"button",3),e.NdJ("mousedown",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onButtonMouseDown(r,s.plusButtonDisabled))})("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.increaseValue())}),e.qZA(),e.TgZ(3,"button",4),e.NdJ("mousedown",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onButtonMouseDown(r,s.minusButtonDisabled))})("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.decreaseValue())}),e.qZA()(),e.BQk()}if(2&n){const t=i.ngIf,o=e.oxw(2);e.xp6(2),e.Q6J("icon",o.iconUp)("appearance",o.options.appearance)("title",t[0])("disabled",o.plusButtonDisabled)("focusable",!1),e.xp6(1),e.Q6J("icon",o.iconDown)("appearance",o.options.appearance)("disabled",o.minusButtonDisabled)("focusable",!1)("title",t[1])}}function wo(n,i){if(1&n&&(e.ynx(0),e.YNc(1,yo,4,10,"ng-container",1),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.minusTexts$))}}const ko=["*",[["input"]]],Io=["*","input"],tn={icons:{up:"tuiIconPlus",down:"tuiIconMinus"},appearance:"textfield",hideButtons:!1,min:0,max:Number.MAX_SAFE_INTEGER,step:1,postfix:""},nn=new e.OlP("[TUI_INPUT_COUNT_OPTIONS]: Default parameters for input count component",{factory:()=>tn});let So=(()=>{class n extends R.F9{constructor(t,o,r,s,a,m,g,k){super(t,o),this.appearance=r,this.textfieldSize=s,this.minusTexts$=a,this.isMobile=m,this.options=g,this.numberFormat=k,this.step=this.options.step,this.min=this.options.min,this.max=this.options.max,this.hideButtons=this.options.hideButtons,this.prefix="",this.postfix=this.options.postfix}getMask(t){return{mask:Gt({allowNegative:t,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator}),guide:!1}}get buttonsHidden(){return this.hideButtons||"table"===this.appearance}get iconUp(){return this.options.icons.up}get iconDown(){return this.options.icons.down}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get size(){return this.textfieldSize.size}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get exampleText(){return String(this.min)}get computedValue(){return this.focused?this.nativeValue:this.formatNumber(this.value)}get minusButtonDisabled(){return!this.interactive||(0,F.Pc)(this.value)&&this.value<=this.min}get plusButtonDisabled(){return!this.interactive||(0,F.Pc)(this.value)&&this.value>=this.max}onButtonMouseDown(t,o=!1){o||!this.nativeFocusableElement||this.isMobile||(t.preventDefault(),this.nativeFocusableElement.focus())}onFocused(t){t||this.onBlur(),this.updateFocused(t)}onValueChange(){const t=this.capValue(this.nativeNumberValue);if(this.isNotNumber(t))return void this.updateValue(null);const o=this.formatNumber(t);this.nativeValue!==o&&(this.nativeValue=o),this.updateValue(t)}decreaseValue(){this.readOnly||this.safeUpdateValue((this.value||0)-this.step)}increaseValue(){this.readOnly||this.safeUpdateValue((this.value||0)+this.step)}onKeydown(t){switch(t.key){case"ArrowUp":case"Up":this.increaseValue(),t.preventDefault();break;case"ArrowDown":case"Down":this.decreaseValue(),t.preventDefault()}}get nativeNumberValue(){return parseInt(this.nativeValue.split(this.numberFormat.thousandSeparator).join(""),10)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){this.nativeFocusableElement&&(this.nativeFocusableElement.value=t)}safeUpdateValue(t){const o=(0,uo.Ki)(t,this.min,this.max);this.updateValue(o),this.nativeValue=this.formatNumber(o)}capValue(t){const o=Math.min(t,this.max);return Number.isNaN(o)||o<this.min?null:o}onBlur(){if(this.isNotNumber(this.value))return void this.updateValue(null);const t=Math.max(this.nativeNumberValue||0,this.min),o=this.formatNumber(t);this.nativeValue=o,this.updateValue(t),this.primitiveTextfield&&(this.primitiveTextfield.value=o)}formatNumber(t){return this.isNotNumber(t)?"":$t(t,this.numberFormat)}isNotNumber(t){return Number.isNaN(t)||!(0,F.Pc)(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.a5,10),e.Y36(e.sBO),e.Y36(ue.jt),e.Y36(we.kI),e.Y36(ot.mT),e.Y36(G.fL),e.Y36(nn),e.Y36(ue.HO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-input-count"]],viewQuery:function(t,o){if(1&t&&e.Gf(Q.yc,5),2&t){let r;e.iGM(r=e.CRH())&&(o.primitiveTextfield=r.first)}},hostVars:3,hostBindings:function(t,o){2&t&&(e.uIk("data-size",o.size),e.ekj("_hide-buttons",o.buttonsHidden))},inputs:{step:"step",min:"min",max:"max",hideButtons:"hideButtons",prefix:"prefix",postfix:"postfix"},features:[e._Bn([(0,G.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:Io,decls:4,vars:13,consts:[["tuiValueAccessor","",1,"t-textfield",3,"pseudoFocus","pseudoHover","pseudoActive","focusable","nativeId","prefix","postfix","disabled","readOnly","textMask","invalid","value","valueChange","keydown","focusedChange"],[4,"ngIf"],[1,"t-buttons"],["tuiIconButton","","type","button","automation-id","tui-input-count__plus-button","size","s",1,"t-button","t-button_plus",3,"icon","appearance","title","disabled","focusable","mousedown","click"],["tuiIconButton","","type","button","automation-id","tui-input-count__minus-button","size","s",1,"t-button","t-button_minus",3,"icon","appearance","disabled","focusable","title","mousedown","click"]],template:function(t,o){1&t&&(e.F$t(ko),e.TgZ(0,"tui-primitive-textfield",0),e.NdJ("valueChange",function(){return o.onValueChange()})("keydown",function(s){return o.onKeydown(s)})("focusedChange",function(s){return o.onFocused(s)}),e.Hsn(1),e.Hsn(2,1,["ngProjectAs","input",5,["input"]]),e.qZA(),e.YNc(3,wo,3,3,"ng-container",1)),2&t&&(e.Q6J("pseudoFocus",o.pseudoFocus)("pseudoHover",o.pseudoHover)("pseudoActive",o.pseudoActive)("focusable",o.focusable)("nativeId",o.nativeId)("prefix",o.prefix)("postfix",o.postfix)("disabled",o.computedDisabled)("readOnly",o.readOnly)("textMask",o.getMask(o.min<0))("invalid",o.computedInvalid)("value",o.computedValue),e.xp6(3),e.Q6J("ngIf",!o.buttonsHidden))},dependencies:[Q.yc,O.v0,Q.B1,qt,Xt,p.O5,p.Ov],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);border-radius:var(--tui-radius-m);height:var(--tui-height-m);color:var(--tui-text-01);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}[data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l)}.t-textfield[_ngcontent-%COMP%]{position:relative;border-radius:inherit;text-align:inherit;flex-grow:1;min-width:0}[_nghost-%COMP%]:not(._hide-buttons)   .t-textfield[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.t-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:.125rem;height:100%}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{display:flex;width:calc(var(--tui-height-m) * .75);height:calc(50% - .0625rem)}.t-buttons[_ngcontent-%COMP%]   .t-button_plus[_ngcontent-%COMP%]{margin-bottom:.125rem;border-radius:0 var(--tui-radius-m) 0 0}.t-buttons[_ngcontent-%COMP%]   .t-button_minus[_ngcontent-%COMP%]{border-radius:0 0 var(--tui-radius-m)}[data-size=l][_nghost-%COMP%]   .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{width:calc(var(--tui-height-l) * .75)}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"step",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"min",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"max",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideButtons",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"prefix",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"postfix",void 0),(0,c.gn)([l.UM],n.prototype,"getMask",null),n})(),Fo=(()=>{class n extends ft.D1{onValueChange(){this.host.onValueChange()}ngAfterViewInit(){if(this.host.nativeFocusableElement){const{nativeFocusableElement:t}=this.host;t.autocomplete="off",t.inputMode="numeric",t.maxLength=t.maxLength>-1?t.maxLength:18}}}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-input-count"]],features:[e._Bn([(0,ue.cp)(n)]),e.qOj]}),n})(),Ao=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,en,O.fN,Q.KW,we.cn,Kt,ye.wq]]}),n})();var Do=u(710);let Bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Ae=u(7846);const Eo=["*"];let vt=(()=>{class n extends R.F9{constructor(t,o,r){super(t,o),this.modeDirective=r,this.contentAlign="right",this.hideCheckbox=!1,this.size="l"}get nativeFocusableElement(){return this.checkbox?this.checkbox.nativeFocusableElement:null}get checked(){return!1!==this.value&&this.hideCheckbox}get checkboxSize(){return"l"===this.size?"l":"m"}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get appearance(){var t;return null!==(t=this.modeDirective)&&void 0!==t&&t.mode?this.checked?"primary":"secondary":this.checked?"whiteblock-active":"whiteblock"}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.a5,10),e.Y36(e.sBO),e.Y36(dt.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox-block"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ke,5),2&t){let r;e.iGM(r=e.CRH())&&(o.checkbox=r.first)}},hostVars:6,hostBindings:function(t,o){2&t&&(e.uIk("data-tui-host-align",o.contentAlign)("data-size",o.size),e.ekj("_hidden_checkbox",o.hideCheckbox)("_active",o.checked))},inputs:{contentAlign:"contentAlign",hideCheckbox:"hideCheckbox",size:"size"},features:[e._Bn([(0,G.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:Eo,decls:7,vars:15,consts:[[1,"t-wrapper"],["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],[1,"t-content-wrapper"],[1,"t-content"],[1,"t-view",3,"disabled","nativeId","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","focusable","ngModel","ngModelChange","focusedChange","focusVisibleChange"],[1,"t-label"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"tui-checkbox",4),e.NdJ("ngModelChange",function(s){return o.onModelChange(s)})("focusedChange",function(s){return o.onFocused(s)})("focusVisibleChange",function(s){return o.onFocusVisible(s)}),e.qZA(),e.TgZ(5,"div",5),e.Hsn(6),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("appearance",o.appearance)("disabled",o.computedDisabled)("focus",o.computedFocusVisible)("hover",o.pseudoHover)("active",o.pseudoActive)("invalid",o.computedInvalid),e.xp6(3),e.Q6J("disabled",o.computedDisabled||o.readOnly)("nativeId",o.nativeId)("pseudoInvalid",o.computedInvalid)("pseudoFocus",!1)("pseudoHover",o.pseudoHover)("pseudoActive",o.pseudoActive)("size",o.checkboxSize)("focusable",o.focusable)("ngModel",o.value))},dependencies:[Ke,Ae.o,d.JJ,d.On],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:inline-block;vertical-align:top;border-radius:var(--tui-radius-m)}[data-size=m][_nghost-%COMP%], [data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{position:relative;border-radius:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.t-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}[data-size=s][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-l)}.t-content[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:inherit}[data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{flex-direction:row-reverse}[data-size=s][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .5rem 0 1rem}[data-size=s]._hidden_checkbox[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .75rem}[data-size=m][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .75rem 0 1rem}[data-size=m]._hidden_checkbox[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=l]._hidden_checkbox[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 2.25rem}.t-view[_ngcontent-%COMP%]{margin-top:.75rem;margin-right:.75rem;align-self:flex-start}[data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:0}[data-size=s][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=m][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.875rem}[data-size=l][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:1rem}._hidden_checkbox[_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{position:absolute;height:1px;width:1px;margin:-1px;border:0;padding:0;overflow:hidden;clip:rect(0,0,0,0);-webkit-clip-path:inset(0);clip-path:inset(0)}.t-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}._hidden_checkbox[_nghost-%COMP%]   .t-label[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"contentAlign",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideCheckbox",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),No=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.u5,Do.VE,Bo,Bt,Ae.W]]}),n})();var Zo=u(6942);let Vo=(()=>{class n{get query(){return this.accessor.nativeFocusableElement&&this.accessor.nativeFocusableElement.value||""}filter(t,o,r,s){return t?(0,Zo.fR)(t)?this.filterFlat(t,o,r,s):this.filter2d(t,o,r,s):null}filterFlat(t,o,r,s){const a=this.getMatch(t,r,s);return(0,F.Pc)(a)?t:t.filter(m=>o(m,s,r))}filter2d(t,o,r,s){const a=t.find(m=>(0,F.Pc)(this.getMatch(m,r,s)));return(0,F.Pc)(a)?t:t.map(m=>this.filterFlat(m,o,r,s))}getMatch(t,o,r){return t.find(s=>o(s).toLocaleLowerCase()===r.toLocaleLowerCase())}}return(0,c.gn)([l.UM],n.prototype,"filter",null),n})(),Ro=(()=>{class n extends Vo{constructor(t){super(),this.accessor=t}transform(t,o){return this.filter(t,z.LQ,o,this.query)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(G.KZ,16))},n.\u0275pipe=e.Yjl({name:"tuiFilterByInputWith",type:n,pure:!1}),n})(),Lo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),Ho=(()=>{class n{transform(t){return({$implicit:o})=>t(o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"tuiStringifyContent",type:n,pure:!0}),n})(),Uo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();function jo(n,i){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",8),e.ALo(1,"tuiFilterByInputWith"),e.ALo(2,"tuiStringifyContent")),2&n){const t=e.oxw();e.Q6J("items",e.xi3(1,2,t.allMonsters,t.stringifySearch))("itemContent",e.lcZ(2,5,t.stringify))}}function zo(n,i){if(1&n&&(e.TgZ(0,"tui-checkbox-block",19),e._uU(1," Draw extra card "),e._UZ(2,"tui-tooltip",20),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("formControl",t.controls.drawExtra)}}function Jo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"form",9)(1,"div",10),e._UZ(2,"img",11),e.TgZ(3,"div",12)(4,"div",13),e._uU(5),e.TgZ(6,"tui-svg",14),e.NdJ("click",function(){const s=e.CHM(t).index,a=e.oxw();return e.KtG(a.remove(s))}),e.qZA()(),e.TgZ(7,"tui-input-count",15),e._uU(8," Level ajustment "),e.qZA()()(),e.TgZ(9,"div",16)(10,"tui-checkbox-block",17),e._uU(11,"Is ally"),e.qZA(),e.YNc(12,zo,3,1,"tui-checkbox-block",18),e.qZA()()}if(2&n){const t=i.$implicit,o=i.index,r=e.oxw();e.xp6(2),e.Q6J("src","assets/images/ghs/monster/thumbnail/"+r.addedMonsters[o].edition+"-"+r.addedMonsters[o].name+".png",e.LSH),e.xp6(3),e.hij(" ",r.addedMonsters[o].displayName," "),e.xp6(2),e.Q6J("formControl",t.controls.levelAdjustment)("min",-1)("max",7),e.xp6(2),e.Q6J("collapsed",!0),e.xp6(1),e.Q6J("formControl",t.controls.isAlly),e.xp6(2),e.Q6J("ngIf",r.isDrawExtraNeeded(r.addedMonsters[o]))}}class Ue extends ct{constructor(i,t,o){super(i,t,r=>r.monsters$,(r,s)=>r.updateMonsters(s),()=>qe({name:["",d.kI.required],levelAdjustment:[0],isAlly:[!1],drawExtra:[!1]})),this.monstersProvider=o,this.allMonsters=[],this.addedMonsters=[],this.stringify=r=>r.displayName,this.stringifySearch=r=>`${r.name} ${r.displayName}`,this.selectedMonster=null}ngOnInit(){this.monstersProvider.getAvailableMonsters().subscribe(i=>{this.allMonsters=i,this.reset()})}isDrawExtraNeeded(i){return-1!==this.addedMonsters.findIndex(t=>void 0!==t.deck&&t!==i&&t.deck===i.deck&&t.edition===i.edition)}addNewMonster(i){i&&(this.addNew(),this.form.controls.at(0)?.patchValue({name:i.name}),this.addedMonsters.unshift(i),setTimeout(()=>this.selectedMonster=null,0))}remove(i){this.addedMonsters.splice(i,1),super.remove(i)}reset(){this.addedMonsters=[];for(const i of this.savedModel){const t=this.allMonsters.find(o=>o.name===i.name);this.addedMonsters.push(t||{name:i.name,displayName:`<Unknown monster> ${i.name}`,edition:"",count:0})}super.reset()}}Ue.\u0275fac=function(i){return new(i||Ue)(e.Y36(f.gz),e.Y36(h.a3),e.Y36(ke))},Ue.\u0275cmp=e.Xpm({type:Ue,selectors:[["ghse-scenario-monsters-editor"]],features:[e._Bn([h.a3]),e.qOj],decls:13,vars:5,consts:[[1,"monster-search",3,"strict","stringify","ngModel","ngModelChange"],["tuiTextfield","","placeholder","Type a name"],[3,"items","itemContent",4,"tuiDataList"],[1,"monsters"],["class","monster-form",4,"ngFor","ngForOf"],[1,"form-row","buttons"],["tuiButton","","type","button",3,"disabled","click"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[3,"items","itemContent"],[1,"monster-form"],[1,"form-row","monster-info"],[1,"thumbnail",3,"src"],[1,"info-controls"],[1,"form-row","name"],["src","tuiIconTrashLarge",1,"delete",3,"click"],[1,"form-row",3,"formControl","min","max"],["tuiGroup","","orientation","vertical",1,"form-row","additional-info",3,"collapsed"],[3,"formControl"],["nativeId","drawExtra",3,"formControl",4,"ngIf"],["nativeId","drawExtra",3,"formControl"],["describeId","drawExtra","content","This monster shares the same deck as the other added monster. You can decide whether they will use the same ability card for a round (then leave the checkbox empty) or if this monster should draw another card (then tick the checkbox)"]],template:function(i,t){1&i&&(e.TgZ(0,"tui-combo-box",0),e.NdJ("ngModelChange",function(r){return t.selectedMonster=r})("ngModelChange",function(r){return t.addNewMonster(r)}),e._uU(1," Search monsters to add "),e._UZ(2,"input",1),e.YNc(3,jo,3,7,"tui-data-list-wrapper",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,Jo,13,8,"form",4),e.qZA(),e.TgZ(6,"form")(7,"div",5)(8,"div")(9,"button",6),e.NdJ("click",function(){return t.save()}),e._uU(10,"Save"),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return t.reset()}),e._uU(12," Reset "),e.qZA()()()()),2&i&&(e.Q6J("strict",!0)("stringify",t.stringify)("ngModel",t.selectedMonster),e.xp6(5),e.Q6J("ngForOf",t.form.controls),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[p.sg,p.O5,d._Y,d.JJ,d.JL,d.oH,O.v0,b.P,ht.gX,Et.eC,Q.MB,Gn.w,Xe,zt,so,ro,d.On,d.F,So,Fo,vt,Ro,Ho],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .monster-search[_ngcontent-%COMP%]{width:20rem;margin-bottom:1.5rem}[_nghost-%COMP%]   .monsters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));gap:1.5rem}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .monster-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .monster-info[_ngcontent-%COMP%]   .info-controls[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .monster-info[_ngcontent-%COMP%]   .info-controls[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font:var(--tui-font-heading-6);display:flex;justify-content:space-between}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .additional-info[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:5rem;height:5rem;margin-right:1rem}"],changeDetection:0});var Ct=u(4227),$o=u(2985);function Yo(n,i){if(1&n&&(e.TgZ(0,"div",8),e._uU(1," Click monster icon to add "),e.TgZ(2,"span",9),e._uU(3),e.qZA(),e._uU(4," to this room "),e.qZA()),2&n){const t=e.oxw(2).$implicit,o=e.oxw();e.xp6(3),e.Oqu(o.getMonsterDisplayName(t))}}const Qo=function(n){return["players2",n]},Go=function(n){return["players3",n]},Wo=function(n){return["players4",n]};function qo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e._UZ(1,"img",11)(2,"div",12)(3,"div",13)(4,"div",14),e.TgZ(5,"div",15),e.NdJ("click",function(){const s=e.CHM(t).index,a=e.oxw(2).$implicit,m=e.oxw();return e.KtG(m.switchStandeeType(a,s,0))}),e.qZA(),e.TgZ(6,"div",15),e.NdJ("click",function(){const s=e.CHM(t).index,a=e.oxw(2).$implicit,m=e.oxw();return e.KtG(m.switchStandeeType(a,s,1))}),e.qZA(),e.TgZ(7,"div",15),e.NdJ("click",function(){const s=e.CHM(t).index,a=e.oxw(2).$implicit,m=e.oxw();return e.KtG(m.switchStandeeType(a,s,2))}),e.qZA(),e.TgZ(8,"tui-svg",16),e.NdJ("click",function(){const s=e.CHM(t).index,a=e.oxw(2).$implicit,m=e.oxw();return e.KtG(m.removeStandee(a,s))}),e.qZA()()}if(2&n){const t=i.$implicit,o=e.oxw(2).$implicit,r=e.oxw();e.xp6(1),e.Q6J("src",r.getMonsterImageUrl(o),e.LSH),e.xp6(4),e.Q6J("ngClass",e.VKq(4,Qo,t[0])),e.xp6(1),e.Q6J("ngClass",e.VKq(6,Go,t[1])),e.xp6(1),e.Q6J("ngClass",e.VKq(8,Wo,t[2]))}}function Ko(n,i){if(1&n){const t=e.EpF();e.ynx(0),e._UZ(1,"img",4),e.TgZ(2,"a",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.addStandee(r))}),e.qZA(),e.YNc(3,Yo,5,1,"div",6),e.YNc(4,qo,9,10,"div",7),e.BQk()}if(2&n){const t=i.tuiLet,o=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.Q6J("src",r.getMonsterImageUrl(o),e.LSH),e.xp6(2),e.Q6J("ngIf",0===t.standees.length),e.xp6(1),e.Q6J("ngForOf",t.standees)}}function Xo(n,i){if(1&n&&(e.TgZ(0,"div",2),e.YNc(1,Ko,5,3,"ng-container",3),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.xp6(1),e.Q6J("tuiLet",o.getMonsterControl(t))}}class Ie extends R.M${constructor(i,t){super(i,t),this.scenarioMonsters=[],this.availableMonsters=[],this.focused=!1,this._nextStandeeType=new Map([["none","normal"],["normal","elite"],["elite","boss"],["boss","none"]])}getMonsterControl(i){let t=this.value.find(o=>o.name===i.name);return t||(t={name:i.name,standees:[]},this.updateValue([...this.value,t])),t}getMonsterImageUrl(i){const t=this.availableMonsters?.find(o=>o.name===i.name);return t?`assets/images/ghs/monster/thumbnail/${t.edition}-${t.name}.png`:""}getMonsterDisplayName(i){const t=this.availableMonsters?.find(o=>o.name===i.name);return t?t.displayName:""}addStandee(i){const t=this.value.find(r=>r.name===i.name),o=this.availableMonsters?.find(r=>r.name===i.name);(t?.standees.length??0)<(o?.count??0)&&t?.standees.push({...U._x})}removeStandee(i,t){this.value.find(r=>r.name===i.name)?.standees.splice(t,1)}getFallbackValue(){return[]}switchStandeeType(i,t,o){const s=this.value.find(a=>a.name===i.name)?.standees.at(t);s&&(s[o]=this._nextStandeeType.get(s[o]))}}function ei(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4),e._uU(2),e.qZA(),e.TgZ(3,"tui-input",5),e.NdJ("ngModelChange",function(r){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.getControl(a).count=r)}),e._uU(4,"Count"),e.qZA()()}if(2&n){const t=i.$implicit,o=i.index,r=e.oxw();e.ekj("present",""!==r.getControl(o).count&&"0"!==r.getControl(o).count),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngModel",r.getControl(o).count)}}Ie.\u0275fac=function(i){return new(i||Ie)(e.Y36(d.a5,10),e.Y36(e.sBO))},Ie.\u0275cmp=e.Xpm({type:Ie,selectors:[["ghse-room-monsters"]],inputs:{scenarioMonsters:"scenarioMonsters",availableMonsters:"availableMonsters"},features:[e.qOj],decls:3,vars:1,consts:[[1,"tui-form__header"],["class","monster-counts",4,"ngFor","ngForOf"],[1,"monster-counts"],[4,"tuiLet"],[1,"monster-icon",3,"src"],["tuiMarkerIcon","","src","tuiIconPlusLarge","mode","link",1,"plus-button",3,"click"],["class","no-standees tui-text_body-m",4,"ngIf"],["class","standee",4,"ngFor","ngForOf"],[1,"no-standees","tui-text_body-m"],[1,"monster-name"],[1,"standee"],[1,"bg",3,"src"],[1,"border1"],[1,"border2"],[1,"border3"],[3,"ngClass","click"],["src","tuiIconTrashLarge",1,"delete",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e._uU(1,"Monsters"),e.qZA(),e.YNc(2,Xo,2,1,"div",1)),2&i&&(e.xp6(2),e.Q6J("ngForOf",t.scenarioMonsters))},dependencies:[p.mk,p.sg,p.O5,b.P,$o.B,Ct.Ls],styles:['.ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{width:60rem;display:flex;flex-direction:column}[_nghost-%COMP%]   .monster-counts[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem;display:flex;align-items:center;position:relative;margin-bottom:1rem}[_nghost-%COMP%]   .monster-counts[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .monster-counts[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .monster-counts[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .monster-name[_ngcontent-%COMP%]{font:var(--tui-font-text-l);margin:.5rem;font-weight:700}[_nghost-%COMP%]   .player-counts[_ngcontent-%COMP%]{width:auto}[_nghost-%COMP%]   .monster-icon[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:100%;margin-right:2rem}[_nghost-%COMP%]   .plus-button[_ngcontent-%COMP%]{position:absolute;background-color:transparent;color:transparent;transition-property:opacity,background-color,color;transition:ease-in-out .3s}[_nghost-%COMP%]   .plus-button[_ngcontent-%COMP%]:hover{color:unset;background-color:#fff;opacity:.8}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]{display:flex;position:relative;margin-right:1.5rem;width:4rem;height:4rem}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{position:absolute;width:4rem;height:4rem;border-radius:100%;filter:opacity(.8);transition:ease-in-out .3s}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:transparent;align-self:center;padding:.3rem;z-index:100}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]:hover   .bg[_ngcontent-%COMP%]{filter:opacity(.2)}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]:hover   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05)}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]:hover   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .border1[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .border2[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .border3[_ngcontent-%COMP%]{width:3.6rem;height:2.25rem;position:absolute;border-left:4px solid #bc1717;border-right:4px solid #bc1717;top:.8rem;border-radius:5%}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .border1[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .border2[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .border3[_ngcontent-%COMP%]:after{width:4.4rem;height:2.8rem;position:absolute;border-left:4px solid #0000007a;border-right:4px solid #0000007a;top:-.3rem;left:-10px;content:"";border-radius:5%}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .border2[_ngcontent-%COMP%]{transform:rotate(60deg)}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .border3[_ngcontent-%COMP%]{transform:rotate(-60deg)}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4[_ngcontent-%COMP%]{cursor:pointer;position:absolute;width:0;height:0;border-style:solid;border-width:1.2rem .7rem 1.2rem 0;border-color:transparent}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4[_ngcontent-%COMP%]:after{position:absolute;width:0;height:0;border-style:solid;border-width:1rem .4rem 1rem 0;border-color:transparent;content:"";transform:rotate(180deg);top:-1rem;left:.65rem}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2.none[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3.none[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4.none[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2.none[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3.none[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4.none[_ngcontent-%COMP%]:after{border-right-color:#000}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2.normal[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3.normal[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4.normal[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2.normal[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3.normal[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4.normal[_ngcontent-%COMP%]:after{border-right-color:#f5f5f5}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2.elite[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3.elite[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4.elite[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2.elite[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3.elite[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4.elite[_ngcontent-%COMP%]:after{border-right-color:#edc815}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2.boss[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3.boss[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4.boss[_ngcontent-%COMP%], [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2.boss[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3.boss[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4.boss[_ngcontent-%COMP%]:after{border-right-color:#a71b1c}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players2[_ngcontent-%COMP%]{transform:rotate(30deg);top:-.25rem;left:-.1rem}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players3[_ngcontent-%COMP%]{transform:rotate(150deg);top:-.25rem;left:3.5rem}[_nghost-%COMP%]   .standee[_ngcontent-%COMP%]   .players4[_ngcontent-%COMP%]{transform:rotate(270deg);top:2.75rem;left:1.71rem}'],changeDetection:0}),(0,c.gn)([(0,l.TH)()],Ie.prototype,"scenarioMonsters",void 0),(0,c.gn)([(0,l.TH)()],Ie.prototype,"availableMonsters",void 0);class De extends R.M${constructor(i,t){super(i,t),this.scenarioObjectives=[],this.focused=!1}getControl(i){let t=this.value.at(i);return t||(t={id:i,count:this.scenarioObjectives?.at(i)?.count??""},this.updateValue([...this.value,t])),t}getFallbackValue(){return[]}}De.\u0275fac=function(i){return new(i||De)(e.Y36(d.a5,10),e.Y36(e.sBO))},De.\u0275cmp=e.Xpm({type:De,selectors:[["ghse-room-objectives"]],inputs:{scenarioObjectives:"scenarioObjectives"},features:[e.qOj],decls:4,vars:1,consts:[[1,"tui-form__header"],[1,"grid"],["class","room-objective",3,"present",4,"ngFor","ngForOf"],[1,"room-objective"],[1,"tui-text_body-m"],[3,"ngModel","ngModelChange"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e._uU(1,"Objectives"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,ei,5,4,"div",2),e.qZA()),2&i&&(e.xp6(3),e.Q6J("ngForOf",t.scenarioObjectives))},dependencies:[p.sg,d.JJ,he.K3,he.wU,d.On],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));gap:1.5rem}[_nghost-%COMP%]   .room-objective[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}[_nghost-%COMP%]   .room-objective[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .room-objective[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .room-objective[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .room-objective.present[_ngcontent-%COMP%]{background-color:var(--tui-success-bg)}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],De.prototype,"scenarioObjectives",void 0);var on=u(7721);function ti(n,i){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=i.polymorpheusOutlet;e.xp6(1),e.hij(" ",t," ")}}function ni(n,i){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,ti,2,1,"ng-container",5),e.qZA()),2&n){e.oxw();const t=e.MAs(8);e.xp6(1),e.Q6J("polymorpheusOutlet",t)}}function oi(n,i){1&n&&e.GkF(0)}function ii(n,i){1&n&&e.Hsn(0,2)}const ri=["*",[["input"]],[["tuiContent"]]],si=function(n,i,t,o,r){return[n,i,t,o,r]},ai=["*","input","tuiContent"];let rn=(()=>{class n extends R.F9{constructor(t,o,r,s){super(t,o),this.numberFormat=r,this.isIOS=s,this.unfinishedValue="",this.min=Number.MIN_SAFE_INTEGER,this.max=Number.MAX_SAFE_INTEGER,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.polymorpheusValueContent=z.Mm,this.mask=(a,m,g,k)=>({mask:Gt({allowNegative:a,decimalLimit:g,allowDecimal:"never"!==m,requireDecimal:"always"===m,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:Oo(this.numberFormat)}),pipe:po("always"===m?g:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,k,a,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return this.isIOS&&this.isNegativeAllowed?"text":"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(t){const o=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;o.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(t.preventDefault(),r.selectionStart++)}onValueChange(t){if(function To(n){switch(n){case"":case z.fv:case",":case`${z.fv},`:return!0;default:return!1}}(t))return void this.updateValue(null);if(this.isNativeValueNotFinished)return void(this.unfinishedValue=t);this.unfinishedValue=null;const o=this.absoluteCapInputValue(t);null===o||Number.isNaN(o)||(this.updateValue(o),o!==et(t,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(t){if(W.YZ.includes(t.key)){if("never"===this.decimal)return void t.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(t.preventDefault(),this.setCaretAfterComma())}}onFocused(t){if(this.updateFocused(t),t)return;const o=this.unfinishedValue?et(this.unfinishedValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator):this.nativeNumberValue;if(this.unfinishedValue=null,Number.isNaN(o))return void this.clear();const r=Math.min(this.max,Math.max(this.min,o));this.updateValue(r),this.nativeValue=this.formattedValue}getFormattedValue(t){const r=Math.abs(t)%1>0;let s="always"===this.decimal||r&&"never"!==this.decimal?this.precision:0;const a=r?Jt(t,this.precision):"";return this.focused&&"always"!==this.decimal&&(s=a.length),$t(t,Object.assign(Object.assign({},this.numberFormat),{decimalLimit:s}))}get isNativeValueNotFinished(){const t=this.nativeNumberValue;return t<0?t>this.max:t<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=t,this.nativeFocusableElement.value=t)}get nativeNumberValue(){return et(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(t){const o=et(t,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=o<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),o):Math.min(o,Math.min(this.max,Number.MAX_SAFE_INTEGER));return Number.isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const t=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(t,t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.a5,10),e.Y36(e.sBO),e.Y36(ue.HO),e.Y36(G.FA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-input-number"]],contentQueries:function(t,o,r){if(1&t&&e.Suo(r,ye.Li,5),2&t){let s;e.iGM(s=e.CRH())&&(o.polymorpheusValueContent=s)}},viewQuery:function(t,o){if(1&t&&e.Gf(Q.yc,5),2&t){let r;e.iGM(r=e.CRH())&&(o.primitiveTextfield=r.first)}},hostBindings:function(t,o){1&t&&e.NdJ("keydown.0",function(s){return o.onZero(s)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[e._Bn([(0,G.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:ai,decls:9,vars:27,consts:[["tuiValueAccessor","",1,"t-textfield",3,"pseudoHover","pseudoFocus","pseudoActive","invalid","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","focusedChange","keydown"],["ngProjectAs","tuiContent","class","t-value-content",5,["tuiContent"],4,"ngIf"],[4,"ngIf"],["valueContent",""],["ngProjectAs","tuiContent",5,["tuiContent"],1,"t-value-content"],[4,"polymorpheusOutlet"]],template:function(t,o){1&t&&(e.F$t(ri),e.TgZ(0,"tui-primitive-textfield",0),e.NdJ("valueChange",function(s){return o.onValueChange(s)})("focusedChange",function(s){return o.onFocused(s)})("keydown",function(s){return o.onKeyDown(s)}),e.ALo(1,"tuiMapper"),e.Hsn(2),e.Hsn(3,1,["ngProjectAs","input",5,["input"]]),e.YNc(4,ni,2,1,"div",1),e.qZA(),e.YNc(5,oi,1,0,"ng-container",2),e.ALo(6,"async"),e.YNc(7,ii,1,0,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("pseudoHover",o.pseudoHover)("pseudoFocus",o.computedFocused)("pseudoActive",o.pseudoActive)("invalid",o.computedInvalid)("readOnly",o.readOnly)("disabled",o.computedDisabled)("textMask",e.G7q(1,13,e.qbA(21,si,o.isNegativeAllowed,o.mask,o.decimal,o.precision,o.nativeFocusableElement)))("value",o.computedValue)("prefix",o.prefix)("postfix",o.postfix)("focusable",o.focusable),e.xp6(4),e.Q6J("ngIf",o.polymorpheusValueContent.length),e.xp6(1),e.Q6J("ngIf",e.lcZ(6,19,o.polymorpheusValueContent.changes)))},dependencies:[Q.yc,Q.B1,qt,Xt,p.O5,ye.Li,on.c,p.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"min",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"max",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"decimal",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"precision",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"prefix",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"postfix",void 0),n})(),sn=(()=>{class n extends ft.D1{get value(){return this.host.computedValue}onValueChange(t){this.host.onValueChange(t)}ngDoCheck(){this.host.nativeFocusableElement&&(this.host.nativeFocusableElement.maxLength=this.host.calculatedMaxLength,this.host.nativeFocusableElement.inputMode="decimal")}}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-input-number"]],features:[e._Bn([(0,ue.cp)(n)]),e.qOj]}),n})(),ci=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,en,on.I,Q.KW,we.cn,Kt,ye.wq]]}),n})();function li(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"tui-checkbox-block",6),e.NdJ("ngModelChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.isScenarioGoal=r)}),e._uU(3," Scenario goal "),e.qZA(),e.TgZ(4,"tui-svg",7),e.NdJ("click",function(){const s=e.CHM(t).index,a=e.oxw();return e.KtG(a.remove(s))}),e.qZA()(),e.TgZ(5,"div",8)(6,"tui-input-number",9),e.NdJ("ngModelChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.treasureIndex=r)}),e._uU(7," Index "),e.qZA(),e.TgZ(8,"tui-input",10),e.NdJ("ngModelChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.description=r)}),e._uU(9," Description "),e.qZA()()()}if(2&n){const t=i.$implicit;e.xp6(2),e.Q6J("ngModel",t.isScenarioGoal),e.xp6(4),e.Q6J("min",1)("ngModel",t.treasureIndex)("disabled",t.isScenarioGoal),e.xp6(2),e.Q6J("ngModel",t.description)("disabled",t.isScenarioGoal)}}class je extends R.M${constructor(i,t){super(i,t),this.focused=!1}addTreasure(){this.updateValue([...this.value,{isScenarioGoal:!1,treasureIndex:0,description:""}])}remove(i){this.updateValue([...this.value.slice(0,i),...this.value.slice(i+1)])}getFallbackValue(){return[]}}function di(n,i){if(1&n&&(e.TgZ(0,"button",7),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij("Room ",t.controls.roomNumber.value,"")}}function pi(n,i){if(1&n&&(e.TgZ(0,"form",9)(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"tui-input",12),e._uU(5,"Tiles ref"),e.qZA(),e.TgZ(6,"tui-input",13),e._uU(7,"Map marker"),e.qZA(),e.TgZ(8,"tui-checkbox-block",14),e._uU(9,"Is initial room"),e.qZA(),e.TgZ(10,"tui-input-tag",15),e._uU(11," Connected rooms "),e.qZA()(),e._UZ(12,"ghse-room-monsters",16),e.ALo(13,"async"),e.ALo(14,"async"),e._UZ(15,"ghse-room-objectives",17),e.ALo(16,"async"),e._UZ(17,"ghse-room-treasures"),e.qZA()),2&n){const t=e.oxw().tuiLet,o=e.oxw();e.xp6(2),e.hij("Room ",t.controls.roomNumber.value,""),e.xp6(2),e.Q6J("formControl",t.controls.ref),e.xp6(2),e.Q6J("formControl",t.controls.marker),e.xp6(2),e.Q6J("formControl",t.controls.initial),e.xp6(2),e.Q6J("formControl",t.controls.rooms)("tuiTextfieldLabelOutside",!0),e.xp6(2),e.Q6J("formControl",t.controls.monster)("scenarioMonsters",e.lcZ(13,11,null==o.detailsService?null:o.detailsService.monsters$))("availableMonsters",e.lcZ(14,13,o.monstersService.getAvailableMonsters())),e.xp6(3),e.Q6J("formControl",t.controls.objectives)("scenarioObjectives",e.lcZ(16,15,null==o.detailsService?null:o.detailsService.objectives$))}}function mi(n,i){if(1&n&&(e.ynx(0),e.YNc(1,pi,18,17,"form",8),e.BQk()),2&n){const t=i.tuiLet;e.xp6(1),e.Q6J("ngIf",t)}}je.\u0275fac=function(i){return new(i||je)(e.Y36(d.a5,10),e.Y36(e.sBO))},je.\u0275cmp=e.Xpm({type:je,selectors:[["ghse-room-treasures"]],features:[e.qOj],decls:6,vars:1,consts:[[1,"tui-form__header"],["tuiButton","","appearance","secondary",3,"click"],[1,"grid"],["class","room-treasure",4,"ngFor","ngForOf"],[1,"room-treasure"],[1,"form-row"],["contentAlign","left",1,"is-goal",3,"ngModel","ngModelChange"],["src","tuiIconTrashLarge",1,"delete",3,"click"],["tuiGroup","",1,"form-row"],[1,"index",3,"min","ngModel","disabled","ngModelChange"],[1,"description",3,"ngModel","disabled","ngModelChange"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e._uU(1,"Treasures"),e.qZA(),e.TgZ(2,"button",1),e.NdJ("click",function(){return t.addTreasure()}),e._uU(3,"Add treasure"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,li,10,6,"div",3),e.qZA()),2&i&&(e.xp6(5),e.Q6J("ngForOf",t.value))},dependencies:[p.sg,d.JJ,O.v0,b.P,he.K3,he.wU,Xe,rn,sn,d.On,vt],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{width:60rem;display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));gap:1.5rem}[_nghost-%COMP%]   .room-treasure[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem;margin-top:1rem}[_nghost-%COMP%]   .room-treasure[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .room-treasure[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .room-treasure[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .room-treasure[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}[_nghost-%COMP%]   .room-treasure[_ngcontent-%COMP%]   .is-goal[_ngcontent-%COMP%]{flex:2}[_nghost-%COMP%]   .room-treasure[_ngcontent-%COMP%]   .index[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .room-treasure[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex:4}"]});class ze extends ct{constructor(i,t,o){super(i,t,r=>r.rooms$,(r,s)=>r.updateRooms(s),()=>qe({initial:[!1],roomNumber:[0],ref:[""],marker:[""],rooms:[[]],objectives:[[]],monster:[[]],treasures:[[]]})),this.monstersService=o,this.selectedRoom=0,this.reset()}addNew(){super.addNew(!0);const i=this.form.controls.length;this.form.controls.at(i-1).controls.roomNumber.setValue(i),this.selectedRoom=i-1}}ze.\u0275fac=function(i){return new(i||ze)(e.Y36(f.gz),e.Y36(h.a3),e.Y36(ke))},ze.\u0275cmp=e.Xpm({type:ze,selectors:[["ghse-scenario-rooms-editor"]],features:[e._Bn([h.a3]),e.qOj],decls:12,vars:4,consts:[["tuiTabs","","vertical","left",1,"rooms-list",3,"activeItemIndex","activeItemIndexChange"],["tuiTab","",4,"ngFor","ngForOf"],["tuiButton","","size","s","appearance","secondary","icon","tuiIconPlus",3,"click"],[4,"tuiLet"],[1,"form-row","buttons"],["tuiButton","","type","button",3,"disabled","click"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],["tuiTab",""],["class","room-form",4,"ngIf"],[1,"room-form"],[1,"tui-form__header","tui-form__header_margin-top_none"],["tuiGroup","",1,"properties","form-row"],[1,"ref",3,"formControl"],[1,"marker",3,"formControl"],[1,"initial",3,"formControl"],[1,"rooms",3,"formControl","tuiTextfieldLabelOutside"],[3,"formControl","scenarioMonsters","availableMonsters"],[3,"formControl","scenarioObjectives"]],template:function(i,t){1&i&&(e.TgZ(0,"nav",0),e.NdJ("activeItemIndexChange",function(r){return t.selectedRoom=r}),e.YNc(1,di,2,1,"button",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return t.addNew()}),e._uU(3,"Add room"),e.qZA()(),e.YNc(4,mi,2,1,"ng-container",3),e.TgZ(5,"form")(6,"div",4)(7,"div")(8,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(9,"Save"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return t.reset()}),e._uU(11," Reset "),e.qZA()()()()),2&i&&(e.Q6J("activeItemIndex",t.selectedRoom),e.xp6(1),e.Q6J("ngForOf",t.form.controls),e.xp6(3),e.Q6J("tuiLet",t.form.controls.at(t.selectedRoom)),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[p.sg,p.O5,d._Y,d.JJ,d.JL,d.oH,O.v0,we.xT,he.K3,he.wU,_t.PZ,Xe,d.F,vt,We,Bn,at,Ct.Ls,Ie,De,je,p.Ov],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{flex:1;display:flex}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .rooms-list[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]   .rooms-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{position:relative;right:2rem;margin-top:.5rem}[_nghost-%COMP%]   .room-form[_ngcontent-%COMP%]{margin-left:4rem}[_nghost-%COMP%]   .room-form[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%]   .ref[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .room-form[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .room-form[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]{flex:1.2}[_nghost-%COMP%]   .room-form[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]{flex:1.5}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-left:2rem}"],changeDetection:0});class Je{}Je.\u0275fac=function(i){return new(i||Je)},Je.\u0275cmp=e.Xpm({type:Je,selectors:[["ghse-scenario-rules-editor"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"scenario-rules-editor works!"),e.qZA())}});class $e{}$e.\u0275fac=function(i){return new(i||$e)},$e.\u0275cmp=e.Xpm({type:$e,selectors:[["ghse-scenario-sections-editor"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"scenario-sections-editor works!"),e.qZA())}});class Be{constructor(i){this.serviceFactory=i}canActivateChild(i,t){const o=i.paramMap.get("id")??i.parent?.paramMap.get("id");return!!o&&(""===i.routeConfig?.path||this.serviceFactory.create(o).exists$)}}Be.\u0275fac=function(i){return new(i||Be)(e.LFG(y))},Be.\u0275prov=e.Yz7({token:Be,factory:Be.\u0275fac,providedIn:"root"});class ce{constructor(i){this.factory=i}resolve(i,t){const o=i.paramMap.get("id")??i.parent?.paramMap.get("id")??"new";return this.factory.create(o)}}ce.\u0275fac=function(i){return new(i||ce)(e.LFG(y))},ce.\u0275prov=e.Yz7({token:ce,factory:ce.\u0275fac,providedIn:Oe});var an=u(8421);const{isArray:hi}=Array;var un=u(5403);var Ci=u(9468),bi=u(4482),Oi=u(5698),Ye=u(4258);let cn=(()=>{class n{constructor(t,o){this.tuiFocusableComponent=t,this.elementRef=o}get element(){var t;return(null===(t=this.tuiFocusableComponent)||void 0===t?void 0:t.nativeFocusableElement)||this.elementRef.nativeElement}get isTextFieldElement(){return this.element.matches("input, textarea")}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n}),n})(),Pi=(()=>{class n extends cn{constructor(t,o,r){super(t,o),this.animationFrame$=r}setFocus(){this.isTextFieldElement?function fi(...n){return 1===(n=function _i(n){return 1===n.length&&hi(n[0])?n[0]:n}(n)).length?(0,an.Xf)(n[0]):new I.y(function vi(n){return i=>{let t=[];for(let o=0;t&&!i.closed&&o<n.length;o++)t.push((0,an.Xf)(n[o]).subscribe((0,un.x)(i,r=>{if(t){for(let s=0;s<t.length;s++)s!==o&&t[s].unsubscribe();t=null}i.next(r)})))}}(n))}((0,re.H)(1e3),this.animationFrame$.pipe((0,Ci.p)(z.Yg),(0,C.U)(()=>this.element.closest(".ng-animating")),function Mi(n){return(0,bi.e)((i,t)=>{let o=!1,r=0;i.subscribe((0,un.x)(t,s=>(o||(o=!n(s,r++)))&&t.next(s)))})}(Boolean),(0,Oi.q)(1))).subscribe(()=>this.element.focus()):this.element.focus()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(G.KZ,10),e.Y36(e.SBq),e.Y36(Ve.L1))},n.\u0275dir=e.lG2({type:n,features:[e.qOj]}),n})(),yi=(()=>{class n extends cn{constructor(t,o,r,s,a){super(t,o),this.renderer=r,this.ngZone=s,this.windowRef=a,this.patchCssStyles()}setFocus(){this.isTextFieldElement?this.ngZone.runOutsideAngular(()=>this.iosWebkitAutofocus()):this.element.focus()}iosWebkitAutofocus(){var t;const o=this.makeFakeInput(),r=this.getDurationTimeBeforeFocus();let s=0,a=0;const m=()=>o.focus({preventScroll:!0}),g=()=>{clearTimeout(s),s=this.windowRef.setTimeout(()=>{clearTimeout(a),o.removeEventListener("blur",m),o.removeEventListener("focus",g),a=this.windowRef.setTimeout(()=>{this.element.focus({preventScroll:!1}),o.remove()},r)})};o.addEventListener("blur",m,{once:!0}),o.addEventListener("focus",g),this.insideDialog()?this.windowRef.document.body.appendChild(o):null===(t=this.element.parentElement)||void 0===t||t.appendChild(o),o.focus({preventScroll:!0})}makeFakeInput(){const t=this.renderer.createElement("input"),o=this.element.getBoundingClientRect();return t.style.height=(0,Ye.O)(o.height),t.style.width=(0,Ye.O)(o.width/2),t.style.position="fixed",t.style.opacity="0",t.style.fontSize=(0,Ye.O)(16),t.readOnly=!0,t.style.top=(0,Ye.O)(o.top),t.style.left=(0,Ye.O)(o.left),t}getDurationTimeBeforeFocus(){return parseFloat(this.windowRef.getComputedStyle(this.element).getPropertyValue("--tui-duration"))||0}insideDialog(){return!!this.element.closest("tui-dialog")}patchCssStyles(){const t=this.windowRef.document;for(const o of[t.documentElement,t.body])o.style.setProperty("overflow","auto"),o.style.setProperty("height","100%")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(G.KZ,10),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(Ve.m9))},n.\u0275dir=e.lG2({type:n,features:[e.qOj]}),n})();const ln=new e.OlP("[TUI_AUTOFOCUS_HANDLER]: Autofocusing handler"),wi=[{provide:ln,useFactory:(n,i,t,o,r,s,a)=>a?new yi(n,i,o,r,s):new Pi(n,i,t),deps:[[new e.FiY,new e.PiD,G.KZ],e.SBq,Ve.L1,e.Qsj,e.R0b,Ve.m9,G.FA]}];let ki=(()=>{class n{constructor(t){this.handler=t,this.autoFocus=!0}ngAfterViewInit(){(function gi(n){return null!==n&&typeof n<"u"&&"false"!=`${n}`})(this.autoFocus)&&this.handler.setFocus()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ln))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiAutoFocus",""]],inputs:{autoFocus:["tuiAutoFocus","autoFocus"]},features:[e._Bn(wi)]}),n})(),Ii=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Si=u(9870),Fi=u(3281);const Ai=["*"];let Di=(()=>{class n{constructor(){this.name="tui-radio-group-"+n.index++}}return n.index=0,n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio-group"]],inputs:{name:"name"},ngContentSelectors:Ai,decls:1,vars:0,template:function(t,o){1&t&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"name",void 0),n})();const Bi=["focusableElement"];function Ei(n,i){if(1&n&&e._UZ(0,"div",4),2&n){const t=e.oxw();e.Q6J("@tuiScaleIn",t.animation)}}const dn={size:"m",appearances:{unchecked:"outline",checked:"primary"}},pn=new e.OlP("[TUI_RADIO_OPTIONS]: Default parameters for radio component",{factory:()=>dn});let mn=(()=>{class n extends R.F9{constructor(t,o,r,s,a){super(t,o),this.animationOptions=r,this.options=s,this.radioGroup=a,this.identityMatcher=z.bg,this.name=null,this.size=this.options.size,this.pseudoDisabled=!1,this.animation=Object.assign({value:""},this.animationOptions)}get appearance(){return this.checked?this.options.appearances.checked:this.options.appearances.unchecked}get computedDisabled(){return this.disabled||this.pseudoDisabled}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get checked(){return null===this.value?null===this.item:null!=this.item&&this.identityMatcher(this.value,this.item)}get computedName(){return this.name||this.radioGroupName||this.controlName||""}get isFocusable(){return!this.readOnly&&this.computedFocusable}onChecked(t){t&&this.updateValue(void 0!==this.item?this.item:this.fallbackValue)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}get radioGroupName(){return null===this.radioGroup?null:this.radioGroup.name}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.a5,10),e.Y36(e.sBO),e.Y36(ue.Pw),e.Y36(pn),e.Y36(Di,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio"]],viewQuery:function(t,o){if(1&t&&e.Gf(Bi,5),2&t){let r;e.iGM(r=e.CRH())&&(o.focusableElement=r.first)}},hostVars:3,hostBindings:function(t,o){2&t&&(e.uIk("data-size",o.size),e.ekj("_disabled",o.computedDisabled))},inputs:{item:"item",identityMatcher:"identityMatcher",name:"name",size:"size",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,G.FT)(n),(0,R.wB)(n)]),e.qOj],decls:4,vars:12,consts:[["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],["class","t-mark",4,"ngIf"],["type","radio",1,"t-native",3,"id","disabled","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-mark"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ei,1,1,"div",1),e.TgZ(2,"input",2,3),e.NdJ("tuiFocusedChange",function(s){return o.onFocused(s)})("tuiCheckedChange",function(s){return o.onChecked(s)})("tuiFocusVisibleChange",function(s){return o.onFocusVisible(s)}),e.qZA()()),2&t&&(e.Q6J("appearance",o.appearance)("disabled",o.computedDisabled)("focus",o.computedFocusVisible)("hover",o.pseudoHover)("active",o.pseudoActive)("invalid",o.computedInvalid),e.xp6(1),e.Q6J("ngIf",o.checked),e.xp6(1),e.Q6J("id",o.id)("disabled",o.computedDisabled)("tuiChecked",o.checked)("tuiFocusable",o.isFocusable),e.uIk("name",o.computedName))},dependencies:[Ae.o,p.O5,kt,Ze.t,St,At],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0;border-radius:100%}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-mark[_ngcontent-%COMP%]{position:absolute;background-color:currentColor;border-radius:100%}[data-size=m][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.25rem;width:.5rem;height:.5rem}[data-size=l][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.4375rem;width:.625rem;height:.625rem}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-native[_ngcontent-%COMP%]{cursor:default}"],data:{animation:[Fi.gI]},changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"name",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"pseudoDisabled",void 0),n})(),Ni=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,It,Ze.u,Ft,Dt,Ae.W]]}),n})();const Zi=["*"];let Vi=(()=>{class n extends R.F9{constructor(t,o,r){super(t,o),this.modeDirective=r,this.identityMatcher=z.bg,this.contentAlign="right",this.size="l",this.hideRadio=!1,this.pseudoDisabled=!1}get nativeFocusableElement(){return this.radio?this.radio.nativeFocusableElement:null}get focused(){return!!this.radio&&this.radio.focused}get computedDisabled(){return this.disabled||this.pseudoDisabled}get checked(){return this.value===this.item&&this.hideRadio}get checkboxSize(){return"l"===this.size?"l":"m"}get appearance(){var t;return null!==(t=this.modeDirective)&&void 0!==t&&t.mode?this.checked?"primary":"secondary":this.checked?"whiteblock-active":"whiteblock"}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.a5,10),e.Y36(e.sBO),e.Y36(dt.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio-block"]],viewQuery:function(t,o){if(1&t&&e.Gf(mn,5),2&t){let r;e.iGM(r=e.CRH())&&(o.radio=r.first)}},hostVars:8,hostBindings:function(t,o){2&t&&(e.uIk("data-tui-host-align",o.contentAlign)("data-size",o.size),e.ekj("_hidden_radio",o.hideRadio)("_disabled",o.computedDisabled)("_active",o.checked))},inputs:{item:"item",identityMatcher:"identityMatcher",contentAlign:"contentAlign",size:"size",hideRadio:"hideRadio",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,G.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:Zi,decls:7,vars:19,consts:[[1,"t-wrapper"],["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],[1,"t-content-wrapper"],[1,"t-content"],[1,"t-view",3,"focusable","identityMatcher","item","name","nativeId","readOnly","pseudoDisabled","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","ngModel","ngModelChange","focusedChange","focusVisibleChange"],[1,"t-label"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"tui-radio",4),e.NdJ("ngModelChange",function(s){return o.onModelChange(s)})("focusedChange",function(s){return o.onFocused(s)})("focusVisibleChange",function(s){return o.onFocusVisible(s)}),e.qZA(),e.TgZ(5,"div",5),e.Hsn(6),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("appearance",o.appearance)("disabled",o.computedDisabled)("focus",o.computedFocusVisible)("hover",o.pseudoHover)("active",o.pseudoActive)("invalid",o.computedInvalid),e.xp6(3),e.Q6J("focusable",o.focusable)("identityMatcher",o.identityMatcher)("item",o.item)("name",o.computedName||"")("nativeId",o.nativeId)("readOnly",o.readOnly)("pseudoDisabled",o.computedDisabled)("pseudoInvalid",o.computedInvalid)("pseudoFocus",!1)("pseudoHover",o.pseudoHover)("pseudoActive",o.pseudoActive)("size",o.checkboxSize)("ngModel",o.value))},dependencies:[mn,Ae.o,d.JJ,d.On],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:inline-block;vertical-align:top;border-radius:var(--tui-radius-m)}[data-size=m][_nghost-%COMP%], [data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{position:relative;border-radius:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}.t-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}[data-size=s][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-l)}.t-content[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:inherit}[data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{flex-direction:row-reverse}[data-size=s][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .5rem 0 1rem}[data-size=s]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .75rem}[data-size=m][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .75rem 0 1rem}[data-size=m]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=l]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 2.25rem}.t-view[_ngcontent-%COMP%]{margin-top:.75rem;margin-right:.75rem;align-self:flex-start}[data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:0}[data-size=s][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=m][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.875rem}[data-size=l][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:1rem}[data-size=l][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:1rem;margin-right:0}._hidden_radio[_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{position:absolute;height:1px;width:1px;margin:-1px;border:0;padding:0;overflow:hidden;clip:rect(0,0,0,0);-webkit-clip-path:inset(0);clip-path:inset(0)}.t-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}._hidden_radio[_nghost-%COMP%]   .t-label[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"contentAlign",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideRadio",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"pseudoDisabled",void 0),n})(),Ri=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.u5,Ni,Ae.W]]}),n})();function Li(n,i){1&n&&(e.TgZ(0,"p"),e._uU(1,"You can use mathematical expressions for all fields in this row. Substitution list:"),e.qZA(),e.TgZ(2,"ul")(3,"li"),e._uU(4,"L \u2014 scenario level"),e.qZA(),e.TgZ(5,"li"),e._uU(6,"C \u2014 characters count"),e.qZA(),e.TgZ(7,"li"),e._uU(8,"x - multiply symbol ('*' works as well)"),e.qZA()(),e.TgZ(9,"p"),e._uU(10," You may also use functions such as "),e.TgZ(11,"i"),e._uU(12,"math.floor"),e.qZA(),e._uU(13," and "),e.TgZ(14,"i"),e._uU(15,"math.ceil"),e.qZA(),e._uU(16," using following format as an example: [(2+L)xC/2{%math.floor}] "),e.qZA())}const Hi=function(){return[]};function Ui(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"form",7)(1,"div",8)(2,"tui-input",9),e._uU(3,"Marker "),e._UZ(4,"input",10),e.qZA(),e.TgZ(5,"div",11)(6,"tui-input",12),e._uU(7,"Name"),e.qZA(),e._UZ(8,"tui-error",13),e.ALo(9,"async"),e.ALo(10,"tuiFieldError"),e.qZA(),e.TgZ(11,"tui-svg",14),e.NdJ("click",function(){const s=e.CHM(t).index,a=e.oxw();return e.KtG(a.remove(s))}),e.qZA()(),e.TgZ(12,"div",15)(13,"tui-radio-block",16)(14,"div",17),e._UZ(15,"tui-svg",18),e._uU(16," Objective "),e.qZA()(),e.TgZ(17,"tui-radio-block",16)(18,"div",17),e._UZ(19,"tui-svg",19),e._uU(20," Escort"),e.qZA()()(),e.TgZ(21,"div",20)(22,"div",21)(23,"tui-input",22),e._uU(24,"Health"),e.qZA(),e.TgZ(25,"tui-input",23),e._uU(26,"Count"),e.qZA(),e.TgZ(27,"tui-input-number",24),e._uU(28," Initiative "),e.qZA()(),e.YNc(29,Li,17,0,"ng-template",null,25,e.W1O),e.qZA()()}if(2&n){const t=i.$implicit,o=e.MAs(30);e.Q6J("formGroup",t),e.xp6(2),e.Q6J("formControl",t.controls.marker),e.xp6(4),e.Q6J("formControl",t.controls.name),e.xp6(2),e.Q6J("formControl",t.controls.name)("error",e.lcZ(9,15,e.lcZ(10,17,e.DdM(19,Hi)))),e.xp6(5),e.Q6J("formControl",t.controls.escort)("item",!1),e.xp6(4),e.Q6J("formControl",t.controls.escort)("item",!0),e.xp6(6),e.Q6J("formControl",t.controls.health),e.xp6(2),e.Q6J("formControl",t.controls.count),e.xp6(2),e.Q6J("formControl",t.controls.initiative)("min",1)("max",99)("tuiHintContent",o)}}class Qe extends ct{constructor(i,t){super(i,t,o=>o.objectives$,(o,r)=>o.updateObjectives(r),()=>qe({name:["",d.kI.required],health:[""],escort:[!1],initiative:[null,[d.kI.min(1),d.kI.max(99)]],count:[""],marker:["",d.kI.maxLength(1)]})),this.reset()}}Qe.\u0275fac=function(i){return new(i||Qe)(e.Y36(f.gz),e.Y36(h.a3))},Qe.\u0275cmp=e.Xpm({type:Qe,selectors:[["ghse-scenario-objectives"]],features:[e._Bn([h.a3]),e.qOj],decls:12,vars:2,consts:[[1,"new-buttons"],["tuiButton","","type","button","icon","tuiIconPlusLarge",3,"click"],[1,"objectives"],["class","objective-form",3,"formGroup",4,"ngFor","ngForOf"],[1,"form-row","buttons"],["tuiButton","","type","button",3,"disabled","click"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[1,"objective-form",3,"formGroup"],[1,"form-row","multi-field"],["maxlength","1",1,"marker",3,"formControl"],["tuiTextfield","","maxlength","1"],[1,"row-errors","name"],["tuiAutoFocus","","required","",3,"formControl"],[3,"formControl","error"],["src","tuiIconTrashLarge",1,"delete",3,"click"],["tuiGroup","",1,"form-row"],[3,"formControl","item"],[1,"objective-type"],["src","assets/images/ghs/objective/objective.svg","width","32"],["src","assets/images/ghs/objective/escort.svg"],[1,"form-row"],["tuiGroup","",1,"multi-field","expression-fields"],[1,"health",3,"formControl"],[1,"count",3,"formControl"],[1,"initiative",3,"formControl","min","max","tuiHintContent"],["expressionsDescription",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return t.addNew()}),e._uU(2,"Add objective"),e.qZA()(),e.TgZ(3,"div",2),e.YNc(4,Ui,31,20,"form",3),e.qZA(),e.TgZ(5,"form")(6,"div",4)(7,"div")(8,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(9,"Save"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return t.reset()}),e._uU(11," Reset "),e.qZA()()()()),2&i&&(e.xp6(4),e.Q6J("ngForOf",t.form.controls),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[p.sg,d._Y,d.JJ,d.JL,d.Q7,d.nD,d.oH,d.sg,O.v0,b.P,lt.v,he.K3,he.wU,Q.MB,Si.bZ,Xe,Vi,rn,sn,ki,d.F,p.Ov,mt.Ag],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]{width:42rem;display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-items:center;justify-content:space-between}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:2rem}[_nghost-%COMP%]   .objectives[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(30rem,1fr));gap:1.5rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{margin-right:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .health[_ngcontent-%COMP%]{flex-grow:2}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .initiative[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   tui-tooltip[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expressions-description[_ngcontent-%COMP%]{margin-top:.5rem;color:var(--tui-text-02)}[_nghost-%COMP%]   .objective-type[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .objective-type[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:2rem;height:2rem;margin-right:1rem}"],changeDetection:0});const ji=[{path:"",pathMatch:"full",component:K},{path:":id",component:Re,canActivateChild:[Be],children:[{path:"",pathMatch:"full",component:Le,resolve:{detailsService:ce}},{path:"properties",component:He,resolve:{detailsService:ce}},{path:"objectives",component:Qe,resolve:{detailsService:ce}},{path:"monsters",component:Ue,resolve:{detailsService:ce}},{path:"rooms",component:ze,resolve:{detailsService:ce}},{path:"rules",component:Je,resolve:{detailsService:ce}},{path:"sections",component:$e,resolve:{detailsService:ce}}]}];class Ee{}Ee.\u0275fac=function(i){return new(i||Ee)},Ee.\u0275mod=e.oAB({type:Ee}),Ee.\u0275inj=e.cJS({imports:[f.Bz.forChild(ji),f.Bz]});var zi=u(4466);let Ji=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,b.E]]}),n})();class Ne{}Ne.\u0275fac=function(i){return new(i||Ne)},Ne.\u0275mod=e.oAB({type:Ne}),Ne.\u0275inj=e.cJS({imports:[p.ez,Ee,Oe,zi.m,Hn,ve,_t.cB,qn,Ri,ci,Ii,ao,Lo,Uo,d.u5,Ao,No,Nn,Ji,Ct.WD]})},2243:function(bt){bt.exports=function(ie){function u(f){if(p[f])return p[f].exports;var e=p[f]={exports:{},id:f,loaded:!1};return ie[f].call(e.exports,e,e.exports,u),e.loaded=!0,e.exports}var p={};return u.m=ie,u.c=p,u.p="",u(0)}([function(ie,u,p){"use strict";function f(N){return N&&N.__esModule?N:{default:N}}Object.defineProperty(u,"__esModule",{value:!0});var e=p(3);Object.defineProperty(u,"conformToMask",{enumerable:!0,get:function(){return f(e).default}});var w=p(2);Object.defineProperty(u,"adjustCaretPosition",{enumerable:!0,get:function(){return f(w).default}});var C=p(5);Object.defineProperty(u,"createTextMaskInputElement",{enumerable:!0,get:function(){return f(C).default}})},function(ie,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.placeholderChar="_",u.strFunction="function"},function(ie,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=function p(w){var C=w.previousConformedValue,N=void 0===C?e:C,Z=w.previousPlaceholder,T=void 0===Z?e:Z,x=w.currentCaretPosition,O=void 0===x?0:x,v=w.conformedValue,b=w.rawValue,c=w.placeholderChar,I=w.placeholder,X=w.indexesOfPipedChars,A=void 0===X?f:X,be=w.caretTrapIndexes,ee=void 0===be?f:be;if(0===O||!b.length)return 0;var S=N.length,h=I.length,l=v.length,F=b.length-S,M=F>0;if(F>1&&!M&&0!==S)return O;var D=0,le=void 0,V=void 0;if(!M||N!==v&&v!==I){var te=v.toLowerCase(),P=b.toLowerCase().substr(0,O).split(e).filter(function(y){return-1!==te.indexOf(y)});V=P[P.length-1];var de=T.substr(0,P.length).split(e).filter(function(y){return y!==c}).length,H=I.substr(0,P.length).split(e).filter(function(y){return y!==c}).length;!M&&(H!==de||void 0!==T[P.length-1]&&void 0!==I[P.length-2]&&T[P.length-1]!==c&&T[P.length-1]!==I[P.length-1]&&T[P.length-1]===I[P.length-2])&&de>0&&I.indexOf(V)>-1&&void 0!==b[O]&&(le=!0,V=b[O]);for(var Ce=A.map(function(y){return te[y]}).filter(function(y){return y===V}).length,ge=P.filter(function(y){return y===V}).length,Me=I.substr(0,I.indexOf(c)).split(e).filter(function(y,Pe){return y===V&&b[Pe]!==y}).length+ge+Ce+(le?1:0),K=0,j=0;j<l&&(D=j+1,te[j]===V&&K++,!(K>=Me));j++);}else D=O-F;if(M){for(var U=D,E=D;E<=h;E++)if(I[E]===c&&(U=E),I[E]===c||-1!==ee.indexOf(E)||E===h)return U}else if(le){for(var ne=D-1;ne>=0;ne--)if(v[ne]===V||-1!==ee.indexOf(ne)||0===ne)return ne}else for(var oe=D;oe>=0;oe--)if(I[oe-1]===c||-1!==ee.indexOf(oe)||0===oe)return oe};var f=[],e=""},function(ie,u,p){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(T){return typeof T}:function(T){return T&&"function"==typeof Symbol&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};u.default=function f(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(0,w.isArray)(x)){if((typeof x>"u"?"undefined":e(x))!==C.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");x=x(T,O),x=(0,w.processCaretTraps)(x).maskWithoutCaretTraps}var v=O.guide,b=void 0===v||v,c=O.previousConformedValue,I=void 0===c?Z:c,X=O.placeholderChar,A=void 0===X?C.placeholderChar:X,be=O.placeholder,ee=void 0===be?(0,w.convertMaskToPlaceholder)(x,A):be,S=O.keepCharPositions,h=!1===b&&void 0!==I,l=T.length,F=I.length,M=ee.length,fe=x.length,Y=l-F,re=Y>0,D=O.currentCaretPosition+(re?-Y:0),le=D+Math.abs(Y);if(!0===S&&!re){for(var V=Z,te=D;te<le;te++)ee[te]===A&&(V+=A);T=T.slice(0,D)+V+T.slice(D,l)}for(var L=T.split(Z).map(function(ne,oe){return{char:ne,isNew:oe>=D&&oe<le}}),B=l-1;B>=0;B--){var P=L[B].char;P!==A&&P===ee[B>=D&&F===fe?B-Y:B]&&L.splice(B,1)}var H=Z,se=!1;e:for(var ae=0;ae<M;ae++){var ve=ee[ae];if(ve===A){if(L.length>0)for(;L.length>0;){var Ce=L.shift(),ge=Ce.char,xe=Ce.isNew;if(ge===A&&!0!==h){H+=A;continue e}if(x[ae].test(ge)){if(!0===S&&!1!==xe&&I!==Z&&!1!==b&&re){for(var Me=L.length,K=null,j=0;j<Me;j++){var $=L[j];if($.char!==A&&!1===$.isNew)break;if($.char===A){K=j;break}}null!==K?(H+=ge,L.splice(K,1)):ae--}else H+=ge;continue e}se=!0}!1===h&&(H+=ee.substr(ae,M));break}H+=ve}if(h&&!1===re){for(var U=null,E=0;E<H.length;E++)ee[E]===A&&(U=E);H=null!==U?H.substr(0,U+1):Z}return{conformedValue:H,meta:{someCharsRejected:se}}};var w=p(4),C=p(1),N=[],Z=""},function(ie,u,p){"use strict";function e(v){return Array.isArray&&Array.isArray(v)||v instanceof Array}Object.defineProperty(u,"__esModule",{value:!0}),u.convertMaskToPlaceholder=function f(){var v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.placeholderChar;if(!e(v))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==v.indexOf(b))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(b)+"\n\nThe mask that was received is: "+JSON.stringify(v));return v.map(function(c){return c instanceof RegExp?b:c}).join("")},u.isArray=e,u.isString=function w(v){return"string"==typeof v||v instanceof String},u.isNumber=function C(v){return"number"==typeof v&&void 0===v.length&&!isNaN(v)},u.isNil=function N(v){return typeof v>"u"||null===v},u.processCaretTraps=function Z(v){for(var b=[],c=void 0;-1!==(c=v.indexOf(O));)b.push(c),v.splice(c,1);return{maskWithoutCaretTraps:v,indexes:b}};var T=p(1),x=[],O="[]"},function(ie,u,p){"use strict";function f(_){return _&&_.__esModule?_:{default:_}}function w(_,S){document.activeElement===_&&(be?ee(function(){return _.setSelectionRange(S,S,X)},0):_.setSelectionRange(S,S,X))}function C(_){if((0,b.isString)(_))return _;if((0,b.isNumber)(_))return String(_);if(null==_)return I;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(_))}Object.defineProperty(u,"__esModule",{value:!0});var N=Object.assign||function(_){for(var S=1;S<arguments.length;S++){var h=arguments[S];for(var l in h)Object.prototype.hasOwnProperty.call(h,l)&&(_[l]=h[l])}return _},Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};u.default=function e(_){var S={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:S,update:function(h){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,F=l.inputElement,M=l.mask,fe=l.guide,Y=l.pipe,re=l.placeholderChar,D=void 0===re?c.placeholderChar:re,le=l.keepCharPositions,V=void 0!==le&&le,te=l.showMask,L=void 0!==te&&te;if(typeof h>"u"&&(h=F.value),h!==S.previousConformedValue){(typeof M>"u"?"undefined":Z(M))===A&&void 0!==M.pipe&&void 0!==M.mask&&(Y=M.pipe,M=M.mask);var B=void 0,P=void 0;if(M instanceof Array&&(B=(0,b.convertMaskToPlaceholder)(M,D)),!1!==M){var de=C(h),H=F.selectionEnd,se=S.previousConformedValue,ae=S.previousPlaceholder,ve=void 0;if((typeof M>"u"?"undefined":Z(M))===c.strFunction){if(!1===(P=M(de,{currentCaretPosition:H,previousConformedValue:se,placeholderChar:D})))return;var Ce=(0,b.processCaretTraps)(P);ve=Ce.indexes,B=(0,b.convertMaskToPlaceholder)(P=Ce.maskWithoutCaretTraps,D)}else P=M;var Me={previousConformedValue:se,guide:fe,placeholderChar:D,pipe:Y,placeholder:B,currentCaretPosition:H,keepCharPositions:V},j=(0,v.default)(de,P,Me).conformedValue,$=(typeof Y>"u"?"undefined":Z(Y))===c.strFunction,U={};$&&(!1===(U=Y(j,N({rawValue:de},Me)))?U={value:se,rejected:!0}:(0,b.isString)(U)&&(U={value:U}));var E=$?U.value:j,ne=(0,x.default)({previousConformedValue:se,previousPlaceholder:ae,conformedValue:E,placeholder:B,rawValue:de,currentCaretPosition:H,placeholderChar:D,indexesOfPipedChars:U.indexesOfPipedChars,caretTrapIndexes:ve}),Pe=E===B&&0===ne?L?B:I:E;S.previousConformedValue=Pe,S.previousPlaceholder=B,F.value!==Pe&&(F.value=Pe,w(F,ne))}}}}};var x=f(p(2)),v=f(p(3)),b=p(4),c=p(1),I="",X="none",A="object",be=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),ee=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout}])}}]);