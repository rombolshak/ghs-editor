(self.webpackChunkghs_editor=self.webpackChunkghs_editor||[]).push([[520],{4520:(Xe,ee,a)=>{"use strict";a.r(ee),a.d(ee,{ScenariosModule:()=>ke});var d=a(6895),_=a(5142),e=a(4650),P=a(1135),k=a(4004),z=a(3900),N=a(4128),M=a(1856);class O{constructor(o){this.storage=o,this._model=new P.X([]),this.scenarios$=this._model.asObservable(),this.maxOrder$=this._model.pipe((0,k.U)(t=>Math.max(...t.map(i=>i.order),0))),this.reload()}reload(){this.storage.scenarios.getAllIds().pipe((0,z.w)(o=>(0,N.D)(o.map(t=>this.storage.scenarios.withId(t).get())))).subscribe(o=>{this._model.next(o.filter(t=>null!==t))})}setScenariosOrder(o){const t=Array.from(this._model.value);o.forEach((i,r)=>{const s={...this._model.value.at(r),order:i};this.storage.scenarios.withId(s.id).set(s).subscribe(),t.at(r).order=i}),this._model.next(t)}remove(o){this.storage.scenarios.withId(o).remove().subscribe();const t=Array.from(this._model.value),i=t.findIndex(r=>r.id===o);t.splice(i,1),this._model.next(t)}}O.\u0275fac=function(o){return new(o||O)(e.LFG(M.O))},O.\u0275prov=e.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"});var x=a(9367),f=a(7819),b=a(8276),c=a(655),S=a(9751);const re=new e.OlP("MutationObserver config");let m=(()=>{class n extends S.y{constructor({nativeElement:t},i){super(r=>{const s=new MutationObserver(u=>{r.next(u)});return s.observe(t,i),()=>{s.disconnect()}})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.SBq),e.LFG(re))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var v=a(7776),l=a(8923),V=a(5753),C=a(3679),ue=a(3054),U=a(7579),te=a(5963),A=a(9841),se=a(7331),j=a(9300),q=a(1884),L=a(8675),I=a(8372);const y=["*"];function ae(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("transitionend.self",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onTransitionEnd())}),e.Hsn(1),e.qZA()}if(2&n){const t=o.ngIf;e.Udp("top",t.top,"px")("left",t.left,"px")("width",t.width,"px")("height",t.height,"px")}}let E=(()=>{class n{constructor(t){this.elementRef=t,this.element$=new U.x,this.debounce=0,this.orderChange=this.element$.pipe((0,se.D)(()=>(0,te.H)(this.debounce)),(0,j.h)(this.filter.bind(this)),(0,k.U)(i=>this.reorder(i))),this.element=null,this.order$=new P.X(new Map)}set order(t){this.order$.next(t)}get order(){return this.order$.value}rearrange(t){this.element$.next(t)}filter(t){return!!this.element&&!!t&&this.element!==t}reorder(t){var i,r;const s=Array.from(this.elementRef.nativeElement.children),u=s.indexOf(this.element||t),p=s.indexOf(t),h=this.order.size?new Map(this.order):new Map(s.map((G,pe)=>[pe,pe])),D=null!==(i=h.get(u))&&void 0!==i?i:u,K=null!==(r=h.get(p))&&void 0!==r?r:p;return h.set(u,K),h.set(p,D),this.order$.next(h),h}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tiles"]],hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("pointerleave.silent",function(){return i.rearrange()}),2&t&&e.ekj("_dragged",i.element)},inputs:{debounce:"debounce",order:"order"},outputs:{orderChange:"orderChange"},features:[e._Bn([v.a3,v.tl,m,{provide:re,useValue:{childList:!0}}])],ngContentSelectors:y,decls:1,vars:0,template:function(t,i){1&t&&(e.F$t(),e.Hsn(0))},styles:["tui-tiles{position:relative;z-index:0;display:grid;grid-auto-flow:dense;justify-items:stretch}tui-tiles._dragged tui-tile>.t-wrapper{pointer-events:none}tui-tiles._dragged tui-tile:not(._dragged)>.t-wrapper{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}tui-tiles:not(._dragged) tui-tile._dragged>.t-wrapper{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}tui-tile>.t-wrapper{position:absolute;z-index:0;border-radius:inherit}tui-tile._dragged>.t-wrapper{z-index:1;transition:none}\n"],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"debounce",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"order",null),n})(),ne=(()=>{class n{constructor(t,i,r,s,u){this.ngZone=t,this.elementRef=i,this.tiles=r,this.resize$=s,this.mutation$=u,this.width=1,this.height=1,this.dragged=!1,this.offset$=new P.X([0,0]),this.position$=(0,A.a)([this.offset$.pipe((0,q.x)(V.Hh)),this.resize$.pipe((0,L.O)(null)),this.mutation$.pipe((0,L.O)(null)),this.tiles.order$.pipe((0,I.b)(0))]).pipe((0,k.U)(([[p,h]])=>({top:h||this.element.offsetTop,left:p||this.element.offsetLeft,width:this.element.clientWidth,height:this.element.clientHeight})),(0,C.Ao)(this.ngZone))}get column(){return`span var(--tui-width, ${this.width})`}get row(){return`span var(--tui-height, ${this.height})`}get element(){return this.elementRef.nativeElement}onEnter(){this.tiles.rearrange(this.element)}onDrag(t){this.dragged=this.dragged||t,this.tiles.element=t?this.element:null}onTransitionEnd(){this.dragged=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(E),e.Y36(v.tl),e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tile"]],hostVars:6,hostBindings:function(t,i){1&t&&e.NdJ("pointerenter",function(){return i.onEnter()}),2&t&&(e.Udp("grid-column",i.column)("grid-row",i.row),e.ekj("_dragged",i.dragged))},inputs:{width:"width",height:"height"},ngContentSelectors:y,decls:2,vars:3,consts:[["class","t-wrapper",3,"top","left","width","height","transitionend.self",4,"ngIf"],[1,"t-wrapper",3,"transitionend.self"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,ae,2,8,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.position$))},dependencies:[d.O5,d.Ov],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"width",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"height",void 0),n})(),ie=(()=>{class n{constructor(t){this.tile=t,this.x=NaN,this.y=NaN}onStart(t){const i=(0,ue.mA)(t),{x:r,y:s,pointerId:u}=t;(0,ue.ve)(i)&&i.releasePointerCapture(u),this.onPointer(r,s)}onPointer(t=NaN,i=NaN){this.x=t-this.tile.element.offsetLeft,this.y=i-this.tile.element.offsetTop,this.tile.onDrag(!Number.isNaN(t)),this.tile.offset$.next([0,0])}onMove(t,i){Number.isNaN(this.x)||this.tile.offset$.next([t-this.x,i-this.y])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ne))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiTileHandle",""]],hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("pointerdown.silent.prevent",function(s){return i.onStart(s)})("pointerup.silent",function(){return i.onPointer()},!1,e.evT)("pointermove.silent",function(s){return i.onMove(s.x,s.y)},!1,e.evT),2&t&&e.Udp("touch-action","none")}}),n})(),he=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez]]}),n})();function ge(n,o){if(1&n&&(e.TgZ(0,"button",7),e._uU(1," Add scenario "),e.qZA()),2&n){const t=e.oxw();e.Q6J("routerLink",t.newScenarioId)}}function ce(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"h3",9),e._uU(2,"No scenarios yet"),e.qZA(),e.TgZ(3,"p",10),e._uU(4,"Add a scenario using button below or by importing existig json in the main menu"),e.qZA(),e.TgZ(5,"button",11),e._uU(6,"Add scenario"),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("routerLink",t.newScenarioId)}}function be(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tui-tile",15)(1,"div",16),e._uU(2),e.qZA(),e._UZ(3,"tui-svg",17),e.TgZ(4,"tui-svg",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.removeScenario(s))}),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,r=e.oxw(2);e.Udp("order",r.scenariosOrder.get(i)),e.xp6(1),e.Q6J("routerLink",t.id),e.xp6(1),e.AsE(" #",t.generalInfo.index,": ",t.generalInfo.name," ")}}function ve(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"tui-tiles",13),e.NdJ("orderChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.reorder(r))}),e.YNc(2,be,5,5,"tui-tile",14),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("debounce",500)("order",t.scenariosOrder),e.xp6(1),e.Q6J("ngForOf",t.scenarios)}}class ${constructor(o){this.scenariosService=o,this.newScenarioId=crypto.randomUUID(),this.isLoading=!0,this.scenarios=[]}ngOnInit(){this.scenariosService.scenarios$.subscribe(o=>{this.scenarios=o,this.scenariosOrder=new Map(o.map((t,i)=>[i,t.order])),this.isLoading=!1})}reorder(o){this.scenariosService.setScenariosOrder(o)}removeScenario(o){this.scenariosService.remove(o.id)}}$.\u0275fac=function(o){return new(o||$)(e.Y36(O))},$.\u0275cmp=e.Xpm({type:$,selectors:[["ghse-scenarios-list"]],decls:8,vars:7,consts:[[1,"page-header"],[1,"tui-text_h2"],["tuiButton","","size","s","icon","tuiIconPlusLarge",3,"routerLink",4,"ngIf"],[1,"page-content"],["size","xxl",3,"showLoader","overlay"],["class","no-items",4,"ngIf"],["class","items",4,"ngIf"],["tuiButton","","size","s","icon","tuiIconPlusLarge",3,"routerLink"],[1,"no-items"],[1,"tui-text_h3"],[1,"tui-text_body-l"],["tuiButton","","size","xl","icon","tuiIconPlusLarge",3,"routerLink"],[1,"items"],[1,"tiles",3,"debounce","order","orderChange"],["class","tile",3,"order",4,"ngFor","ngForOf"],[1,"tile"],[1,"scenario",3,"routerLink"],["tuiTileHandle","","src","tuiIconDragLarge",1,"handle"],["src","tuiIconTrashLarge",1,"remove",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Scenarios"),e.qZA(),e.YNc(3,ge,2,1,"button",2),e.qZA(),e.TgZ(4,"div",3)(5,"tui-loader",4),e.YNc(6,ce,7,1,"div",5),e.YNc(7,ve,3,3,"div",6),e.qZA()()),2&o&&(e.ekj("with-button",0!==t.scenarios.length),e.xp6(3),e.Q6J("ngIf",0!==t.scenarios.length),e.xp6(2),e.Q6J("showLoader",t.isLoading)("overlay",!0),e.xp6(1),e.Q6J("ngIf",0===t.scenarios.length),e.xp6(1),e.Q6J("ngIf",0!==t.scenarios.length&&t.scenariosOrder))},dependencies:[d.sg,d.O5,_.rH,x.v0,f.kM,b.P,E,ne,ie],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 3rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   a[tuiButton][_ngcontent-%COMP%], [_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   button[tuiButton][_ngcontent-%COMP%]{margin-left:2rem;margin-top:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .no-items[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .tiles[_ngcontent-%COMP%]{gap:1rem;grid:auto-flow minmax(6rem,auto) / repeat(auto-fill,minmax(20rem,1fr))}[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]:before{content:"Drop here";display:flex;height:100%;justify-content:center;align-items:center;box-sizing:border-box;color:var(--tui-base-04);border-radius:var(--tui-radius-l);border:2px dashed var(--tui-base-03)}.scenario[_ngcontent-%COMP%]{transition-property:box-shadow;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;height:100%;padding:1rem;background:var(--tui-base-01);box-sizing:border-box;border-radius:var(--tui-radius-l);border:1px solid var(--tui-base-03);overflow:hidden}.scenario[_ngcontent-%COMP%]:hover{box-shadow:0 .75rem 2.25rem #0003}tui-tile._dragged[_ngcontent-%COMP%]   .scenario[_ngcontent-%COMP%]{box-shadow:0 .75rem 2.25rem #0003}.handle[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;right:.75rem;top:1rem;background:var(--tui-base-01);color:var(--tui-base-05);opacity:0;cursor:move}.handle[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}tui-tiles[_ngcontent-%COMP%]:not(._dragged)   tui-tile[_ngcontent-%COMP%]:hover   .handle[_ngcontent-%COMP%], tui-tile._dragged[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{opacity:1}.remove[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;right:.75rem;bottom:1rem;background:var(--tui-base-01);color:var(--tui-base-05);opacity:0;cursor:pointer}.remove[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}tui-tiles[_ngcontent-%COMP%]:not(._dragged)   tui-tile[_ngcontent-%COMP%]:hover   .remove[_ngcontent-%COMP%]{opacity:1}']});var B=a(2722);class R{static getBusinessId(o){return 0!==o.generalInfo.group.length?`${o.generalInfo.index}-${o.generalInfo.group}`:o.generalInfo.index}static getFullName(o){return`#${R.getBusinessId(o)}: ${o.generalInfo.name}`}}var H=a(5888),Z=a(8505);class X{constructor(o,t,i,r){this.listService=o,this.storageService=t,this.alertService=i,this.scenarioId=r,this._dataSaved$=this.alertService.open("Data saved",{status:"success"}),this._maxOrder=0,this._model=new P.X(H.zI),this.reload(),this.businessId$=this._model.asObservable().pipe((0,k.U)(s=>R.getBusinessId(s))),this.exists$=this._model.asObservable().pipe((0,k.U)(s=>""!==s.generalInfo.index)),this.listService.maxOrder$.subscribe(s=>this._maxOrder=s),this.fullModel$=this._model.asObservable(),this.generalInfo$=this._model.asObservable().pipe((0,k.U)(s=>s.generalInfo)),this.properties$=this._model.asObservable().pipe((0,k.U)(s=>s.properties)),this.objectives$=this._model.asObservable().pipe((0,k.U)(s=>s.objectives))}updateGeneralInfo(o){const t={...this._model.value,generalInfo:o};""===this._model.value.id&&(t.id=this.scenarioId),0===this._model.value.order&&(t.order=this._maxOrder+1),this.notifyUpdated(t)}updateProperties(o){this.notifyUpdated({...this._model.value,properties:o})}updateObjectives(o){this.notifyUpdated({...this._model.value,objectives:o})}reload(){this.storageService.scenarios.withId(this.scenarioId).get().subscribe(o=>{null!==o&&this._model.next(o)})}notifyUpdated(o){this.storageService.scenarios.withId(this.scenarioId).set(o).pipe((0,Z.b)(()=>this._model.next(o)),(0,Z.b)(()=>this.listService.reload()),(0,z.w)(()=>this._dataSaved$)).subscribe()}}var W=a(343);class T{constructor(o,t,i){this.listService=o,this.storageService=t,this.alertService=i,this.services=new Map}create(o){return this.services.has(o)||this.services.set(o,new X(this.listService,this.storageService,this.alertService,o)),this.services.get(o)}}T.\u0275fac=function(o){return new(o||T)(e.LFG(O),e.LFG(M.O),e.LFG(W.J9))},T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"});var Ce=a(9791),J=a(8535),Me=a(9255),We=a(8790),wt=a(4671),Ft=a(4086);function At(n,o){1&n&&e.GkF(0)}const Ke=["*"],Dt=["tuiStep",""];function It(n,o){if(1&n&&e._UZ(0,"tui-svg",4),2&n){const t=e.oxw();e.Q6J("src",t.icon)}}const Zt={block:"nearest",inline:"center"},Nt={block:"center",inline:"nearest"};let et=(()=>{class n{constructor(){this.steps=J.Mm,this.orientation="horizontal",this.activeItemIndexChange=new e.vpe,this.activeItemIndex=0}set activeIndex(t){this.activeItemIndex=t,this.scrollIntoView(t)}get changes$(){return(0,C.xo)(this.steps).pipe((0,Ft.g)(0))}onHorizontal(t,i){"horizontal"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,i))}onVertical(t,i){"vertical"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,i))}indexOf(t){return(0,V.gD)(this.steps).findIndex(({nativeElement:i})=>i===t)}isActive(t){return t===this.activeItemIndex}activate(t){this.activeItemIndex!==t&&(this.activeItemIndex=t,this.activeItemIndexChange.emit(t),this.scrollIntoView(t))}getNativeElements(t){return t.map(({nativeElement:i})=>i)}moveFocus(t,i){if(!(0,ue.ve)(t))return;const r=this.getNativeElements(this.steps),s=r.findIndex(u=>u===t);(0,Me.VR)(s,r,i)}scrollIntoView(t){var i;null===(i=this.getNativeElements(this.steps)[t])||void 0===i||i.scrollIntoView("vertical"===this.orientation?Nt:Zt)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-stepper"],["nav","tuiStepper",""]],contentQueries:function(t,i,r){if(1&t&&e.Suo(r,tt,4,e.SBq),2&t){let s;e.iGM(s=e.CRH())&&(i.steps=s)}},hostVars:1,hostBindings:function(t,i){1&t&&e.NdJ("keydown.arrowRight",function(s){return i.onHorizontal(s,1)})("keydown.arrowLeft",function(s){return i.onHorizontal(s,-1)})("keydown.arrowDown",function(s){return i.onVertical(s,1)})("keydown.arrowUp",function(s){return i.onVertical(s,-1)}),2&t&&e.uIk("data-orientation",i.orientation)},inputs:{orientation:"orientation",activeIndex:["activeItemIndex","activeIndex"]},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:Ke,decls:3,vars:3,consts:[[4,"ngIf"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,At,1,0,"ng-container",0),e.ALo(1,"async"),e.Hsn(2)),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.changes$))},dependencies:[d.O5,d.Ov],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:smooth;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}@media screen and (prefers-reduced-motion: reduce){[_nghost-%COMP%]{scroll-behavior:auto}}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"orientation",void 0),(0,c.gn)([l.UM],n.prototype,"changes$",null),(0,c.gn)([l.UM],n.prototype,"getNativeElements",null),n})(),tt=(()=>{class n{constructor(t,i,r,s){this.stepper=r,this.elementRef=s,this.stepState="normal",this.icon="",this.focusVisible=!1,i.pipe((0,j.h)(wt.y)).subscribe(()=>{this.activate()}),t.subscribe(u=>{this.focusVisible=u})}get isActive(){return this.stepper.isActive(this.index)}get isVertical(){return"vertical"===this.stepper.orientation}get tabIndex(){return this.isActive?0:-1}get index(){return this.stepper.indexOf(this.elementRef.nativeElement)}activate(){this.stepper.activate(this.index)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.ku),e.Y36(We.Ok),e.Y36(et),e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["button","tuiStep",""],["a","tuiStep","",3,"routerLink",""],["a","tuiStep","","routerLink","","routerLinkActive",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(t,i){1&t&&e.NdJ("click",function(){return i.activate()}),2&t&&(e.Ikx("tabIndex",i.tabIndex),e.uIk("data-state",i.stepState),e.ekj("_focus-visible",i.focusVisible)("_active",i.isActive)("_vertical",i.isVertical))},inputs:{stepState:"stepState",icon:"icon"},features:[e._Bn([v.a3,We.Ok,v.ku])],attrs:Dt,ngContentSelectors:Ke,decls:5,vars:1,consts:[["class","t-marker t-marker_custom",3,"src",4,"ngIf"],["src","tuiIconWarningLarge",1,"t-marker","t-marker_error"],["src","tuiIconCheckLarge",1,"t-marker","t-marker_pass"],[1,"t-marker","t-marker_index"],[1,"t-marker","t-marker_custom",3,"src"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,It,1,1,"tui-svg",0),e._UZ(1,"tui-svg",1)(2,"tui-svg",2)(3,"div",3),e.Hsn(4)),2&t&&e.Q6J("ngIf",i.icon)},dependencies:[b.P,d.O5],styles:['[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:1.5rem;outline:none;cursor:pointer;text-decoration:none;counter-increment:steps}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:"";position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.t-marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .t-marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.t-marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not([data-state="normal"]):not(._active)   .t-marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not(._active)   .t-marker_custom[_ngcontent-%COMP%] ~ .t-marker_index[_ngcontent-%COMP%]{display:none}.t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}[_nghost-%COMP%]:not([data-state="error"])   .t-marker_error[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_error[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="pass"])   .t-marker_pass[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_pass[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="normal"])   .t-marker_custom[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .t-marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}'],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"stepState",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"icon",void 0),n})(),Et=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,b.E]]}),n})();class Se{constructor(o,t,i,r){this.detailsServiceFactory=o,this.route=t,this.router=i,this.destroy$=r}ngOnInit(){const o=this.route.snapshot.paramMap.get("id");this.detailsService=this.detailsServiceFactory.create(o),this.detailsService.fullModel$?.pipe((0,B.R)(this.destroy$)).subscribe(t=>this.model=t)}get areStepsDisabled(){return""===this.model?.generalInfo.index}get header(){return this.model&&""!==this.model.generalInfo.name?R.getFullName(this.model):"New scenario"}get generalState(){return""!==this.model?.generalInfo.index?"pass":"normal"}get propertiesState(){return(this.model?.properties.requires.length??0)>0&&(this.model?.properties.requires[0].length??0)>0||(this.model?.properties.unlocks.length??0)>0||(this.model?.properties.blocks.length??0)>0?"pass":"normal"}get objectivesState(){return(this.model?.objectives.length??0)>0?"pass":"normal"}}Se.\u0275fac=function(o){return new(o||Se)(e.Y36(T),e.Y36(_.gz),e.Y36(_.F0),e.Y36(v.a3))},Se.\u0275cmp=e.Xpm({type:Se,selectors:[["ghse-scenario-detail"]],features:[e._Bn([v.a3])],decls:23,vars:10,consts:[[1,"page-header","with-link"],["tuiLink","","routerLink",".."],["src","tuiIconChevronLeft"],[1,"tui-text_h2"],[1,"page-content"],["tuiStep","","routerLink",".","routerLinkActive","",3,"stepState"],["tuiStep","","routerLink","properties","routerLinkActive","",3,"stepState","disabled"],["tuiStep","","routerLink","objectives","routerLinkActive","",3,"stepState","disabled"],["tuiStep","","routerLink","monsters","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","rooms","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","rules","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","sections","routerLinkActive","",3,"disabled"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"tui-svg",2),e._uU(3," Scenarios"),e.qZA(),e.TgZ(4,"h2",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"tui-stepper")(8,"button",5),e._uU(9,"General"),e.qZA(),e.TgZ(10,"button",6),e._uU(11," Properties "),e.qZA(),e.TgZ(12,"button",7),e._uU(13," Objectives "),e.qZA(),e.TgZ(14,"button",8),e._uU(15,"Monsters"),e.qZA(),e.TgZ(16,"button",9),e._uU(17,"Rooms"),e.qZA(),e.TgZ(18,"button",10),e._uU(19,"Special rules"),e.qZA(),e.TgZ(20,"button",11),e._uU(21,"Sections"),e.qZA()(),e._UZ(22,"router-outlet"),e.qZA()),2&o&&(e.xp6(5),e.Oqu(t.header),e.xp6(3),e.Q6J("stepState",t.generalState),e.xp6(2),e.Q6J("stepState",t.propertiesState)("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("stepState",t.objectivesState)("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled))},dependencies:[_.lC,_.rH,_.Od,Ce.V,b.P,et,tt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 3rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   a[tuiButton][_ngcontent-%COMP%], [_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   button[tuiButton][_ngcontent-%COMP%]{margin-left:2rem;margin-top:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   tui-stepper[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1rem;background:var(--tui-base-02);border:var(--tui-base-03) 1px solid;border-radius:var(--tui-radius-m);width:max-content}"],changeDetection:0});var g=a(4006);function nt(n){return new g.cw(Object.entries(n).reduce((o,[t,[i,r]])=>({...o,[t]:new g.NI(i,{validators:r,nonNullable:null!==i})}),{}))}class Ue{constructor(o,t,i,r,s){this.destroy$=t,this.details$=i,this.updateDetails=r,this.form=s,this.currentScenarioId="",o.data.pipe((0,B.R)(this.destroy$)).subscribe(({detailsService:u})=>{this.detailsService=u,this.detailsService&&(this.detailsService.businessId$.subscribe(p=>this.currentScenarioId=p),i(this.detailsService).subscribe(p=>{this.savedModel=p}))})}save(){if(this.detailsService){const o=this.form.getRawValue();this.updateDetails(this.detailsService,o),this.form.markAsPristine()}}reset(){this.savedModel?(this.form.patchValue(this.savedModel),this.form.markAsPristine()):this.form.reset()}}class zt extends Ue{constructor(o,t,i,r,s){super(o,t,i,r,new g.Oe([])),this.instanceFormCreator=s}addNew(){this.form.insert(0,this.instanceFormCreator()),this.form.markAsDirty()}remove(o){this.form.removeAt(o),this.form.markAsDirty()}reset(){if(this.savedModel){this.form.clear();for(const o of this.savedModel){const t=this.instanceFormCreator();t.patchValue(o),this.form.push(t)}this.form.markAsPristine()}else this.form.reset()}}var Je=a(4601),ye=a(117),ze=a(6679),le=a(1054),de=a(7414),it=a(2302);let ot=(()=>{class n{constructor(t,i){this.element=t,this.renderer=i,this.tuiCheckedChange=new e.vpe,this.updateProperty("checked",!1)}set tuiChecked(t){this.updateProperty("checked",t||!1),this.updateProperty("indeterminate",null===t)}onChange({checked:t}){this.updateProperty("indeterminate",!1),this.tuiCheckedChange.emit(t)}updateProperty(t,i){this.renderer.setProperty(this.element.nativeElement,t,i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj))},n.\u0275dir=e.lG2({type:n,selectors:[["input","tuiChecked",""],["input","tuiCheckedChange",""]],hostBindings:function(t,i){1&t&&e.NdJ("change",function(s){return i.onChange(s.target)})},inputs:{tuiChecked:"tuiChecked"},outputs:{tuiCheckedChange:"tuiCheckedChange"}}),n})(),rt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Le=a(9982),Lt=a(6451),Ht=a(5684);let st=(()=>{class n{constructor({nativeElement:t},i){this.tuiFocusedChange=(0,Lt.T)((0,C.mL)(t,"focusin"),(0,C.mL)(t,"focusout")).pipe((0,k.U)(()=>(0,Me.V8)(t)),(0,L.O)(!1),(0,q.x)(),(0,Ht.T)(1),(0,C.Yr)(i))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.R0b))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiFocusedChange",""]],outputs:{tuiFocusedChange:"tuiFocusedChange"}}),n})(),at=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),ut=(()=>{class n{constructor(t){this.tuiFocusVisibleChange=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.ku))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiFocusVisibleChange",""]],outputs:{tuiFocusVisibleChange:"tuiFocusVisibleChange"},features:[e._Bn([v.a3,v.ku])]}),n})(),ct=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Ye=a(2973);const Vt=["focusableElement"];let lt=(()=>{class n extends le.F9{constructor(t,i,r){super(t,r),this.options=i,this.size=this.options.size}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,Me.V8)(this.nativeFocusableElement)}get computedFocusable(){return this.interactive&&this.focusable}onChecked(t){this.updateValue(t)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.a5,10),e.Y36(Ye.Y2),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox"]],viewQuery:function(t,i){if(1&t&&e.Gf(Vt,5),2&t){let r;e.iGM(r=e.CRH())&&(i.focusableElement=r.first)}},hostVars:1,hostBindings:function(t,i){2&t&&e.uIk("data-size",i.size)},inputs:{size:"size"},features:[e._Bn([(0,de.FT)(n),(0,le.wB)(n)]),e.qOj],decls:3,vars:11,consts:[[3,"size","disabled","focused","hovered","pressed","invalid","value"],["type","checkbox","automation-id","tui-checkbox__native",1,"t-native",3,"disabled","id","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""]],template:function(t,i){1&t&&(e.TgZ(0,"tui-primitive-checkbox",0)(1,"input",1,2),e.NdJ("tuiFocusedChange",function(s){return i.onFocused(s)})("tuiCheckedChange",function(s){return i.onChecked(s)})("tuiFocusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA()()),2&t&&(e.Q6J("size",i.size)("disabled",i.disabled)("focused",i.computedFocusVisible)("hovered",i.pseudoHover)("pressed",i.pseudoActive)("invalid",i.computedInvalid)("value",i.value),e.xp6(1),e.Q6J("disabled",i.disabled)("id",i.id)("tuiChecked",i.value)("tuiFocusable",i.computedFocusable))},dependencies:[Ye.r3,ot,Le.t,st,ut],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),jt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,rt,Le.u,at,ct,Ye.fB]]}),n})();const Bt=["*"];let Rt=(()=>{class n extends le.F9{constructor(t,i,r){super(t,i),this.modeDirective=r,this.size="m"}get focused(){return(0,Me.V8)(this.nativeFocusableElement)}get nativeFocusableElement(){return this.checkbox?this.checkbox.nativeFocusableElement:null}get hostMode(){return this.modeDirective?this.modeDirective.mode:null}onFocused(t){this.updateFocused(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.a5,10),e.Y36(e.sBO),e.Y36(it.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox-labeled"]],viewQuery:function(t,i){if(1&t&&e.Gf(lt,5),2&t){let r;e.iGM(r=e.CRH())&&(i.checkbox=r.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.uIk("data-size",i.size)("data-mode",i.hostMode)},inputs:{size:"size"},features:[e._Bn([(0,de.FT)(n),(0,le.wB)(n)]),e.qOj],ngContentSelectors:Bt,decls:4,vars:12,consts:[[1,"t-wrapper"],[3,"disabled","readOnly","focusable","nativeId","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","ngModel","ngModelChange","focusedChange"],[1,"t-content"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"tui-checkbox",1),e.NdJ("ngModelChange",function(s){return i.onModelChange(s)})("focusedChange",function(s){return i.onFocused(s)}),e.qZA(),e.TgZ(2,"div",2),e.Hsn(3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("disabled",i.computedDisabled)("readOnly",i.readOnly)("focusable",i.focusable)("nativeId",i.nativeId)("pseudoInvalid",i.computedInvalid)("pseudoFocus",i.pseudoFocus)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("size",i.size)("ngModel",i.value),e.xp6(1),e.ekj("t-content_disabled",i.computedDisabled))},dependencies:[lt,g.JJ,g.On],styles:["[_nghost-%COMP%]{position:relative;display:block;line-height:0}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{display:inline-flex;max-width:100%;cursor:pointer}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}[data-mode=onDark][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}.t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-s);line-height:1rem;word-wrap:break-word;min-width:0}.t-content_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-m);margin-left:.75rem}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),Ut=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,g.u5,jt]]}),n})();var Ge=a(5120);const $e=function(){return[]};class we extends Ue{constructor(o,t){super(o,t,r=>r.generalInfo$,(r,s)=>r.updateGeneralInfo(s),nt({index:["",g.kI.required],group:[""],name:["",g.kI.required],initial:[!1]})),this.reset()}}we.\u0275fac=function(o){return new(o||we)(e.Y36(_.gz),e.Y36(v.a3))},we.\u0275cmp=e.Xpm({type:we,selectors:[["ghse-scenario-general-editor"]],features:[e._Bn([{provide:v.a3}]),e.qOj],decls:32,vars:27,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],["data-automation","edition.prefix",1,"prefixName",3,"formControl"],[1,"tui-required"],[3,"formControl","error"],[1,"form-row","multi-field"],[1,"scenario-index"],[1,"scenario-group"],["tuiTextfield","","placeholder","solo"],["size","l",3,"formControl"],[1,"form-row","buttons"],["tuiButton","","type","submit",3,"disabled"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(1,"div",1)(2,"tui-input",2),e._uU(3," Scenario name "),e._UZ(4,"span",3),e.qZA(),e._UZ(5,"tui-error",4),e.ALo(6,"async"),e.ALo(7,"tuiFieldError"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"tui-input",2),e._uU(11," Scenario # "),e._UZ(12,"span",3),e.qZA(),e._UZ(13,"tui-error",4),e.ALo(14,"async"),e.ALo(15,"tuiFieldError"),e.qZA(),e.TgZ(16,"div",7)(17,"tui-input",2),e._uU(18," Scenario group "),e._UZ(19,"input",8),e.qZA(),e._UZ(20,"tui-error",4),e.ALo(21,"async"),e.ALo(22,"tuiFieldError"),e.qZA()(),e.TgZ(23,"div",1)(24,"tui-checkbox-labeled",9),e._uU(25," It is initial scenario of a campaign "),e.qZA()(),e.TgZ(26,"div",10)(27,"div")(28,"button",11),e._uU(29,"Save"),e.qZA(),e.TgZ(30,"button",12),e.NdJ("click",function(){return t.reset()}),e._uU(31," Reset "),e.qZA()()()()),2&o&&(e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("formControl",t.form.controls.name),e.xp6(3),e.Q6J("formControl",t.form.controls.name)("error",e.lcZ(6,12,e.lcZ(7,14,e.DdM(24,$e)))),e.xp6(5),e.Q6J("formControl",t.form.controls.index),e.xp6(3),e.Q6J("formControl",t.form.controls.index)("error",e.lcZ(14,16,e.lcZ(15,18,e.DdM(25,$e)))),e.xp6(4),e.Q6J("formControl",t.form.controls.group),e.xp6(3),e.Q6J("formControl",t.form.controls.group)("error",e.lcZ(21,20,e.lcZ(22,22,e.DdM(26,$e)))),e.xp6(4),e.Q6J("formControl",t.form.controls.initial),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[g._Y,g.JJ,g.JL,g.oH,g.sg,x.v0,Je.v,ze.K3,ze.wU,ye.MB,Rt,d.Ov,Ge.Ag],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin-top:1.5rem;width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .scenario-group[_ngcontent-%COMP%]{width:auto;flex-shrink:0}[_nghost-%COMP%]   .scenario-index[_ngcontent-%COMP%]{flex:1;margin-right:1.5rem}"]});var Jt=a(9646),dt=a(9886),Yt=a(3861),Gt=a(9343),$t=a(6772),pt=a(3935);function Qt(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",15),e.ALo(1,"async")),2&n){const t=e.oxw(2);e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}function qt(n,o){1&n&&(e.TgZ(0,"span",16),e._uU(1,"-- OR --"),e.qZA())}function Xt(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tui-input-tag",13),e.NdJ("searchChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSearchChange(r))}),e._uU(2," Scenario requires "),e.YNc(3,Qt,2,4,"tui-data-list-wrapper",9),e.qZA(),e.YNc(4,qt,2,0,"span",14),e.BQk()}if(2&n){const t=o.$implicit,i=o.index;e.xp6(1),e.Q6J("formControl",t)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("ngIf",0===i)}}function Wt(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",17),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}function Kt(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",15),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}const ht=function(){return[]};class Fe extends Ue{constructor(o,t,i,r){super(o,t,u=>u.properties$,(u,p)=>u.updateProperties(p),i.group({blocks:[[]],unlocks:[[]],requires:i.array([i.control([]),i.control([])])})),this.scenariosListService=r,this.scenarios=null,this.scenariosIds=null,this.scenarioName=({$implicit:u})=>this.scenarios?.get(u),this.search$=new U.x,this.reset()}ngOnInit(){this.scenariosListService.scenarios$.pipe((0,B.R)(this.destroy$)).subscribe(o=>{this.scenarios=new Map(o.filter(t=>R.getBusinessId(t)!==this.currentScenarioId).map(t=>[R.getBusinessId(t),R.getFullName(t)])),this.scenariosIds=Array.from(this.scenarios.keys()),this.filteredItems$=this.search$.pipe((0,z.w)(t=>(0,Jt.of)(Array.from(this.scenarios?.entries()??[]).filter(i=>i[1].toLowerCase().includes(t.toLowerCase())).map(i=>i[0]))),(0,L.O)(this.scenariosIds))})}onSearchChange(o){this.search$.next(o)}}Fe.\u0275fac=function(o){return new(o||Fe)(e.Y36(_.gz),e.Y36(v.a3),e.Y36(g.j3),e.Y36(O))},Fe.\u0275cmp=e.Xpm({type:Fe,selectors:[["ghse-scenario-properties-editor"]],features:[e._Bn([{provide:v.a3}]),e.qOj],decls:24,vars:21,consts:[[3,"formGroup","ngSubmit"],["tuiLabel","Scenario requirements:",1,"form-row"],[1,"multi-field"],[4,"ngFor","ngForOf"],["tuiLabel","Scenario unlocks:",1,"form-row"],[3,"formControl","tuiTextfieldLabelOutside","searchChange"],["emptyContent","Be sure to create said scenario later.",3,"itemContent","items",4,"tuiDataList"],[3,"formControl","error"],["tuiLabel","Scenario blocks:",1,"form-row"],["emptyContent","No such scenario currently exists. You can insert it now but be sure to create said scenario later.",3,"itemContent","items",4,"tuiDataList"],[1,"form-row","buttons"],["tuiButton","","type","submit",3,"disabled"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[1,"requirement",3,"formControl","tuiTextfieldLabelOutside","searchChange"],["class","separator",4,"ngIf"],["emptyContent","No such scenario currently exists. You can insert it now but be sure to create said scenario later.",3,"itemContent","items"],[1,"separator"],["emptyContent","Be sure to create said scenario later.",3,"itemContent","items"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(1,"label",1)(2,"div",2),e.YNc(3,Xt,5,3,"ng-container",3),e.qZA()(),e.TgZ(4,"label",4)(5,"tui-input-tag",5),e.NdJ("searchChange",function(r){return t.onSearchChange(r)}),e._uU(6," Scenario unlocks "),e.YNc(7,Wt,2,4,"tui-data-list-wrapper",6),e.qZA(),e._UZ(8,"tui-error",7),e.ALo(9,"async"),e.ALo(10,"tuiFieldError"),e.qZA(),e.TgZ(11,"label",8)(12,"tui-input-tag",5),e.NdJ("searchChange",function(r){return t.onSearchChange(r)}),e._uU(13," Scenario blocks "),e.YNc(14,Kt,2,4,"tui-data-list-wrapper",9),e.qZA(),e._UZ(15,"tui-error",7),e.ALo(16,"async"),e.ALo(17,"tuiFieldError"),e.qZA(),e.TgZ(18,"div",10)(19,"div")(20,"button",11),e._uU(21,"Save"),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(){return t.reset()}),e._uU(23," Reset "),e.qZA()()()()),2&o&&(e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("ngForOf",t.form.controls.requires.controls),e.xp6(2),e.Q6J("formControl",t.form.controls.unlocks)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("formControl",t.form.controls.unlocks)("error",e.lcZ(9,11,e.lcZ(10,13,e.DdM(19,ht)))),e.xp6(4),e.Q6J("formControl",t.form.controls.blocks)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("formControl",t.form.controls.blocks)("error",e.lcZ(16,15,e.lcZ(17,17,e.DdM(20,ht)))),e.xp6(5),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[d.sg,d.O5,g._Y,g.JJ,g.JL,g.oH,g.sg,x.v0,dt.xT,Yt.gX,Gt.A,Je.v,$t.eC,pt.PZ,d.Ov,Ge.Ag],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin-top:1.5rem;width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .requirement[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 2rem}"],changeDetection:0});class Ae{}Ae.\u0275fac=function(o){return new(o||Ae)},Ae.\u0275cmp=e.Xpm({type:Ae,selectors:[["ghse-scenario-monsters-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-monsters-editor works!"),e.qZA())}});class De{}De.\u0275fac=function(o){return new(o||De)},De.\u0275cmp=e.Xpm({type:De,selectors:[["ghse-scenario-rooms-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-rooms-editor works!"),e.qZA())}});class Ie{}Ie.\u0275fac=function(o){return new(o||Ie)},Ie.\u0275cmp=e.Xpm({type:Ie,selectors:[["ghse-scenario-rules-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-rules-editor works!"),e.qZA())}});class Ze{}Ze.\u0275fac=function(o){return new(o||Ze)},Ze.\u0275cmp=e.Xpm({type:Ze,selectors:[["ghse-scenario-sections-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-sections-editor works!"),e.qZA())}});class Te{constructor(o){this.serviceFactory=o}canActivateChild(o,t){const i=o.paramMap.get("id")??o.parent?.paramMap.get("id");return!!i&&(""===o.routeConfig?.path||this.serviceFactory.create(i).exists$)}}Te.\u0275fac=function(o){return new(o||Te)(e.LFG(T))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"});class Oe{}Oe.\u0275fac=function(o){return new(o||Oe)},Oe.\u0275mod=e.oAB({type:Oe}),Oe.\u0275inj=e.cJS({imports:[d.ez]});class oe{constructor(o){this.factory=o}resolve(o,t){const i=o.paramMap.get("id")??o.parent?.paramMap.get("id")??"new";return this.factory.create(i)}}oe.\u0275fac=function(o){return new(o||oe)(e.LFG(T))},oe.\u0275prov=e.Yz7({token:oe,factory:oe.\u0275fac,providedIn:Oe});var He=a(9892),gt=a(8421);const{isArray:tn}=Array;var mt=a(5403);var sn=a(9468),an=a(4482),cn=a(5698),Ne=a(4258);let ft=(()=>{class n{constructor(t,i){this.tuiFocusableComponent=t,this.elementRef=i}get element(){var t;return(null===(t=this.tuiFocusableComponent)||void 0===t?void 0:t.nativeFocusableElement)||this.elementRef.nativeElement}get isTextFieldElement(){return this.element.matches("input, textarea")}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n}),n})(),pn=(()=>{class n extends ft{constructor(t,i,r){super(t,i),this.animationFrame$=r}setFocus(){this.isTextFieldElement?function on(...n){return 1===(n=function nn(n){return 1===n.length&&tn(n[0])?n[0]:n}(n)).length?(0,gt.Xf)(n[0]):new S.y(function rn(n){return o=>{let t=[];for(let i=0;t&&!o.closed&&i<n.length;i++)t.push((0,gt.Xf)(n[i]).subscribe((0,mt.x)(o,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}o.next(r)})))}}(n))}((0,te.H)(1e3),this.animationFrame$.pipe((0,sn.p)(J.Yg),(0,k.U)(()=>this.element.closest(".ng-animating")),function un(n){return(0,an.e)((o,t)=>{let i=!1,r=0;o.subscribe((0,mt.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(Boolean),(0,cn.q)(1))).subscribe(()=>this.element.focus()):this.element.focus()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(de.KZ,10),e.Y36(e.SBq),e.Y36(He.L1))},n.\u0275dir=e.lG2({type:n,features:[e.qOj]}),n})(),hn=(()=>{class n extends ft{constructor(t,i,r,s,u){super(t,i),this.renderer=r,this.ngZone=s,this.windowRef=u,this.patchCssStyles()}setFocus(){this.isTextFieldElement?this.ngZone.runOutsideAngular(()=>this.iosWebkitAutofocus()):this.element.focus()}iosWebkitAutofocus(){var t;const i=this.makeFakeInput(),r=this.getDurationTimeBeforeFocus();let s=0,u=0;const p=()=>i.focus({preventScroll:!0}),h=()=>{clearTimeout(s),s=this.windowRef.setTimeout(()=>{clearTimeout(u),i.removeEventListener("blur",p),i.removeEventListener("focus",h),u=this.windowRef.setTimeout(()=>{this.element.focus({preventScroll:!1}),i.remove()},r)})};i.addEventListener("blur",p,{once:!0}),i.addEventListener("focus",h),this.insideDialog()?this.windowRef.document.body.appendChild(i):null===(t=this.element.parentElement)||void 0===t||t.appendChild(i),i.focus({preventScroll:!0})}makeFakeInput(){const t=this.renderer.createElement("input"),i=this.element.getBoundingClientRect();return t.style.height=(0,Ne.O)(i.height),t.style.width=(0,Ne.O)(i.width/2),t.style.position="fixed",t.style.opacity="0",t.style.fontSize=(0,Ne.O)(16),t.readOnly=!0,t.style.top=(0,Ne.O)(i.top),t.style.left=(0,Ne.O)(i.left),t}getDurationTimeBeforeFocus(){return parseFloat(this.windowRef.getComputedStyle(this.element).getPropertyValue("--tui-duration"))||0}insideDialog(){return!!this.element.closest("tui-dialog")}patchCssStyles(){const t=this.windowRef.document;for(const i of[t.documentElement,t.body])i.style.setProperty("overflow","auto"),i.style.setProperty("height","100%")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(de.KZ,10),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(He.m9))},n.\u0275dir=e.lG2({type:n,features:[e.qOj]}),n})();const vt=new e.OlP("[TUI_AUTOFOCUS_HANDLER]: Autofocusing handler"),gn=[{provide:vt,useFactory:(n,o,t,i,r,s,u)=>u?new hn(n,o,i,r,s):new pn(n,o,t),deps:[[new e.FiY,new e.PiD,de.KZ],e.SBq,He.L1,e.Qsj,e.R0b,He.m9,de.FA]}];let mn=(()=>{class n{constructor(t){this.handler=t,this.autoFocus=!0}ngAfterViewInit(){(function en(n){return null!==n&&typeof n<"u"&&"false"!=`${n}`})(this.autoFocus)&&this.handler.setFocus()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(vt))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiAutoFocus",""]],inputs:{autoFocus:["tuiAutoFocus","autoFocus"]},features:[e._Bn(gn)]}),n})(),fn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var vn=a(3675);let _n=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,i){},styles:[".tui-group{position:relative;z-index:0;display:flex}.tui-group>*{flex:1 1 0;min-width:0}.tui-group>*:nth-child(n){border-radius:0}.tui-group>*:not(:last-child){margin-right:.125rem}.tui-group_collapsed>*{z-index:1}.tui-group_collapsed>*:not(:last-child){margin-right:-1px}.tui-group_collapsed>*._readonly,.tui-group_collapsed>*._disabled,.tui-group_collapsed>*._readonly:hover,.tui-group_collapsed>*._disabled:hover{z-index:0}.tui-group_collapsed>*:hover,.tui-group_collapsed>*._hovered,.tui-group_collapsed>*._pressed{z-index:3}.tui-group_collapsed>*._invalid{z-index:2}.tui-group_collapsed>*._invalid:hover,.tui-group_collapsed>*._invalid._hovered,.tui-group_collapsed>*._invalid._pressed{z-index:4}.tui-group_collapsed>*._hosted_dropdown_focused,.tui-group_collapsed>*._focus-visible,.tui-group_collapsed>*._focused.ng-touched,.tui-group_collapsed>*._focused.ng-untouched{z-index:5}.tui-group_collapsed>*._active,.tui-group_collapsed>*[data-appearance=whiteblock-active]{z-index:6}.tui-group_collapsed>*._focus-visible._focused,.tui-group_collapsed>*._focus-visible._active,.tui-group_collapsed>*._focus-visible[data-appearance=whiteblock-active]{z-index:7}.tui-group_orientation_vertical{display:inline-flex;flex-direction:column}.tui-group_orientation_vertical>*{min-height:auto;flex:0 0 auto}.tui-group_orientation_vertical>*:not(:last-child){margin-right:0;margin-bottom:.125rem}.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}.tui-group_rounded.tui-group_orientation_horizontal>*:first-child{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal>*:last-child{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-bottom-left-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:last-child{border-top-right-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical>*:first-child{border-top-left-radius:var(--tui-radius-m);border-top-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical>*:last-child{border-bottom-left-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:last-child{border-bottom-left-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-m)}}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_vertical{width:100%}.tui-group_adaptive.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical>*:not(:last-child){margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_horizontal{flex-direction:column;width:100%}.tui-group_adaptive.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal>*:not(:last-child){margin-right:0;margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}.tui-group__auto-width-item{min-width:auto;flex:0 0 auto}.tui-group .tui-group__inherit-item{border-radius:inherit}\n"],encapsulation:2}),n})(),bn=(()=>{class n{constructor(t){this.orientation="horizontal",this.adaptive=!1,this.collapsed=!1,this.rounded=!0,this.size="m",t.addComponent(_n)}get orientationHorizontal(){return"horizontal"===this.orientation}get orientationVertical(){return"vertical"===this.orientation}get sizeLarge(){return"l"===this.size}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.gH))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiGroup","",5,"ng-container"]],hostAttrs:["role","group",1,"tui-group"],hostVars:12,hostBindings:function(t,i){2&t&&e.ekj("tui-group_adaptive",i.adaptive)("tui-group_collapsed",i.collapsed)("tui-group_rounded",i.rounded)("tui-group_orientation_horizontal",i.orientationHorizontal)("tui-group_orientation_vertical",i.orientationVertical)("tui-group_radius_large",i.sizeLarge)},inputs:{orientation:"orientation",adaptive:"adaptive",collapsed:"collapsed",rounded:"rounded",size:"size"}}),(0,c.gn)([(0,l.TH)()],n.prototype,"orientation",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"adaptive",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"collapsed",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"rounded",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),Cn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez]]}),n})();var Ve=a(7846),Qe=a(1308),Mn=a(3281);const On=["*"];let yn=(()=>{class n{constructor(){this.name="tui-radio-group-"+n.index++}}return n.index=0,n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio-group"]],inputs:{name:"name"},ngContentSelectors:On,decls:1,vars:0,template:function(t,i){1&t&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"name",void 0),n})();const Tn=["focusableElement"];function Pn(n,o){if(1&n&&e._UZ(0,"div",4),2&n){const t=e.oxw();e.Q6J("@tuiScaleIn",t.animation)}}const _t={size:"m",appearances:{unchecked:"outline",checked:"primary"}},bt=new e.OlP("[TUI_RADIO_OPTIONS]: Default parameters for radio component",{factory:()=>_t});let Ct=(()=>{class n extends le.F9{constructor(t,i,r,s,u){super(t,i),this.animationOptions=r,this.options=s,this.radioGroup=u,this.identityMatcher=J.bg,this.name=null,this.size=this.options.size,this.pseudoDisabled=!1,this.animation=Object.assign({value:""},this.animationOptions)}get appearance(){return this.checked?this.options.appearances.checked:this.options.appearances.unchecked}get computedDisabled(){return this.disabled||this.pseudoDisabled}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,Me.V8)(this.nativeFocusableElement)}get checked(){return null===this.value?null===this.item:null!=this.item&&this.identityMatcher(this.value,this.item)}get computedName(){return this.name||this.radioGroupName||this.controlName||""}get isFocusable(){return!this.readOnly&&this.computedFocusable}onChecked(t){t&&this.updateValue(void 0!==this.item?this.item:this.fallbackValue)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}get radioGroupName(){return null===this.radioGroup?null:this.radioGroup.name}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.a5,10),e.Y36(e.sBO),e.Y36(Qe.Pw),e.Y36(bt),e.Y36(yn,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio"]],viewQuery:function(t,i){if(1&t&&e.Gf(Tn,5),2&t){let r;e.iGM(r=e.CRH())&&(i.focusableElement=r.first)}},hostVars:3,hostBindings:function(t,i){2&t&&(e.uIk("data-size",i.size),e.ekj("_disabled",i.computedDisabled))},inputs:{item:"item",identityMatcher:"identityMatcher",name:"name",size:"size",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,de.FT)(n),(0,le.wB)(n)]),e.qOj],decls:4,vars:12,consts:[["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],["class","t-mark",4,"ngIf"],["type","radio",1,"t-native",3,"id","disabled","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-mark"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Pn,1,1,"div",1),e.TgZ(2,"input",2,3),e.NdJ("tuiFocusedChange",function(s){return i.onFocused(s)})("tuiCheckedChange",function(s){return i.onChecked(s)})("tuiFocusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA()()),2&t&&(e.Q6J("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("active",i.pseudoActive)("invalid",i.computedInvalid),e.xp6(1),e.Q6J("ngIf",i.checked),e.xp6(1),e.Q6J("id",i.id)("disabled",i.computedDisabled)("tuiChecked",i.checked)("tuiFocusable",i.isFocusable),e.uIk("name",i.computedName))},dependencies:[Ve.o,d.O5,ot,Le.t,st,ut],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0;border-radius:100%}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-mark[_ngcontent-%COMP%]{position:absolute;background-color:currentColor;border-radius:100%}[data-size=m][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.25rem;width:.5rem;height:.5rem}[data-size=l][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.4375rem;width:.625rem;height:.625rem}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-native[_ngcontent-%COMP%]{cursor:default}"],data:{animation:[Mn.gI]},changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"name",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"pseudoDisabled",void 0),n})(),xn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,rt,Le.u,at,ct,Ve.W]]}),n})();const kn=["*"];let Sn=(()=>{class n extends le.F9{constructor(t,i,r){super(t,i),this.modeDirective=r,this.identityMatcher=J.bg,this.contentAlign="right",this.size="l",this.hideRadio=!1,this.pseudoDisabled=!1}get nativeFocusableElement(){return this.radio?this.radio.nativeFocusableElement:null}get focused(){return!!this.radio&&this.radio.focused}get computedDisabled(){return this.disabled||this.pseudoDisabled}get checked(){return this.value===this.item&&this.hideRadio}get checkboxSize(){return"l"===this.size?"l":"m"}get appearance(){var t;return null!==(t=this.modeDirective)&&void 0!==t&&t.mode?this.checked?"primary":"secondary":this.checked?"whiteblock-active":"whiteblock"}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.a5,10),e.Y36(e.sBO),e.Y36(it.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio-block"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ct,5),2&t){let r;e.iGM(r=e.CRH())&&(i.radio=r.first)}},hostVars:8,hostBindings:function(t,i){2&t&&(e.uIk("data-tui-host-align",i.contentAlign)("data-size",i.size),e.ekj("_hidden_radio",i.hideRadio)("_disabled",i.computedDisabled)("_active",i.checked))},inputs:{item:"item",identityMatcher:"identityMatcher",contentAlign:"contentAlign",size:"size",hideRadio:"hideRadio",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,de.FT)(n),(0,le.wB)(n)]),e.qOj],ngContentSelectors:kn,decls:7,vars:19,consts:[[1,"t-wrapper"],["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],[1,"t-content-wrapper"],[1,"t-content"],[1,"t-view",3,"focusable","identityMatcher","item","name","nativeId","readOnly","pseudoDisabled","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","ngModel","ngModelChange","focusedChange","focusVisibleChange"],[1,"t-label"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"tui-radio",4),e.NdJ("ngModelChange",function(s){return i.onModelChange(s)})("focusedChange",function(s){return i.onFocused(s)})("focusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA(),e.TgZ(5,"div",5),e.Hsn(6),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("active",i.pseudoActive)("invalid",i.computedInvalid),e.xp6(3),e.Q6J("focusable",i.focusable)("identityMatcher",i.identityMatcher)("item",i.item)("name",i.computedName||"")("nativeId",i.nativeId)("readOnly",i.readOnly)("pseudoDisabled",i.computedDisabled)("pseudoInvalid",i.computedInvalid)("pseudoFocus",!1)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("size",i.checkboxSize)("ngModel",i.value))},dependencies:[Ct,Ve.o,g.JJ,g.On],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:inline-block;vertical-align:top;border-radius:var(--tui-radius-m)}[data-size=m][_nghost-%COMP%], [data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{position:relative;border-radius:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}.t-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}[data-size=s][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-l)}.t-content[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:inherit}[data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{flex-direction:row-reverse}[data-size=s][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .5rem 0 1rem}[data-size=s]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .75rem}[data-size=m][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .75rem 0 1rem}[data-size=m]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=l]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 2.25rem}.t-view[_ngcontent-%COMP%]{margin-top:.75rem;margin-right:.75rem;align-self:flex-start}[data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:0}[data-size=s][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=m][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.875rem}[data-size=l][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:1rem}[data-size=l][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:1rem;margin-right:0}._hidden_radio[_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{position:absolute;height:1px;width:1px;margin:-1px;border:0;padding:0;overflow:hidden;clip:rect(0,0,0,0);-webkit-clip-path:inset(0);clip-path:inset(0)}.t-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}._hidden_radio[_nghost-%COMP%]   .t-label[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"contentAlign",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideRadio",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"pseudoDisabled",void 0),n})(),wn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.u5,xn,Ve.W]]}),n})();var Mt=a(7721),Pe=a(8865),Fn=a(6422),Y=a(5825);function Ot(n,o){const[,t=""]=function An(n){const o=String(n),[t,i]=o.split("e-");let r=o;if(i){const[,s]=t.split("."),u=Number(i)+(s?.length||0);r=n.toFixed(u)}return r}(n).split(".");return(0,V.dt)(o)?t.slice(0,Math.max(0,o)):t}function yt(n){return"."===n?",":"."}function In(n=0,o=",",t=J.f$,i,r,s=!1){Pe.z.assert(Number.isInteger(n)),Pe.z.assert(n>=0);let u=-1;const p=!!i&&(0,Fn.Ex)(i)||s;return i&&p&&i.addEventListener("beforeinput",()=>{u=i.selectionStart||0}),(h,D)=>{if(!h&&D.rawValue===J.fv&&r)return J.fv;if(i&&p&&(0,Me.V8)(i)){const me=function Nn(n="",o,t,i=","){const r=new RegExp(`${i}.+`),s=n.replace(r,""),u=o.replace(r,"");if(Math.abs(s.length-u.length)>2)return o.length;if(n.length===o.length)return n.indexOf(i)<=t?function En(n,o){for(let t=0;t<o.length;t++)if(n[t]!==o[t])return"0"===o[t]?t:t+1;return o.length}(n,o):s===u?t-1:t+1;if(0===n.length)return 1;return t+(o.length-n.length)}(D.previousConformedValue,h,u);setTimeout(()=>{i.setSelectionRange(me,me)})}if(i&&i.ownerDocument!==(0,ue.Wf)(i)&&(0,Me.V8)(i)&&D.currentCaretPosition){const me=D.currentCaretPosition+function zn(n="",o,t){if(Math.abs(n.length-o.length)>2)return 0;const r=n.split(t).length;return o.split(t).length-r}(D.previousConformedValue,h,t);setTimeout(()=>{i.setSelectionRange(me,me)})}if(""===h||!n)return{value:h};const K=function Zn(n,o=","){return n.includes(o)?n:n+o}(h,o),G=K.split(o)[1];return{value:K+"0".repeat(n-G.length)}}}const Tt=/[1-9]/;function Hn({allowDecimal:n=!1,decimalSymbol:o=",",thousandSymbol:t=J.f$,autoCorrectDecimalSymbol:i=!0,decimalLimit:r=2,requireDecimal:s=!1,allowNegative:u=!1,integerLimit:p=0}={}){return Pe.z.assert(Number.isInteger(r)),Pe.z.assert(r>=0),Pe.z.assert(Number.isInteger(p)),Pe.z.assert(p>=0),(h,{previousConformedValue:D})=>{D&&s&&h.split(t).join("")===D.split(t).join("").split(o).join("")&&(h=D);const K=(h[0]===J.fv||h[0]===J.F)&&u;if(function Bn(n,o,t){return t?/^[,.]$/.test(n):n===o}(h,o,i)&&n)return["0",o,Y.hW];K&&(h=h.slice(1));const G=function jn(n,o,t){return t?Math.max(n.lastIndexOf(o),n.lastIndexOf(yt(o))):n.lastIndexOf(o)}(h,o,i),pe=-1!==G,me=pe?h.slice(0,G):h,fi=me.match(new RegExp(t,"g"))||[],xt=(p?me.slice(0,p+fi.length):me).replace(Y.R3,""),[vi]=xt.match(Y.s9)||[""],_i=vi.length,kt=xt.replace(/^0+(?!\.|$)/,"").trim(),bi=function Rn(n,o){return n.length>3?n.replace(/\B(?=(\d{3})+(?!\d))/g,o):n}(kt,t),_e=Pt(bi);if(pe&&n||s){const Be=pe?Pt(h.slice(G+1).replace(Y.R3,"")):[],Re=r?Be.slice(0,r):Be;h[G]!==yt(o)&&_e.push(Y.v1),_e.push(o,Y.v1,...Re);for(let St=0;St<r-Re.length;St++)_e.push(Y.hW)}const Ci=1===_e.length&&"0"===kt;return K&&(0===_e.length&&_e.push(Y.hW),_e.unshift(J.fv)),function Vn(n,o=!1,t=0){if(o||0===t)return n;const i=n.indexOf(Y.hW);if(-1===i)return n;const s=n[i+1]===Y.v1;return s&&1===t?n:s?(n.unshift(Tt),n):(n[i]=Tt,n)}(_e,Ci,_i)}}function Pt(n){return n.split("").map(o=>Y.hW.test(o)?Y.hW:o)}function Un({thousandSeparator:n}){return!Y.YZ.includes(n)}function je(n,o,t){return parseFloat(n.split(t).join("").split(o).join("."))}var Yn=a(6966),qe=a(9740),Gn=a(7377);let $n=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiValueAccessor",""]],features:[e._Bn([Gn.E2])]}),n})(),Qn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var qn=a(2243);let Wn=(()=>{class n{constructor(t,i,r){this._renderer=t,this._elementRef=i,this._compositionMode=r,this.textMaskConfig={mask:[],guide:!0,placeholderChar:"_",pipe:void 0,keepCharPositions:!1},this.onChange=s=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Xn(){const n=(0,d.q)()?(0,d.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}ngOnChanges(){this._setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)}writeValue(t){this._setupMask(),this._renderer.setProperty(this.inputElement,"value",t??""),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&(this._setupMask(),void 0!==this.textMaskInputElement&&(this.textMaskInputElement.update(t),this.onChange(t=this.inputElement.value)))}_setupMask(t=!1){this.inputElement||(this.inputElement="INPUT"===this._elementRef.nativeElement.tagName.toUpperCase()?this._elementRef.nativeElement:this._elementRef.nativeElement.getElementsByTagName("INPUT")[0]),this.inputElement&&t&&(this.textMaskInputElement=(0,qn.createTextMaskInputElement)(Object.assign({inputElement:this.inputElement},this.textMaskConfig)))}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this._handleInput(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(g.ve,8))},n.\u0275dir=e.lG2({type:n,selectors:[["","textMask",""]],hostBindings:function(t,i){1&t&&e.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},inputs:{textMaskConfig:["textMask","textMaskConfig"]},exportAs:["textMask"],features:[e._Bn([{provide:g.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0}]),e.TTD]}),n})(),Kn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();function ei(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=o.polymorpheusOutlet;e.xp6(1),e.hij(" ",t," ")}}function ti(n,o){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,ei,2,1,"ng-container",5),e.qZA()),2&n){e.oxw();const t=e.MAs(8);e.xp6(1),e.Q6J("polymorpheusOutlet",t)}}function ni(n,o){1&n&&e.GkF(0)}function ii(n,o){1&n&&e.Hsn(0,2)}const oi=["*",[["input"]],[["tuiContent"]]],ri=function(n,o,t,i,r){return[n,o,t,i,r]},si=["*","input","tuiContent"];let ui=(()=>{class n extends le.F9{constructor(t,i,r,s){super(t,i),this.numberFormat=r,this.isIOS=s,this.unfinishedValue="",this.min=Number.MIN_SAFE_INTEGER,this.max=Number.MAX_SAFE_INTEGER,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.polymorpheusValueContent=J.Mm,this.mask=(u,p,h,D)=>({mask:Hn({allowNegative:u,decimalLimit:h,allowDecimal:"never"!==p,requireDecimal:"always"===p,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:Un(this.numberFormat)}),pipe:In("always"===p?h:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,D,u,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return this.isIOS&&this.isNegativeAllowed?"text":"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(t){const i=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;i.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(t.preventDefault(),r.selectionStart++)}onValueChange(t){if(function Jn(n){switch(n){case"":case J.fv:case",":case`${J.fv},`:return!0;default:return!1}}(t))return void this.updateValue(null);if(this.isNativeValueNotFinished)return void(this.unfinishedValue=t);this.unfinishedValue=null;const i=this.absoluteCapInputValue(t);null===i||Number.isNaN(i)||(this.updateValue(i),i!==je(t,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(t){if(Y.YZ.includes(t.key)){if("never"===this.decimal)return void t.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(t.preventDefault(),this.setCaretAfterComma())}}onFocused(t){if(this.updateFocused(t),t)return;const i=this.unfinishedValue?je(this.unfinishedValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator):this.nativeNumberValue;if(this.unfinishedValue=null,Number.isNaN(i))return void this.clear();const r=Math.min(this.max,Math.max(this.min,i));this.updateValue(r),this.nativeValue=this.formattedValue}getFormattedValue(t){const r=Math.abs(t)%1>0;let s="always"===this.decimal||r&&"never"!==this.decimal?this.precision:0;const u=r?Ot(t,this.precision):"";return this.focused&&"always"!==this.decimal&&(s=u.length),function Dn(n,o={}){const{decimalLimit:t,decimalSeparator:i,thousandSeparator:r,zeroPadding:s}=Object.assign(Object.assign({},Y.Jl),o),u=String(Math.floor(Math.abs(n)));let p=Ot(n,t);if(Number.isFinite(t))if(s){const G=Math.max(t-p.length,0);p=`${p}${"0".repeat(G)}`}else p=p.replace(/0*$/,"");const h=u.length%3;let K=(n<0?J.fv:"")+u.charAt(0);for(let G=1;G<u.length;G++)G%3===h&&u.length>3&&(K+=r),K+=u.charAt(G);return p?K+i+p:K}(t,Object.assign(Object.assign({},this.numberFormat),{decimalLimit:s}))}get isNativeValueNotFinished(){const t=this.nativeNumberValue;return t<0?t>this.max:t<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=t,this.nativeFocusableElement.value=t)}get nativeNumberValue(){return je(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(t){const i=je(t,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=i<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),i):Math.min(i,Math.min(this.max,Number.MAX_SAFE_INTEGER));return Number.isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const t=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(t,t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.a5,10),e.Y36(e.sBO),e.Y36(Qe.HO),e.Y36(de.FA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-input-number"]],contentQueries:function(t,i,r){if(1&t&&e.Suo(r,qe.Li,5),2&t){let s;e.iGM(s=e.CRH())&&(i.polymorpheusValueContent=s)}},viewQuery:function(t,i){if(1&t&&e.Gf(ye.yc,5),2&t){let r;e.iGM(r=e.CRH())&&(i.primitiveTextfield=r.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown.0",function(s){return i.onZero(s)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[e._Bn([(0,de.FT)(n),(0,le.wB)(n)]),e.qOj],ngContentSelectors:si,decls:9,vars:27,consts:[["tuiValueAccessor","",1,"t-textfield",3,"pseudoHover","pseudoFocus","pseudoActive","invalid","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","focusedChange","keydown"],["ngProjectAs","tuiContent","class","t-value-content",5,["tuiContent"],4,"ngIf"],[4,"ngIf"],["valueContent",""],["ngProjectAs","tuiContent",5,["tuiContent"],1,"t-value-content"],[4,"polymorpheusOutlet"]],template:function(t,i){1&t&&(e.F$t(oi),e.TgZ(0,"tui-primitive-textfield",0),e.NdJ("valueChange",function(s){return i.onValueChange(s)})("focusedChange",function(s){return i.onFocused(s)})("keydown",function(s){return i.onKeyDown(s)}),e.ALo(1,"tuiMapper"),e.Hsn(2),e.Hsn(3,1,["ngProjectAs","input",5,["input"]]),e.YNc(4,ti,2,1,"div",1),e.qZA(),e.YNc(5,ni,1,0,"ng-container",2),e.ALo(6,"async"),e.YNc(7,ii,1,0,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("pseudoHover",i.pseudoHover)("pseudoFocus",i.computedFocused)("pseudoActive",i.pseudoActive)("invalid",i.computedInvalid)("readOnly",i.readOnly)("disabled",i.computedDisabled)("textMask",e.G7q(1,13,e.qbA(21,ri,i.isNegativeAllowed,i.mask,i.decimal,i.precision,i.nativeFocusableElement)))("value",i.computedValue)("prefix",i.prefix)("postfix",i.postfix)("focusable",i.focusable),e.xp6(4),e.Q6J("ngIf",i.polymorpheusValueContent.length),e.xp6(1),e.Q6J("ngIf",e.lcZ(6,19,i.polymorpheusValueContent.changes)))},dependencies:[ye.yc,ye.B1,$n,Wn,d.O5,qe.Li,Mt.c,d.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"min",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"max",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"decimal",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"precision",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"prefix",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"postfix",void 0),n})(),ci=(()=>{class n extends Yn.D1{get value(){return this.host.computedValue}onValueChange(t){this.host.onValueChange(t)}ngDoCheck(){this.host.nativeFocusableElement&&(this.host.nativeFocusableElement.maxLength=this.host.calculatedMaxLength,this.host.nativeFocusableElement.inputMode="decimal")}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-input-number"]],features:[e._Bn([(0,Qe.cp)(n)]),e.qOj]}),n})(),li=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Kn,Mt.I,ye.KW,dt.cn,Qn,qe.wq]]}),n})();function di(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"You can use mathematical expressions for the above fields. Substitution list:"),e.qZA(),e.TgZ(2,"ul")(3,"li"),e._uU(4,"L \u2014 scenario level"),e.qZA(),e.TgZ(5,"li"),e._uU(6,"C \u2014 characters count"),e.qZA(),e.TgZ(7,"li"),e._uU(8,"x - multiply symbol ('*' works as well)"),e.qZA()(),e.TgZ(9,"p"),e._uU(10," You may also use functions such as "),e.TgZ(11,"i"),e._uU(12,"math.floor"),e.qZA(),e._uU(13," and "),e.TgZ(14,"i"),e._uU(15,"math.ceil"),e.qZA(),e._uU(16," using following format as an example: [(2+L)xC/2{%math.floor}] "),e.qZA())}const pi=function(){return[]};function hi(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",7)(1,"div",8)(2,"tui-input",9),e._uU(3,"Marker "),e._UZ(4,"input",10),e.qZA(),e.TgZ(5,"div",11)(6,"tui-input",12),e._uU(7,"Name"),e.qZA(),e._UZ(8,"tui-error",13),e.ALo(9,"async"),e.ALo(10,"tuiFieldError"),e.qZA(),e.TgZ(11,"tui-svg",14),e.NdJ("click",function(){const s=e.CHM(t).index,u=e.oxw();return e.KtG(u.remove(s))}),e.qZA()(),e.TgZ(12,"div",15)(13,"tui-radio-block",16)(14,"div",17),e._UZ(15,"tui-svg",18),e._uU(16," Objective "),e.qZA()(),e.TgZ(17,"tui-radio-block",16)(18,"div",17),e._UZ(19,"tui-svg",19),e._uU(20," Escort"),e.qZA()()(),e.TgZ(21,"div",20)(22,"div",21)(23,"tui-input",22),e._uU(24,"Health"),e.qZA(),e.TgZ(25,"tui-input",23),e._uU(26,"Count"),e.qZA(),e.TgZ(27,"tui-input-number",24),e._uU(28," Initiative "),e.qZA(),e._UZ(29,"tui-tooltip",25),e.qZA(),e.YNc(30,di,17,0,"ng-template",null,26,e.W1O),e.qZA()()}if(2&n){const t=o.$implicit,i=e.MAs(31);e.Q6J("formGroup",t),e.xp6(2),e.Q6J("formControl",t.controls.marker),e.xp6(4),e.Q6J("formControl",t.controls.name),e.xp6(2),e.Q6J("formControl",t.controls.name)("error",e.lcZ(9,15,e.lcZ(10,17,e.DdM(19,pi)))),e.xp6(5),e.Q6J("formControl",t.controls.escort)("item",!1),e.xp6(4),e.Q6J("formControl",t.controls.escort)("item",!0),e.xp6(6),e.Q6J("formControl",t.controls.health),e.xp6(2),e.Q6J("formControl",t.controls.count),e.xp6(2),e.Q6J("formControl",t.controls.initiative)("min",1)("max",99),e.xp6(2),e.Q6J("content",i)}}class Ee extends zt{constructor(o,t){super(o,t,i=>i.objectives$,(i,r)=>i.updateObjectives(r),()=>nt({name:["",g.kI.required],health:[""],escort:[!1],initiative:[null,[g.kI.min(1),g.kI.max(99)]],count:[""],marker:["",g.kI.maxLength(1)]})),this.reset()}}Ee.\u0275fac=function(o){return new(o||Ee)(e.Y36(_.gz),e.Y36(v.a3))},Ee.\u0275cmp=e.Xpm({type:Ee,selectors:[["ghse-scenario-objectives"]],features:[e._Bn([v.a3]),e.qOj],decls:12,vars:2,consts:[[1,"new-buttons"],["tuiButton","","type","button","icon","tuiIconPlusLarge",3,"click"],[1,"objectives"],["class","objective-form",3,"formGroup",4,"ngFor","ngForOf"],[1,"form-row","buttons"],["tuiButton","","type","button",3,"disabled","click"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[1,"objective-form",3,"formGroup"],[1,"form-row","multi-field"],["maxlength","1",1,"marker",3,"formControl"],["tuiTextfield","","maxlength","1"],[1,"row-errors","name"],["tuiAutoFocus","","required","",3,"formControl"],[3,"formControl","error"],["src","tuiIconTrashLarge",1,"delete",3,"click"],["tuiGroup","",1,"form-row"],[3,"formControl","item"],[1,"objective-type"],["src","assets/images/ghs/objective/objective.svg","width","32"],["src","assets/images/ghs/objective/escort.svg"],[1,"form-row"],[1,"multi-field","expression-fields"],[1,"health",3,"formControl"],[1,"count",3,"formControl"],[1,"initiative",3,"formControl","min","max"],[3,"content"],["expressionsDescription",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return t.addNew()}),e._uU(2,"Add objective"),e.qZA()(),e.TgZ(3,"div",2),e.YNc(4,hi,32,20,"form",3),e.qZA(),e.TgZ(5,"form")(6,"div",4)(7,"div")(8,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(9,"Save"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return t.reset()}),e._uU(11," Reset "),e.qZA()()()()),2&o&&(e.xp6(4),e.Q6J("ngForOf",t.form.controls),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[d.sg,g._Y,g.JJ,g.JL,g.Q7,g.nD,g.oH,g.sg,x.v0,b.P,Je.v,ze.K3,ze.wU,ye.MB,vn.w,bn,Sn,ui,ci,mn,d.Ov,Ge.Ag],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin-top:1.5rem;width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]{width:42rem;display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-items:center;justify-content:space-between}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:2rem}[_nghost-%COMP%]   .objectives[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(30rem,1fr));gap:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{margin-right:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-right:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .health[_ngcontent-%COMP%]{flex-grow:2}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .initiative[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   tui-tooltip[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expressions-description[_ngcontent-%COMP%]{margin-top:.5rem;color:var(--tui-text-02)}[_nghost-%COMP%]   .objective-type[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .objective-type[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:2rem;height:2rem;margin-right:1rem}[_nghost-%COMP%]   .map-marker[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;vertical-align:middle;width:1.5rem;height:1.5rem;overflow:hidden;background-color:#e2421f;color:#fff;font-size:1rem;border-radius:100%;border-color:#fff;border-style:solid;border-width:.2rem;transition:box-shadow .1s ease-in-out}"],changeDetection:0});const gi=[{path:"",pathMatch:"full",component:$},{path:":id",component:Se,canActivateChild:[Te],children:[{path:"",pathMatch:"full",component:we,resolve:{detailsService:oe}},{path:"properties",component:Fe,resolve:{detailsService:oe}},{path:"objectives",component:Ee,resolve:{detailsService:oe}},{path:"monsters",component:Ae,resolve:{detailsService:oe}},{path:"rooms",component:De,resolve:{detailsService:oe}},{path:"rules",component:Ie,resolve:{detailsService:oe}},{path:"sections",component:Ze,resolve:{detailsService:oe}}]}];class xe{}xe.\u0275fac=function(o){return new(o||xe)},xe.\u0275mod=e.oAB({type:xe}),xe.\u0275inj=e.cJS({imports:[_.Bz.forChild(gi),_.Bz]});var mi=a(4466);class ke{}ke.\u0275fac=function(o){return new(o||ke)},ke.\u0275mod=e.oAB({type:ke}),ke.\u0275inj=e.cJS({imports:[d.ez,xe,Oe,mi.m,Et,Ut,he,pt.cB,Cn,wn,li,fn]})},2243:function(Xe){Xe.exports=function(ee){function a(_){if(d[_])return d[_].exports;var e=d[_]={exports:{},id:_,loaded:!1};return ee[_].call(e.exports,e,e.exports,a),e.loaded=!0,e.exports}var d={};return a.m=ee,a.c=d,a.p="",a(0)}([function(ee,a,d){"use strict";function _(z){return z&&z.__esModule?z:{default:z}}Object.defineProperty(a,"__esModule",{value:!0});var e=d(3);Object.defineProperty(a,"conformToMask",{enumerable:!0,get:function(){return _(e).default}});var P=d(2);Object.defineProperty(a,"adjustCaretPosition",{enumerable:!0,get:function(){return _(P).default}});var k=d(5);Object.defineProperty(a,"createTextMaskInputElement",{enumerable:!0,get:function(){return _(k).default}})},function(ee,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.placeholderChar="_",a.strFunction="function"},function(ee,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function d(P){var k=P.previousConformedValue,z=void 0===k?e:k,N=P.previousPlaceholder,M=void 0===N?e:N,O=P.currentCaretPosition,x=void 0===O?0:O,f=P.conformedValue,b=P.rawValue,c=P.placeholderChar,S=P.placeholder,re=P.indexesOfPipedChars,F=void 0===re?_:re,fe=P.caretTrapIndexes,Q=void 0===fe?_:fe;if(0===x||!b.length)return 0;var w=z.length,v=S.length,l=f.length,V=b.length-w,C=V>0;if(V>1&&!C&&0!==w)return x;var A=0,se=void 0,j=void 0;if(!C||z!==f&&f!==S){var q=f.toLowerCase(),y=b.toLowerCase().substr(0,x).split(e).filter(function(T){return-1!==q.indexOf(T)});j=y[y.length-1];var ae=M.substr(0,y.length).split(e).filter(function(T){return T!==c}).length,E=S.substr(0,y.length).split(e).filter(function(T){return T!==c}).length;!C&&(E!==ae||void 0!==M[y.length-1]&&void 0!==S[y.length-2]&&M[y.length-1]!==c&&M[y.length-1]!==S[y.length-1]&&M[y.length-1]===S[y.length-2])&&ae>0&&S.indexOf(j)>-1&&void 0!==b[x]&&(se=!0,j=b[x]);for(var ge=F.map(function(T){return q[T]}).filter(function(T){return T===j}).length,ce=y.filter(function(T){return T===j}).length,ve=S.substr(0,S.indexOf(c)).split(e).filter(function(T,Ce){return T===j&&b[Ce]!==T}).length+ce+ge+(se?1:0),$=0,B=0;B<l&&(A=B+1,q[B]===j&&$++,!($>=ve));B++);}else A=x-V;if(C){for(var H=A,Z=A;Z<=v;Z++)if(S[Z]===c&&(H=Z),S[Z]===c||-1!==Q.indexOf(Z)||Z===v)return H}else if(se){for(var X=A-1;X>=0;X--)if(f[X]===j||-1!==Q.indexOf(X)||0===X)return X}else for(var W=A;W>=0;W--)if(S[W-1]===c||-1!==Q.indexOf(W)||0===W)return W};var _=[],e=""},function(ee,a,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(M){return typeof M}:function(M){return M&&"function"==typeof Symbol&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M};a.default=function _(){var M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z,x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(0,P.isArray)(O)){if((typeof O>"u"?"undefined":e(O))!==k.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");O=O(M,x),O=(0,P.processCaretTraps)(O).maskWithoutCaretTraps}var f=x.guide,b=void 0===f||f,c=x.previousConformedValue,S=void 0===c?N:c,re=x.placeholderChar,F=void 0===re?k.placeholderChar:re,fe=x.placeholder,Q=void 0===fe?(0,P.convertMaskToPlaceholder)(O,F):fe,w=x.keepCharPositions,v=!1===b&&void 0!==S,l=M.length,V=S.length,C=Q.length,ue=O.length,U=l-V,te=U>0,A=x.currentCaretPosition+(te?-U:0),se=A+Math.abs(U);if(!0===w&&!te){for(var j=N,q=A;q<se;q++)Q[q]===F&&(j+=F);M=M.slice(0,A)+j+M.slice(A,l)}for(var L=M.split(N).map(function(X,W){return{char:X,isNew:W>=A&&W<se}}),I=l-1;I>=0;I--){var y=L[I].char;y!==F&&y===Q[I>=A&&V===ue?I-U:I]&&L.splice(I,1)}var E=N,ne=!1;e:for(var ie=0;ie<C;ie++){var he=Q[ie];if(he===F){if(L.length>0)for(;L.length>0;){var ge=L.shift(),ce=ge.char,be=ge.isNew;if(ce===F&&!0!==v){E+=F;continue e}if(O[ie].test(ce)){if(!0===w&&!1!==be&&S!==N&&!1!==b&&te){for(var ve=L.length,$=null,B=0;B<ve;B++){var R=L[B];if(R.char!==F&&!1===R.isNew)break;if(R.char===F){$=B;break}}null!==$?(E+=ce,L.splice($,1)):ie--}else E+=ce;continue e}ne=!0}!1===v&&(E+=Q.substr(ie,C));break}E+=he}if(v&&!1===te){for(var H=null,Z=0;Z<E.length;Z++)Q[Z]===F&&(H=Z);E=null!==H?E.substr(0,H+1):N}return{conformedValue:E,meta:{someCharsRejected:ne}}};var P=d(4),k=d(1),z=[],N=""},function(ee,a,d){"use strict";function e(f){return Array.isArray&&Array.isArray(f)||f instanceof Array}Object.defineProperty(a,"__esModule",{value:!0}),a.convertMaskToPlaceholder=function _(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.placeholderChar;if(!e(f))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==f.indexOf(b))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(b)+"\n\nThe mask that was received is: "+JSON.stringify(f));return f.map(function(c){return c instanceof RegExp?b:c}).join("")},a.isArray=e,a.isString=function P(f){return"string"==typeof f||f instanceof String},a.isNumber=function k(f){return"number"==typeof f&&void 0===f.length&&!isNaN(f)},a.isNil=function z(f){return typeof f>"u"||null===f},a.processCaretTraps=function N(f){for(var b=[],c=void 0;-1!==(c=f.indexOf(x));)b.push(c),f.splice(c,1);return{maskWithoutCaretTraps:f,indexes:b}};var M=d(1),O=[],x="[]"},function(ee,a,d){"use strict";function _(m){return m&&m.__esModule?m:{default:m}}function P(m,w){document.activeElement===m&&(fe?Q(function(){return m.setSelectionRange(w,w,re)},0):m.setSelectionRange(w,w,re))}function k(m){if((0,b.isString)(m))return m;if((0,b.isNumber)(m))return String(m);if(null==m)return S;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(m))}Object.defineProperty(a,"__esModule",{value:!0});var z=Object.assign||function(m){for(var w=1;w<arguments.length;w++){var v=arguments[w];for(var l in v)Object.prototype.hasOwnProperty.call(v,l)&&(m[l]=v[l])}return m},N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};a.default=function e(m){var w={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:w,update:function(v){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,V=l.inputElement,C=l.mask,ue=l.guide,U=l.pipe,te=l.placeholderChar,A=void 0===te?c.placeholderChar:te,se=l.keepCharPositions,j=void 0!==se&&se,q=l.showMask,L=void 0!==q&&q;if(typeof v>"u"&&(v=V.value),v!==w.previousConformedValue){(typeof C>"u"?"undefined":N(C))===F&&void 0!==C.pipe&&void 0!==C.mask&&(U=C.pipe,C=C.mask);var I=void 0,y=void 0;if(C instanceof Array&&(I=(0,b.convertMaskToPlaceholder)(C,A)),!1!==C){var ae=k(v),E=V.selectionEnd,ne=w.previousConformedValue,ie=w.previousPlaceholder,he=void 0;if((typeof C>"u"?"undefined":N(C))===c.strFunction){if(!1===(y=C(ae,{currentCaretPosition:E,previousConformedValue:ne,placeholderChar:A})))return;var ge=(0,b.processCaretTraps)(y);he=ge.indexes,I=(0,b.convertMaskToPlaceholder)(y=ge.maskWithoutCaretTraps,A)}else y=C;var ve={previousConformedValue:ne,guide:ue,placeholderChar:A,pipe:U,placeholder:I,currentCaretPosition:E,keepCharPositions:j},B=(0,f.default)(ae,y,ve).conformedValue,R=(typeof U>"u"?"undefined":N(U))===c.strFunction,H={};R&&(!1===(H=U(B,z({rawValue:ae},ve)))?H={value:ne,rejected:!0}:(0,b.isString)(H)&&(H={value:H}));var Z=R?H.value:B,X=(0,O.default)({previousConformedValue:ne,previousPlaceholder:ie,conformedValue:Z,placeholder:I,rawValue:ae,currentCaretPosition:E,placeholderChar:A,indexesOfPipedChars:H.indexesOfPipedChars,caretTrapIndexes:he}),Ce=Z===I&&0===X?L?I:S:Z;w.previousConformedValue=Ce,w.previousPlaceholder=I,V.value!==Ce&&(V.value=Ce,P(V,X))}}}}};var O=_(d(2)),f=_(d(3)),b=d(4),c=d(1),S="",re="none",F="object",fe=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),Q=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout}])}}]);