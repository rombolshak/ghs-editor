"use strict";(self.webpackChunkghs_editor=self.webpackChunkghs_editor||[]).push([[273],{6273:(kt,A,s)=>{s.r(A),s.d(A,{ScenariosModule:()=>g});var d=s(6895),l=s(5142),e=s(4650),Q=s(9367),Y=s(7819);class f{}f.\u0275fac=function(i){return new(i||f)},f.\u0275cmp=e.Xpm({type:f,selectors:[["ghse-scenarios-list"]],decls:12,vars:2,consts:[[1,"page-header"],[1,"tui-text_h2"],[1,"page-content"],["size","xxl",3,"showLoader","overlay"],[1,"no-items"],[1,"tui-text_h3"],[1,"tui-text_body-l"],["tuiButton","","size","m","icon","tuiIconPlusLarge","routerLink","new"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Scenarios"),e.qZA()(),e.TgZ(3,"div",2)(4,"tui-loader",3)(5,"div",4)(6,"h3",5),e._uU(7,"No scenarios yet"),e.qZA(),e.TgZ(8,"p",6),e._uU(9,"Add a scenario using button below or by importing existig json in the main menu"),e.qZA(),e.TgZ(10,"button",7),e._uU(11,"Add scenario"),e.qZA()()()()),2&i&&(e.xp6(4),e.Q6J("showLoader",!1)("overlay",!0))},dependencies:[l.rH,Q.v0,Y.kM],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 3rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .no-items[_ngcontent-%COMP%]{text-align:center}"]});var J=s(8521),G=s(5983);const E={id:"new",name:"New scenario",group:""};class p extends J.v{constructor(i){super(),this.factory=i}get scenarioDetails$(){return this.model?.data$??null}initializeWithId(i){this.initialize(i,this.factory.create(E))}}p.\u0275fac=function(i){return new(i||p)(e.LFG(G.u))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});var u=s(7776),R=s(2722),X=s(9791),w=s(8276),_=s(655),K=s(8535),F=s(3679),q=s(5753),tt=s(3054),et=s(9255),b=s(8923),P=s(8790),L=s(4671),nt=s(4086),S=s(9300);function it(n,i){1&n&&e.GkF(0)}const $=["*"],ot=["tuiStep",""];function rt(n,i){if(1&n&&e._UZ(0,"tui-svg",4),2&n){const t=e.oxw();e.Q6J("src",t.icon)}}const at={block:"nearest",inline:"center"},st={block:"center",inline:"nearest"};let V=(()=>{class n{constructor(){this.steps=K.Mm,this.orientation="horizontal",this.activeItemIndexChange=new e.vpe,this.activeItemIndex=0}set activeIndex(t){this.activeItemIndex=t,this.scrollIntoView(t)}get changes$(){return(0,F.xo)(this.steps).pipe((0,nt.g)(0))}onHorizontal(t,o){"horizontal"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,o))}onVertical(t,o){"vertical"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,o))}indexOf(t){return(0,q.gD)(this.steps).findIndex(({nativeElement:o})=>o===t)}isActive(t){return t===this.activeItemIndex}activate(t){this.activeItemIndex!==t&&(this.activeItemIndex=t,this.activeItemIndexChange.emit(t),this.scrollIntoView(t))}getNativeElements(t){return t.map(({nativeElement:o})=>o)}moveFocus(t,o){if(!(0,tt.ve)(t))return;const r=this.getNativeElements(this.steps),a=r.findIndex(c=>c===t);(0,et.VR)(a,r,o)}scrollIntoView(t){var o;null===(o=this.getNativeElements(this.steps)[t])||void 0===o||o.scrollIntoView("vertical"===this.orientation?st:at)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-stepper"],["nav","tuiStepper",""]],contentQueries:function(t,o,r){if(1&t&&e.Suo(r,B,4,e.SBq),2&t){let a;e.iGM(a=e.CRH())&&(o.steps=a)}},hostVars:1,hostBindings:function(t,o){1&t&&e.NdJ("keydown.arrowRight",function(a){return o.onHorizontal(a,1)})("keydown.arrowLeft",function(a){return o.onHorizontal(a,-1)})("keydown.arrowDown",function(a){return o.onVertical(a,1)})("keydown.arrowUp",function(a){return o.onVertical(a,-1)}),2&t&&e.uIk("data-orientation",o.orientation)},inputs:{orientation:"orientation",activeIndex:["activeItemIndex","activeIndex"]},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:$,decls:3,vars:3,consts:[[4,"ngIf"]],template:function(t,o){1&t&&(e.F$t(),e.YNc(0,it,1,0,"ng-container",0),e.ALo(1,"async"),e.Hsn(2)),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.changes$))},dependencies:[d.O5,d.Ov],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:smooth;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}@media screen and (prefers-reduced-motion: reduce){[_nghost-%COMP%]{scroll-behavior:auto}}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}"],changeDetection:0}),(0,_.gn)([(0,b.TH)()],n.prototype,"orientation",void 0),(0,_.gn)([b.UM],n.prototype,"changes$",null),(0,_.gn)([b.UM],n.prototype,"getNativeElements",null),n})(),B=(()=>{class n{constructor(t,o,r,a){this.stepper=r,this.elementRef=a,this.stepState="normal",this.icon="",this.focusVisible=!1,o.pipe((0,S.h)(L.y)).subscribe(()=>{this.activate()}),t.subscribe(c=>{this.focusVisible=c})}get isActive(){return this.stepper.isActive(this.index)}get isVertical(){return"vertical"===this.stepper.orientation}get tabIndex(){return this.isActive?0:-1}get index(){return this.stepper.indexOf(this.elementRef.nativeElement)}activate(){this.stepper.activate(this.index)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.ku),e.Y36(P.Ok),e.Y36(V),e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["button","tuiStep",""],["a","tuiStep","",3,"routerLink",""],["a","tuiStep","","routerLink","","routerLinkActive",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(t,o){1&t&&e.NdJ("click",function(){return o.activate()}),2&t&&(e.Ikx("tabIndex",o.tabIndex),e.uIk("data-state",o.stepState),e.ekj("_focus-visible",o.focusVisible)("_active",o.isActive)("_vertical",o.isVertical))},inputs:{stepState:"stepState",icon:"icon"},features:[e._Bn([u.a3,P.Ok,u.ku])],attrs:ot,ngContentSelectors:$,decls:5,vars:1,consts:[["class","t-marker t-marker_custom",3,"src",4,"ngIf"],["src","tuiIconWarningLarge",1,"t-marker","t-marker_error"],["src","tuiIconCheckLarge",1,"t-marker","t-marker_pass"],[1,"t-marker","t-marker_index"],[1,"t-marker","t-marker_custom",3,"src"]],template:function(t,o){1&t&&(e.F$t(),e.YNc(0,rt,1,1,"tui-svg",0),e._UZ(1,"tui-svg",1)(2,"tui-svg",2)(3,"div",3),e.Hsn(4)),2&t&&e.Q6J("ngIf",o.icon)},dependencies:[w.P,d.O5],styles:['[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:1.5rem;outline:none;cursor:pointer;text-decoration:none;counter-increment:steps}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:"";position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.t-marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .t-marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.t-marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not([data-state="normal"]):not(._active)   .t-marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not(._active)   .t-marker_custom[_ngcontent-%COMP%] ~ .t-marker_index[_ngcontent-%COMP%]{display:none}.t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}[_nghost-%COMP%]:not([data-state="error"])   .t-marker_error[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_error[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="pass"])   .t-marker_pass[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_pass[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="normal"])   .t-marker_custom[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .t-marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}'],changeDetection:0}),(0,_.gn)([(0,b.TH)()],n.prototype,"stepState",void 0),(0,_.gn)([(0,b.TH)()],n.prototype,"icon",void 0),n})(),ct=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,w.E]]}),n})();class T{constructor(i,t,o,r){this.detailsService=i,this.route=t,this.router=o,this.destroy$=r,this.model=E,this.newScenarioId="new"}get areStepsDisabled(){return this.model.id===this.newScenarioId}ngOnInit(){const i=this.route.snapshot.paramMap.get("id");this.detailsService.initializeWithId(i),this.detailsService.scenarioDetails$?.pipe((0,R.R)(this.destroy$)).subscribe(t=>this.model=t)}}T.\u0275fac=function(i){return new(i||T)(e.Y36(p),e.Y36(l.gz),e.Y36(l.F0),e.Y36(u.a3))},T.\u0275cmp=e.Xpm({type:T,selectors:[["ghse-scenario-detail"]],features:[e._Bn([u.a3])],decls:21,vars:6,consts:[[1,"page-header","with-link"],["tuiLink","","routerLink",".."],["src","tuiIconChevronLeft"],[1,"tui-text_h2"],[1,"page-content"],["tuiStep","","routerLink",".","routerLinkActive",""],["tuiStep","","routerLink","properties","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","monsters","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","rooms","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","rules","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","sections","routerLinkActive","",3,"disabled"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"tui-svg",2),e._uU(3," Scenarios"),e.qZA(),e.TgZ(4,"h2",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"tui-stepper")(8,"button",5),e._uU(9,"General info"),e.qZA(),e.TgZ(10,"button",6),e._uU(11,"Scenario properties"),e.qZA(),e.TgZ(12,"button",7),e._uU(13,"Monsters"),e.qZA(),e.TgZ(14,"button",8),e._uU(15,"Rooms"),e.qZA(),e.TgZ(16,"button",9),e._uU(17,"Special rules"),e.qZA(),e.TgZ(18,"button",10),e._uU(19,"Sections"),e.qZA()(),e._UZ(20,"router-outlet"),e.qZA()),2&i&&(e.xp6(5),e.Oqu(t.model.name),e.xp6(5),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled))},dependencies:[l.lC,l.rH,l.Od,X.V,w.P,V,B],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 3rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   tui-stepper[_ngcontent-%COMP%]{margin-bottom:1.5rem}"],changeDetection:0});class C{}C.\u0275fac=function(i){return new(i||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["ghse-scenario-general-editor"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"scenario-general-editor works!"),e.qZA())}});class x{}x.\u0275fac=function(i){return new(i||x)},x.\u0275cmp=e.Xpm({type:x,selectors:[["ghse-scenario-properties-editor"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"scenario-properties-editor works!"),e.qZA())}});class M{}M.\u0275fac=function(i){return new(i||M)},M.\u0275cmp=e.Xpm({type:M,selectors:[["ghse-scenario-monsters-editor"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"scenario-monsters-editor works!"),e.qZA())}});class I{}I.\u0275fac=function(i){return new(i||I)},I.\u0275cmp=e.Xpm({type:I,selectors:[["ghse-scenario-rooms-editor"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"scenario-rooms-editor works!"),e.qZA())}});class O{}O.\u0275fac=function(i){return new(i||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["ghse-scenario-rules-editor"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"scenario-rules-editor works!"),e.qZA())}});class y{}y.\u0275fac=function(i){return new(i||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["ghse-scenario-sections-editor"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"scenario-sections-editor works!"),e.qZA())}});const ut=[{path:"",pathMatch:"full",component:f},{path:":id",component:T,children:[{path:"",pathMatch:"full",component:C},{path:"properties",component:x},{path:"monsters",component:M},{path:"rooms",component:I},{path:"rules",component:O},{path:"sections",component:y}]}];class m{}m.\u0275fac=function(i){return new(i||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[l.Bz.forChild(ut),l.Bz]});class h{}h.\u0275fac=function(i){return new(i||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[d.ez]});var lt=s(4466),dt=s(9982);let pt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();s(4645);var ht=s(1127);s(9751);new e.OlP("MutationObserver config");s(515),s(6451),s(4004);var Tt=(s(8505),s(8372),s(8675),s(9740));new e.OlP("[TUI_TAB_EVENT]: Stream of tab activation events");new e.FiY,new e.FiY;const H={underline:!0,exposeActive:!0,itemsLimit:1/0};new e.OlP("[TUI_TABS_OPTIONS]: Default parameters for tabs component",{factory:()=>H}),new e.OlP("[TUI_TABS_REFRESH]: Refresh stream");let St=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Tt.wq,ht.jh,w.E,dt.u,pt]]}),n})();class g{}g.\u0275fac=function(i){return new(i||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[d.ez,m,h,lt.m,ct,St]})}}]);