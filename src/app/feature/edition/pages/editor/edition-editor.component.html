<div class="page-header">
  <h2 class="tui-text_h2">Edition data</h2>
</div>
<div class="page-content">
  <form [formGroup]="editionForm" class="tui-form">
    <div class="name-fields form-row">
      <div><tui-input
        [formControl]="editionForm.controls.editionName"
        class="fullName"
        data-automation="edition.fullname"
      >
        Edition full name
        <input tuiTextfield />
      </tui-input>
      <tui-error
        [formControl]="editionForm.controls.editionName"
        [error]="[] | tuiFieldError | async"
      ></tui-error>
      </div>

      <div>
      <tui-input
        [formControl]="editionForm.controls.editionPrefix"
        class="prefixName"
        data-automation="edition.prefix"
      >
        Edition prefix
        <input tuiTextfield />
      </tui-input>
      <tui-error
        [formControl]="editionForm.controls.editionPrefix"
        [error]="[] | tuiFieldError | async"
      ></tui-error>
      </div>
    </div>

    <label tuiLabel="Extended editions" class="form-row">
      <tui-multi-select
        [formControl]="editionForm.controls.extendedEditions"
        [tuiTextfieldLabelOutside]="true"
        [editable]="true"
        [identityMatcher]="editionIdentityMatcher"
        data-automation="edition.extendedEditions"
      >
        Select editions that this new edition extends
        <tui-data-list-wrapper
          *tuiDataList
          tuiMultiSelectGroup
          [items]="availableEditions | async"
          data-automation="edition.extendedEditions.list"
        ></tui-data-list-wrapper>
      </tui-multi-select>
      <tui-error
        [formControl]="editionForm.controls.extendedEditions"
        [error]="[] | tuiFieldError | async"
      ></tui-error>
    </label>

    <label tuiLabel="Used conditions" class="form-row">
      <tui-multi-select
        [formControl]="editionForm.controls.conditions"
        [tuiTextfieldLabelOutside]="true"
        [editable]="true"
        [(search)]="conditionSearch"
        data-automation="edition.conditions"
      >
        Select conditions used in this edition
        <tui-data-list-wrapper
          *tuiDataList
          tuiMultiSelectGroup
          [items]="filterConditions(conditionSearch) | tuiHideSelected"
          [itemContent]="conditionOptionTemplate"
          data-automation="edition.extendedEditions.list"
        ></tui-data-list-wrapper>
      </tui-multi-select>
    </label>
  </form>
</div>

<ng-template #conditionOptionTemplate let-condition>
  <div class="condition-option">
    <tui-svg
      [src]="'assets/images/ghs/condition/' + condition + '.svg'"
    ></tui-svg>
    {{ condition }}
  </div>
</ng-template>
