(self.webpackChunkghs_editor=self.webpackChunkghs_editor||[]).push([[32],{3032:(st,ie,a)=>{"use strict";a.r(ie),a.d(ie,{ScenariosModule:()=>Ae});var d=a(6895),_=a(5142),e=a(4650),k=a(1135),M=a(4004),Z=a(3900),N=a(4128),O=a(1856);class y{constructor(o){this.storage=o,this._model=new k.X([]),this.scenarios$=this._model.asObservable(),this.maxOrder$=this._model.pipe((0,M.U)(t=>Math.max(...t.map(i=>i.order),0))),this.reload()}reload(){this.storage.scenarios.getAllIds().pipe((0,Z.w)(o=>(0,N.D)(o.map(t=>this.storage.scenarios.withId(t).get())))).subscribe(o=>{this._model.next(o.filter(t=>null!==t))})}setScenariosOrder(o){const t=Array.from(this._model.value);o.forEach((i,r)=>{const s={...this._model.value.at(r),order:i};this.storage.scenarios.withId(s.id).set(s).subscribe(),t.at(r).order=i}),this._model.next(t)}remove(o){this.storage.scenarios.withId(o).remove().subscribe();const t=Array.from(this._model.value),i=t.findIndex(r=>r.id===o);t.splice(i,1),this._model.next(t)}}y.\u0275fac=function(o){return new(o||y)(e.LFG(O.O))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"});var T=a(9367),v=a(7819),C=a(8276),c=a(655),F=a(9751);const ue=new e.OlP("MutationObserver config");let f=(()=>{class n extends F.y{constructor({nativeElement:t},i){super(r=>{const s=new MutationObserver(u=>{r.next(u)});return s.observe(t,i),()=>{s.disconnect()}})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.SBq),e.LFG(ue))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var m=a(7776),l=a(8923),w=a(5753),b=a(3679),de=a(3054),Y=a(7579),oe=a(5963),A=a(9841),ce=a(7331),L=a(9300),K=a(1884),z=a(8675),B=a(8372);const P=["*"];function le(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("transitionend.self",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onTransitionEnd())}),e.Hsn(1),e.qZA()}if(2&n){const t=o.ngIf;e.Udp("top",t.top,"px")("left",t.left,"px")("width",t.width,"px")("height",t.height,"px")}}let V=(()=>{class n{constructor(t){this.elementRef=t,this.element$=new Y.x,this.debounce=0,this.orderChange=this.element$.pipe((0,ce.D)(()=>(0,oe.H)(this.debounce)),(0,L.h)(this.filter.bind(this)),(0,M.U)(i=>this.reorder(i))),this.element=null,this.order$=new k.X(new Map)}set order(t){this.order$.next(t)}get order(){return this.order$.value}rearrange(t){this.element$.next(t)}filter(t){return!!this.element&&!!t&&this.element!==t}reorder(t){var i,r;const s=Array.from(this.elementRef.nativeElement.children),u=s.indexOf(this.element||t),h=s.indexOf(t),g=this.order.size?new Map(this.order):new Map(s.map((q,me)=>[me,me])),S=null!==(i=g.get(u))&&void 0!==i?i:u,ne=null!==(r=g.get(h))&&void 0!==r?r:h;return g.set(u,ne),g.set(h,S),this.order$.next(g),g}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tiles"]],hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("pointerleave.silent",function(){return i.rearrange()}),2&t&&e.ekj("_dragged",i.element)},inputs:{debounce:"debounce",order:"order"},outputs:{orderChange:"orderChange"},features:[e._Bn([m.a3,m.tl,f,{provide:ue,useValue:{childList:!0}}])],ngContentSelectors:P,decls:1,vars:0,template:function(t,i){1&t&&(e.F$t(),e.Hsn(0))},styles:["tui-tiles{position:relative;z-index:0;display:grid;grid-auto-flow:dense;justify-items:stretch}tui-tiles._dragged tui-tile>.t-wrapper{pointer-events:none}tui-tiles._dragged tui-tile:not(._dragged)>.t-wrapper{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}tui-tiles:not(._dragged) tui-tile._dragged>.t-wrapper{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}tui-tile>.t-wrapper{position:absolute;z-index:0;border-radius:inherit}tui-tile._dragged>.t-wrapper{z-index:1;transition:none}\n"],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"debounce",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"order",null),n})(),re=(()=>{class n{constructor(t,i,r,s,u){this.ngZone=t,this.elementRef=i,this.tiles=r,this.resize$=s,this.mutation$=u,this.width=1,this.height=1,this.dragged=!1,this.offset$=new k.X([0,0]),this.position$=(0,A.a)([this.offset$.pipe((0,K.x)(w.Hh)),this.resize$.pipe((0,z.O)(null)),this.mutation$.pipe((0,z.O)(null)),this.tiles.order$.pipe((0,B.b)(0))]).pipe((0,M.U)(([[h,g]])=>({top:g||this.element.offsetTop,left:h||this.element.offsetLeft,width:this.element.clientWidth,height:this.element.clientHeight})),(0,b.Ao)(this.ngZone))}get column(){return`span var(--tui-width, ${this.width})`}get row(){return`span var(--tui-height, ${this.height})`}get element(){return this.elementRef.nativeElement}onEnter(){this.tiles.rearrange(this.element)}onDrag(t){this.dragged=this.dragged||t,this.tiles.element=t?this.element:null}onTransitionEnd(){this.dragged=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(V),e.Y36(m.tl),e.Y36(f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tile"]],hostVars:6,hostBindings:function(t,i){1&t&&e.NdJ("pointerenter",function(){return i.onEnter()}),2&t&&(e.Udp("grid-column",i.column)("grid-row",i.row),e.ekj("_dragged",i.dragged))},inputs:{width:"width",height:"height"},ngContentSelectors:P,decls:2,vars:3,consts:[["class","t-wrapper",3,"top","left","width","height","transitionend.self",4,"ngIf"],[1,"t-wrapper",3,"transitionend.self"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,le,2,8,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.position$))},dependencies:[d.O5,d.Ov],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"width",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"height",void 0),n})(),se=(()=>{class n{constructor(t){this.tile=t,this.x=NaN,this.y=NaN}onStart(t){const i=(0,de.mA)(t),{x:r,y:s,pointerId:u}=t;(0,de.ve)(i)&&i.releasePointerCapture(u),this.onPointer(r,s)}onPointer(t=NaN,i=NaN){this.x=t-this.tile.element.offsetLeft,this.y=i-this.tile.element.offsetTop,this.tile.onDrag(!Number.isNaN(t)),this.tile.offset$.next([0,0])}onMove(t,i){Number.isNaN(this.x)||this.tile.offset$.next([t-this.x,i-this.y])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(re))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiTileHandle",""]],hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("pointerdown.silent.prevent",function(s){return i.onStart(s)})("pointerup.silent",function(){return i.onPointer()},!1,e.evT)("pointermove.silent",function(s){return i.onMove(s.x,s.y)},!1,e.evT),2&t&&e.Udp("touch-action","none")}}),n})(),fe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez]]}),n})();function ve(n,o){if(1&n&&(e.TgZ(0,"button",7),e._uU(1," Add scenario "),e.qZA()),2&n){const t=e.oxw();e.Q6J("routerLink",t.newScenarioId)}}function pe(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"h3",9),e._uU(2,"No scenarios yet"),e.qZA(),e.TgZ(3,"p",10),e._uU(4,"Add a scenario using button below or by importing existig json in the main menu"),e.qZA(),e.TgZ(5,"button",11),e._uU(6,"Add scenario"),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("routerLink",t.newScenarioId)}}function ye(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tui-tile",15)(1,"div",16),e._uU(2),e.qZA(),e._UZ(3,"tui-svg",17),e.TgZ(4,"tui-svg",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.removeScenario(s))}),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,r=e.oxw(2);e.Udp("order",r.scenariosOrder.get(i)),e.xp6(1),e.Q6J("routerLink",t.id),e.xp6(1),e.AsE(" #",t.generalInfo.index,": ",t.generalInfo.name," ")}}function be(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"tui-tiles",13),e.NdJ("orderChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.reorder(r))}),e.YNc(2,ye,5,5,"tui-tile",14),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("debounce",500)("order",t.scenariosOrder),e.xp6(1),e.Q6J("ngForOf",t.scenarios)}}class W{constructor(o){this.scenariosService=o,this.newScenarioId=crypto.randomUUID(),this.isLoading=!0,this.scenarios=[]}ngOnInit(){this.scenariosService.scenarios$.subscribe(o=>{this.scenarios=o,this.scenariosOrder=new Map(o.map((t,i)=>[i,t.order])),this.isLoading=!1})}reorder(o){this.scenariosService.setScenariosOrder(o)}removeScenario(o){this.scenariosService.remove(o.id)}}W.\u0275fac=function(o){return new(o||W)(e.Y36(y))},W.\u0275cmp=e.Xpm({type:W,selectors:[["ghse-scenarios-list"]],decls:8,vars:7,consts:[[1,"page-header"],[1,"tui-text_h2"],["tuiButton","","size","s","icon","tuiIconPlusLarge",3,"routerLink",4,"ngIf"],[1,"page-content"],["size","xxl",3,"showLoader","overlay"],["class","no-items",4,"ngIf"],["class","items",4,"ngIf"],["tuiButton","","size","s","icon","tuiIconPlusLarge",3,"routerLink"],[1,"no-items"],[1,"tui-text_h3"],[1,"tui-text_body-l"],["tuiButton","","size","xl","icon","tuiIconPlusLarge",3,"routerLink"],[1,"items"],[1,"tiles",3,"debounce","order","orderChange"],["class","tile",3,"order",4,"ngFor","ngForOf"],[1,"tile"],[1,"scenario",3,"routerLink"],["tuiTileHandle","","src","tuiIconDragLarge",1,"handle"],["src","tuiIconTrashLarge",1,"remove",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Scenarios"),e.qZA(),e.YNc(3,ve,2,1,"button",2),e.qZA(),e.TgZ(4,"div",3)(5,"tui-loader",4),e.YNc(6,pe,7,1,"div",5),e.YNc(7,be,3,3,"div",6),e.qZA()()),2&o&&(e.ekj("with-button",0!==t.scenarios.length),e.xp6(3),e.Q6J("ngIf",0!==t.scenarios.length),e.xp6(2),e.Q6J("showLoader",t.isLoading)("overlay",!0),e.xp6(1),e.Q6J("ngIf",0===t.scenarios.length),e.xp6(1),e.Q6J("ngIf",0!==t.scenarios.length&&t.scenariosOrder))},dependencies:[d.sg,d.O5,_.rH,T.v0,v.kM,C.P,V,re,se],styles:['.ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 3rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   a[tuiButton][_ngcontent-%COMP%], [_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   button[tuiButton][_ngcontent-%COMP%]{margin-left:2rem;margin-top:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .no-items[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .tiles[_ngcontent-%COMP%]{gap:1rem;grid:auto-flow minmax(6rem,auto) / repeat(auto-fill,minmax(20rem,1fr))}[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]:before{content:"Drop here";display:flex;height:100%;justify-content:center;align-items:center;box-sizing:border-box;color:var(--tui-base-04);border-radius:var(--tui-radius-l);border:2px dashed var(--tui-base-03)}.scenario[_ngcontent-%COMP%]{transition-property:box-shadow;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;height:100%;padding:1rem;background:var(--tui-base-01);box-sizing:border-box;border-radius:var(--tui-radius-l);border:1px solid var(--tui-base-03);overflow:hidden}.scenario[_ngcontent-%COMP%]:hover{box-shadow:0 .75rem 2.25rem #0003}tui-tile._dragged[_ngcontent-%COMP%]   .scenario[_ngcontent-%COMP%]{box-shadow:0 .75rem 2.25rem #0003}.handle[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;right:.75rem;top:1rem;background:var(--tui-base-01);color:var(--tui-base-05);opacity:0;cursor:move}.handle[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}tui-tiles[_ngcontent-%COMP%]:not(._dragged)   tui-tile[_ngcontent-%COMP%]:hover   .handle[_ngcontent-%COMP%], tui-tile._dragged[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{opacity:1}.remove[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;right:.75rem;bottom:1rem;background:var(--tui-base-01);color:var(--tui-base-05);opacity:0;cursor:pointer}.remove[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}tui-tiles[_ngcontent-%COMP%]:not(._dragged)   tui-tile[_ngcontent-%COMP%]:hover   .remove[_ngcontent-%COMP%]{opacity:1}']});var U=a(2722);class J{static getBusinessId(o){return 0!==o.generalInfo.group.length?`${o.generalInfo.index}-${o.generalInfo.group}`:o.generalInfo.index}static getFullName(o){return`#${J.getBusinessId(o)}: ${o.generalInfo.name}`}}var H=a(5888),E=a(8505);class ee{constructor(o,t,i,r){this.listService=o,this.storageService=t,this.alertService=i,this.scenarioId=r,this._dataSaved$=this.alertService.open("Data saved",{status:"success"}),this._maxOrder=0,this._model=new k.X(H.zI),this.reload(),this.businessId$=this._model.asObservable().pipe((0,M.U)(s=>J.getBusinessId(s))),this.exists$=this._model.asObservable().pipe((0,M.U)(s=>""!==s.generalInfo.index)),this.listService.maxOrder$.subscribe(s=>this._maxOrder=s),this.fullModel$=this._model.asObservable(),this.generalInfo$=this._model.asObservable().pipe((0,M.U)(s=>s.generalInfo)),this.properties$=this._model.asObservable().pipe((0,M.U)(s=>s.properties)),this.objectives$=this._model.asObservable().pipe((0,M.U)(s=>s.objectives)),this.monsters$=this._model.asObservable().pipe((0,M.U)(s=>s.monsters))}updateGeneralInfo(o){const t={...this._model.value,generalInfo:o};""===this._model.value.id&&(t.id=this.scenarioId),0===this._model.value.order&&(t.order=this._maxOrder+1),this.notifyUpdated(t)}updateProperties(o){this.notifyUpdated({...this._model.value,properties:o})}updateObjectives(o){this.notifyUpdated({...this._model.value,objectives:o})}updateMonsters(o){this.notifyUpdated({...this._model.value,monsters:o})}reload(){this.storageService.scenarios.withId(this.scenarioId).get().subscribe(o=>{null!==o&&this._model.next(o)})}notifyUpdated(o){this.storageService.scenarios.withId(this.scenarioId).set(o).pipe((0,E.b)(()=>this._model.next(o)),(0,E.b)(()=>this.listService.reload()),(0,Z.w)(()=>this._dataSaved$)).subscribe()}}var te=a(343);class x{constructor(o,t,i){this.listService=o,this.storageService=t,this.alertService=i,this.services=new Map}create(o){return this.services.has(o)||this.services.set(o,new ee(this.listService,this.storageService,this.alertService,o)),this.services.get(o)}}x.\u0275fac=function(o){return new(o||x)(e.LFG(y),e.LFG(O.O),e.LFG(te.J9))},x.\u0275prov=e.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"});var Te=a(9791),j=a(8535),he=a(9255),at=a(8790),nn=a(4671),on=a(4086);function rn(n,o){1&n&&e.GkF(0)}const ut=["*"],sn=["tuiStep",""];function an(n,o){if(1&n&&e._UZ(0,"tui-svg",4),2&n){const t=e.oxw();e.Q6J("src",t.icon)}}const un={block:"nearest",inline:"center"},cn={block:"center",inline:"nearest"};let ct=(()=>{class n{constructor(){this.steps=j.Mm,this.orientation="horizontal",this.activeItemIndexChange=new e.vpe,this.activeItemIndex=0}set activeIndex(t){this.activeItemIndex=t,this.scrollIntoView(t)}get changes$(){return(0,b.ll)(this.steps).pipe((0,on.g)(0))}onHorizontal(t,i){"horizontal"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,i))}onVertical(t,i){"vertical"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,i))}indexOf(t){return(0,w.gD)(this.steps).findIndex(({nativeElement:i})=>i===t)}isActive(t){return t===this.activeItemIndex}activate(t){this.activeItemIndex!==t&&(this.activeItemIndex=t,this.activeItemIndexChange.emit(t),this.scrollIntoView(t))}getNativeElements(t){return t.map(({nativeElement:i})=>i)}moveFocus(t,i){if(!(0,de.ve)(t))return;const r=this.getNativeElements(this.steps),s=r.findIndex(u=>u===t);(0,he.VR)(s,r,i)}scrollIntoView(t){var i;null===(i=this.getNativeElements(this.steps)[t])||void 0===i||i.scrollIntoView("vertical"===this.orientation?cn:un)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-stepper"],["nav","tuiStepper",""]],contentQueries:function(t,i,r){if(1&t&&e.Suo(r,lt,4,e.SBq),2&t){let s;e.iGM(s=e.CRH())&&(i.steps=s)}},hostVars:1,hostBindings:function(t,i){1&t&&e.NdJ("keydown.arrowRight",function(s){return i.onHorizontal(s,1)})("keydown.arrowLeft",function(s){return i.onHorizontal(s,-1)})("keydown.arrowDown",function(s){return i.onVertical(s,1)})("keydown.arrowUp",function(s){return i.onVertical(s,-1)}),2&t&&e.uIk("data-orientation",i.orientation)},inputs:{orientation:"orientation",activeIndex:["activeItemIndex","activeIndex"]},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:ut,decls:3,vars:3,consts:[[4,"ngIf"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,rn,1,0,"ng-container",0),e.ALo(1,"async"),e.Hsn(2)),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.changes$))},dependencies:[d.O5,d.Ov],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:smooth;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}@media screen and (prefers-reduced-motion: reduce){[_nghost-%COMP%]{scroll-behavior:auto}}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"orientation",void 0),(0,c.gn)([l.UM],n.prototype,"changes$",null),(0,c.gn)([l.UM],n.prototype,"getNativeElements",null),n})(),lt=(()=>{class n{constructor(t,i,r,s){this.stepper=r,this.elementRef=s,this.stepState="normal",this.icon="",this.focusVisible=!1,i.pipe((0,L.h)(nn.y)).subscribe(()=>{this.activate()}),t.subscribe(u=>{this.focusVisible=u})}get isActive(){return this.stepper.isActive(this.index)}get isVertical(){return"vertical"===this.stepper.orientation}get tabIndex(){return this.isActive?0:-1}get index(){return this.stepper.indexOf(this.elementRef.nativeElement)}activate(){this.stepper.activate(this.index)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.ku),e.Y36(at.Ok),e.Y36(ct),e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["button","tuiStep",""],["a","tuiStep","",3,"routerLink",""],["a","tuiStep","","routerLink","","routerLinkActive",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(t,i){1&t&&e.NdJ("click",function(){return i.activate()}),2&t&&(e.Ikx("tabIndex",i.tabIndex),e.uIk("data-state",i.stepState),e.ekj("_focus-visible",i.focusVisible)("_active",i.isActive)("_vertical",i.isVertical))},inputs:{stepState:"stepState",icon:"icon"},features:[e._Bn([m.a3,at.Ok,m.ku])],attrs:sn,ngContentSelectors:ut,decls:5,vars:1,consts:[["class","t-marker t-marker_custom",3,"src",4,"ngIf"],["src","tuiIconWarningLarge",1,"t-marker","t-marker_error"],["src","tuiIconCheckLarge",1,"t-marker","t-marker_pass"],[1,"t-marker","t-marker_index"],[1,"t-marker","t-marker_custom",3,"src"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,an,1,1,"tui-svg",0),e._UZ(1,"tui-svg",1)(2,"tui-svg",2)(3,"div",3),e.Hsn(4)),2&t&&e.Q6J("ngIf",i.icon)},dependencies:[C.P,d.O5],styles:['[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:1.5rem;outline:none;cursor:pointer;text-decoration:none;counter-increment:steps}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:"";position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.t-marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .t-marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.t-marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not([data-state="normal"]):not(._active)   .t-marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not(._active)   .t-marker_custom[_ngcontent-%COMP%] ~ .t-marker_index[_ngcontent-%COMP%]{display:none}.t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}[_nghost-%COMP%]:not([data-state="error"])   .t-marker_error[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_error[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="pass"])   .t-marker_pass[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_pass[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="normal"])   .t-marker_custom[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .t-marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}'],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"stepState",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"icon",void 0),n})(),ln=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,C.E]]}),n})();class Ne{constructor(o,t,i,r){this.detailsServiceFactory=o,this.route=t,this.router=i,this.destroy$=r}ngOnInit(){const o=this.route.snapshot.paramMap.get("id");this.detailsService=this.detailsServiceFactory.create(o),this.detailsService.fullModel$?.pipe((0,U.R)(this.destroy$)).subscribe(t=>this.model=t)}get areStepsDisabled(){return""===this.model?.generalInfo.index}get header(){return this.model&&""!==this.model.generalInfo.name?J.getFullName(this.model):"New scenario"}get generalState(){return""!==this.model?.generalInfo.index?"pass":"normal"}get propertiesState(){return(this.model?.properties.requires.length??0)>0&&(this.model?.properties.requires[0].length??0)>0||(this.model?.properties.unlocks.length??0)>0||(this.model?.properties.blocks.length??0)>0?"pass":"normal"}get objectivesState(){return(this.model?.objectives.length??0)>0?"pass":"normal"}}Ne.\u0275fac=function(o){return new(o||Ne)(e.Y36(x),e.Y36(_.gz),e.Y36(_.F0),e.Y36(m.a3))},Ne.\u0275cmp=e.Xpm({type:Ne,selectors:[["ghse-scenario-detail"]],features:[e._Bn([m.a3])],decls:23,vars:10,consts:[[1,"page-header","with-link"],["tuiLink","","routerLink",".."],["src","tuiIconChevronLeft"],[1,"tui-text_h2"],[1,"page-content"],["tuiStep","","routerLink",".","routerLinkActive","",3,"stepState"],["tuiStep","","routerLink","properties","routerLinkActive","",3,"stepState","disabled"],["tuiStep","","routerLink","objectives","routerLinkActive","",3,"stepState","disabled"],["tuiStep","","routerLink","monsters","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","rooms","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","rules","routerLinkActive","",3,"disabled"],["tuiStep","","routerLink","sections","routerLinkActive","",3,"disabled"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"tui-svg",2),e._uU(3," Scenarios"),e.qZA(),e.TgZ(4,"h2",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"tui-stepper")(8,"button",5),e._uU(9,"General"),e.qZA(),e.TgZ(10,"button",6),e._uU(11," Properties "),e.qZA(),e.TgZ(12,"button",7),e._uU(13," Objectives "),e.qZA(),e.TgZ(14,"button",8),e._uU(15,"Monsters"),e.qZA(),e.TgZ(16,"button",9),e._uU(17,"Rooms"),e.qZA(),e.TgZ(18,"button",10),e._uU(19,"Special rules"),e.qZA(),e.TgZ(20,"button",11),e._uU(21,"Sections"),e.qZA()(),e._UZ(22,"router-outlet"),e.qZA()),2&o&&(e.xp6(5),e.Oqu(t.header),e.xp6(3),e.Q6J("stepState",t.generalState),e.xp6(2),e.Q6J("stepState",t.propertiesState)("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("stepState",t.objectivesState)("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled))},dependencies:[_.lC,_.rH,_.Od,Te.V,C.P,ct,lt],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 3rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   a[tuiButton][_ngcontent-%COMP%], [_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   button[tuiButton][_ngcontent-%COMP%]{margin-left:2rem;margin-top:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   tui-stepper[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1rem;background:var(--tui-base-02);border:var(--tui-base-03) 1px solid;border-radius:var(--tui-radius-m);width:max-content}"],changeDetection:0});var p=a(4006);function qe(n){return new p.cw(Object.entries(n).reduce((o,[t,[i,r]])=>({...o,[t]:new p.NI(i,{validators:r,nonNullable:null!==i})}),{}))}class We{constructor(o,t,i,r,s){this.destroy$=t,this.details$=i,this.updateDetails=r,this.form=s,this.currentScenarioId="",o.data.pipe((0,U.R)(this.destroy$)).subscribe(({detailsService:u})=>{this.detailsService=u,this.detailsService&&(this.detailsService.businessId$.subscribe(h=>this.currentScenarioId=h),i(this.detailsService).subscribe(h=>{this.savedModel=h}))})}save(){if(this.detailsService){const o=this.form.getRawValue();this.updateDetails(this.detailsService,o),this.form.markAsPristine()}}reset(){this.savedModel?(this.form.patchValue(this.savedModel),this.form.markAsPristine()):this.form.reset()}}class dt extends We{constructor(o,t,i,r,s){super(o,t,i,r,new p.Oe([])),this.instanceFormCreator=s}addNew(){this.form.insert(0,this.instanceFormCreator()),this.form.markAsDirty()}remove(o){this.form.removeAt(o),this.form.markAsDirty()}reset(){if(this.savedModel){this.form.clear();for(const o of this.savedModel){const t=this.instanceFormCreator();t.patchValue(o),this.form.push(t)}this.form.markAsPristine()}else this.form.reset()}}var Xe=a(4601),G=a(117),Ue=a(6679),R=a(1054),Q=a(7414),Ke=a(2302);let pt=(()=>{class n{constructor(t,i){this.element=t,this.renderer=i,this.tuiCheckedChange=new e.vpe,this.updateProperty("checked",!1)}set tuiChecked(t){this.updateProperty("checked",t||!1),this.updateProperty("indeterminate",null===t)}onChange({checked:t}){this.updateProperty("indeterminate",!1),this.tuiCheckedChange.emit(t)}updateProperty(t,i){this.renderer.setProperty(this.element.nativeElement,t,i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj))},n.\u0275dir=e.lG2({type:n,selectors:[["input","tuiChecked",""],["input","tuiCheckedChange",""]],hostBindings:function(t,i){1&t&&e.NdJ("change",function(s){return i.onChange(s.target)})},inputs:{tuiChecked:"tuiChecked"},outputs:{tuiCheckedChange:"tuiCheckedChange"}}),n})(),ht=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Je=a(9982),dn=a(6451),pn=a(5684);let gt=(()=>{class n{constructor({nativeElement:t},i){this.tuiFocusedChange=(0,dn.T)((0,b.mL)(t,"focusin"),(0,b.mL)(t,"focusout")).pipe((0,M.U)(()=>(0,he.V8)(t)),(0,z.O)(!1),(0,K.x)(),(0,pn.T)(1),(0,b.Yr)(i))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.R0b))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiFocusedChange",""]],outputs:{tuiFocusedChange:"tuiFocusedChange"}}),n})(),mt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),ft=(()=>{class n{constructor(t){this.tuiFocusVisibleChange=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.ku))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiFocusVisibleChange",""]],outputs:{tuiFocusVisibleChange:"tuiFocusVisibleChange"},features:[e._Bn([m.a3,m.ku])]}),n})(),vt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var et=a(2973);const hn=["focusableElement"];let Re=(()=>{class n extends R.F9{constructor(t,i,r){super(t,r),this.options=i,this.size=this.options.size}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,he.V8)(this.nativeFocusableElement)}get computedFocusable(){return this.interactive&&this.focusable}onChecked(t){this.updateValue(t)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(et.Y2),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox"]],viewQuery:function(t,i){if(1&t&&e.Gf(hn,5),2&t){let r;e.iGM(r=e.CRH())&&(i.focusableElement=r.first)}},hostVars:1,hostBindings:function(t,i){2&t&&e.uIk("data-size",i.size)},inputs:{size:"size"},features:[e._Bn([(0,Q.FT)(n),(0,R.wB)(n)]),e.qOj],decls:3,vars:11,consts:[[3,"size","disabled","focused","hovered","pressed","invalid","value"],["type","checkbox","automation-id","tui-checkbox__native",1,"t-native",3,"disabled","id","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""]],template:function(t,i){1&t&&(e.TgZ(0,"tui-primitive-checkbox",0)(1,"input",1,2),e.NdJ("tuiFocusedChange",function(s){return i.onFocused(s)})("tuiCheckedChange",function(s){return i.onChecked(s)})("tuiFocusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA()()),2&t&&(e.Q6J("size",i.size)("disabled",i.disabled)("focused",i.computedFocusVisible)("hovered",i.pseudoHover)("pressed",i.pseudoActive)("invalid",i.computedInvalid)("value",i.value),e.xp6(1),e.Q6J("disabled",i.disabled)("id",i.id)("tuiChecked",i.value)("tuiFocusable",i.computedFocusable))},dependencies:[et.r3,pt,Je.t,gt,ft],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),_t=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,ht,Je.u,mt,vt,et.fB]]}),n})();const gn=["*"];let mn=(()=>{class n extends R.F9{constructor(t,i,r){super(t,i),this.modeDirective=r,this.size="m"}get focused(){return(0,he.V8)(this.nativeFocusableElement)}get nativeFocusableElement(){return this.checkbox?this.checkbox.nativeFocusableElement:null}get hostMode(){return this.modeDirective?this.modeDirective.mode:null}onFocused(t){this.updateFocused(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(Ke.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox-labeled"]],viewQuery:function(t,i){if(1&t&&e.Gf(Re,5),2&t){let r;e.iGM(r=e.CRH())&&(i.checkbox=r.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.uIk("data-size",i.size)("data-mode",i.hostMode)},inputs:{size:"size"},features:[e._Bn([(0,Q.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:gn,decls:4,vars:12,consts:[[1,"t-wrapper"],[3,"disabled","readOnly","focusable","nativeId","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","ngModel","ngModelChange","focusedChange"],[1,"t-content"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"tui-checkbox",1),e.NdJ("ngModelChange",function(s){return i.onModelChange(s)})("focusedChange",function(s){return i.onFocused(s)}),e.qZA(),e.TgZ(2,"div",2),e.Hsn(3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("disabled",i.computedDisabled)("readOnly",i.readOnly)("focusable",i.focusable)("nativeId",i.nativeId)("pseudoInvalid",i.computedInvalid)("pseudoFocus",i.pseudoFocus)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("size",i.size)("ngModel",i.value),e.xp6(1),e.ekj("t-content_disabled",i.computedDisabled))},dependencies:[Re,p.JJ,p.On],styles:["[_nghost-%COMP%]{position:relative;display:block;line-height:0}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{display:inline-flex;max-width:100%;cursor:pointer}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}[data-mode=onDark][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}.t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-s);line-height:1rem;word-wrap:break-word;min-width:0}.t-content_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-m);margin-left:.75rem}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),fn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,p.u5,_t]]}),n})();var tt=a(5120);const nt=function(){return[]};class Be extends We{constructor(o,t){super(o,t,r=>r.generalInfo$,(r,s)=>r.updateGeneralInfo(s),qe({index:["",p.kI.required],group:[""],name:["",p.kI.required],initial:[!1]})),this.reset()}}Be.\u0275fac=function(o){return new(o||Be)(e.Y36(_.gz),e.Y36(m.a3))},Be.\u0275cmp=e.Xpm({type:Be,selectors:[["ghse-scenario-general-editor"]],features:[e._Bn([{provide:m.a3}]),e.qOj],decls:32,vars:27,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],["data-automation","edition.prefix",1,"prefixName",3,"formControl"],[1,"tui-required"],[3,"formControl","error"],[1,"form-row","multi-field"],[1,"scenario-index"],[1,"scenario-group"],["tuiTextfield","","placeholder","solo"],["size","l",3,"formControl"],[1,"form-row","buttons"],["tuiButton","","type","submit",3,"disabled"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(1,"div",1)(2,"tui-input",2),e._uU(3," Scenario name "),e._UZ(4,"span",3),e.qZA(),e._UZ(5,"tui-error",4),e.ALo(6,"async"),e.ALo(7,"tuiFieldError"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"tui-input",2),e._uU(11," Scenario # "),e._UZ(12,"span",3),e.qZA(),e._UZ(13,"tui-error",4),e.ALo(14,"async"),e.ALo(15,"tuiFieldError"),e.qZA(),e.TgZ(16,"div",7)(17,"tui-input",2),e._uU(18," Scenario group "),e._UZ(19,"input",8),e.qZA(),e._UZ(20,"tui-error",4),e.ALo(21,"async"),e.ALo(22,"tuiFieldError"),e.qZA()(),e.TgZ(23,"div",1)(24,"tui-checkbox-labeled",9),e._uU(25," It is initial scenario of a campaign "),e.qZA()(),e.TgZ(26,"div",10)(27,"div")(28,"button",11),e._uU(29,"Save"),e.qZA(),e.TgZ(30,"button",12),e.NdJ("click",function(){return t.reset()}),e._uU(31," Reset "),e.qZA()()()()),2&o&&(e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("formControl",t.form.controls.name),e.xp6(3),e.Q6J("formControl",t.form.controls.name)("error",e.lcZ(6,12,e.lcZ(7,14,e.DdM(24,nt)))),e.xp6(5),e.Q6J("formControl",t.form.controls.index),e.xp6(3),e.Q6J("formControl",t.form.controls.index)("error",e.lcZ(14,16,e.lcZ(15,18,e.DdM(25,nt)))),e.xp6(4),e.Q6J("formControl",t.form.controls.group),e.xp6(3),e.Q6J("formControl",t.form.controls.group)("error",e.lcZ(21,20,e.lcZ(22,22,e.DdM(26,nt)))),e.xp6(4),e.Q6J("formControl",t.form.controls.initial),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[p._Y,p.JJ,p.JL,p.oH,p.sg,T.v0,Xe.v,Ue.K3,Ue.wU,G.MB,mn,d.Ov,tt.Ag],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin-top:1.5rem;width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .scenario-group[_ngcontent-%COMP%]{width:auto;flex-shrink:0}[_nghost-%COMP%]   .scenario-index[_ngcontent-%COMP%]{flex:1;margin-right:1.5rem}"]});var vn=a(9646),Pe=a(9886),it=a(3861),_n=a(9343),Ct=a(6772),bt=a(3935);function Cn(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",15),e.ALo(1,"async")),2&n){const t=e.oxw(2);e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}function bn(n,o){1&n&&(e.TgZ(0,"span",16),e._uU(1,"-- OR --"),e.qZA())}function Mn(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tui-input-tag",13),e.NdJ("searchChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSearchChange(r))}),e._uU(2," Scenario requires "),e.YNc(3,Cn,2,4,"tui-data-list-wrapper",9),e.qZA(),e.YNc(4,bn,2,0,"span",14),e.BQk()}if(2&n){const t=o.$implicit,i=o.index;e.xp6(1),e.Q6J("formControl",t)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("ngIf",0===i)}}function On(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",17),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}function yn(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",15),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}const Mt=function(){return[]};class Ee extends We{constructor(o,t,i,r){super(o,t,u=>u.properties$,(u,h)=>u.updateProperties(h),i.group({blocks:[[]],unlocks:[[]],requires:i.array([i.control([]),i.control([])])})),this.scenariosListService=r,this.scenarios=null,this.scenariosIds=null,this.scenarioName=({$implicit:u})=>this.scenarios?.get(u),this.search$=new Y.x,this.reset()}ngOnInit(){this.scenariosListService.scenarios$.pipe((0,U.R)(this.destroy$)).subscribe(o=>{this.scenarios=new Map(o.filter(t=>J.getBusinessId(t)!==this.currentScenarioId).map(t=>[J.getBusinessId(t),J.getFullName(t)])),this.scenariosIds=Array.from(this.scenarios.keys()),this.filteredItems$=this.search$.pipe((0,Z.w)(t=>(0,vn.of)(Array.from(this.scenarios?.entries()??[]).filter(i=>i[1].toLowerCase().includes(t.toLowerCase())).map(i=>i[0]))),(0,z.O)(this.scenariosIds))})}onSearchChange(o){this.search$.next(o)}}Ee.\u0275fac=function(o){return new(o||Ee)(e.Y36(_.gz),e.Y36(m.a3),e.Y36(p.j3),e.Y36(y))},Ee.\u0275cmp=e.Xpm({type:Ee,selectors:[["ghse-scenario-properties-editor"]],features:[e._Bn([{provide:m.a3}]),e.qOj],decls:24,vars:21,consts:[[3,"formGroup","ngSubmit"],["tuiLabel","Scenario requirements:",1,"form-row"],[1,"multi-field"],[4,"ngFor","ngForOf"],["tuiLabel","Scenario unlocks:",1,"form-row"],[3,"formControl","tuiTextfieldLabelOutside","searchChange"],["emptyContent","Be sure to create said scenario later.",3,"itemContent","items",4,"tuiDataList"],[3,"formControl","error"],["tuiLabel","Scenario blocks:",1,"form-row"],["emptyContent","No such scenario currently exists. You can insert it now but be sure to create said scenario later.",3,"itemContent","items",4,"tuiDataList"],[1,"form-row","buttons"],["tuiButton","","type","submit",3,"disabled"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[1,"requirement",3,"formControl","tuiTextfieldLabelOutside","searchChange"],["class","separator",4,"ngIf"],["emptyContent","No such scenario currently exists. You can insert it now but be sure to create said scenario later.",3,"itemContent","items"],[1,"separator"],["emptyContent","Be sure to create said scenario later.",3,"itemContent","items"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(1,"label",1)(2,"div",2),e.YNc(3,Mn,5,3,"ng-container",3),e.qZA()(),e.TgZ(4,"label",4)(5,"tui-input-tag",5),e.NdJ("searchChange",function(r){return t.onSearchChange(r)}),e._uU(6," Scenario unlocks "),e.YNc(7,On,2,4,"tui-data-list-wrapper",6),e.qZA(),e._UZ(8,"tui-error",7),e.ALo(9,"async"),e.ALo(10,"tuiFieldError"),e.qZA(),e.TgZ(11,"label",8)(12,"tui-input-tag",5),e.NdJ("searchChange",function(r){return t.onSearchChange(r)}),e._uU(13," Scenario blocks "),e.YNc(14,yn,2,4,"tui-data-list-wrapper",9),e.qZA(),e._UZ(15,"tui-error",7),e.ALo(16,"async"),e.ALo(17,"tuiFieldError"),e.qZA(),e.TgZ(18,"div",10)(19,"div")(20,"button",11),e._uU(21,"Save"),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(){return t.reset()}),e._uU(23," Reset "),e.qZA()()()()),2&o&&(e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("ngForOf",t.form.controls.requires.controls),e.xp6(2),e.Q6J("formControl",t.form.controls.unlocks)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("formControl",t.form.controls.unlocks)("error",e.lcZ(9,11,e.lcZ(10,13,e.DdM(19,Mt)))),e.xp6(4),e.Q6J("formControl",t.form.controls.blocks)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("formControl",t.form.controls.blocks)("error",e.lcZ(16,15,e.lcZ(17,17,e.DdM(20,Mt)))),e.xp6(5),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[d.sg,d.O5,p._Y,p.JJ,p.JL,p.oH,p.sg,T.v0,Pe.xT,it.gX,_n.A,Xe.v,Ct.eC,bt.PZ,d.Ov,tt.Ag],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin-top:1.5rem;width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .requirement[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 2rem}"],changeDetection:0});class Me{}Me.\u0275fac=function(o){return new(o||Me)},Me.\u0275mod=e.oAB({type:Me}),Me.\u0275inj=e.cJS({imports:[d.ez]});var Ot=a(1842),yt=a(8574),Tt=a(529);class xe{constructor(o,t){this.http=t,o.baseEditionData$.pipe((0,M.U)(i=>i.extendedEditions),(0,Z.w)(i=>(0,N.D)(i.map(r=>this.loadEditionLabel(r))))).subscribe(i=>{this._labels=new Map(i.map(r=>[Object.keys(r.en.edition)[0],r]))})}getMonster(o,t){return this._labels.get(o)?.en.monster[t]??""}loadEditionLabel(o){return this.http.get(`assets/json/ghs-data/${o}/label.json`,{context:(0,Ot.DN)()})}}xe.\u0275fac=function(o){return new(o||xe)(e.LFG(yt.C),e.LFG(Tt.eN))},xe.\u0275prov=e.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"});class ke{constructor(o,t,i){this.labelService=t,this.http=i,o.baseEditionData$.pipe((0,M.U)(r=>r.extendedEditions)).subscribe(r=>this.editions=r)}getAvailableMonsters(){return this.http.get("assets/json/monsters.generated.json",{context:(0,Ot.DN)()}).pipe((0,M.U)(o=>o.filter(t=>this.editions.includes(t.edition)).map(t=>(t.displayName=this.labelService.getMonster(t.edition,t.name),t))))}}ke.\u0275fac=function(o){return new(o||ke)(e.LFG(yt.C),e.LFG(xe),e.LFG(Tt.eN))},ke.\u0275prov=e.Yz7({token:ke,factory:ke.\u0275fac,providedIn:Me});var Pt=a(3675);let Tn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,i){},styles:[".tui-group{position:relative;z-index:0;display:flex}.tui-group>*{flex:1 1 0;min-width:0}.tui-group>*:nth-child(n){border-radius:0}.tui-group>*:not(:last-child){margin-right:.125rem}.tui-group_collapsed>*{z-index:1}.tui-group_collapsed>*:not(:last-child){margin-right:-1px}.tui-group_collapsed>*._readonly,.tui-group_collapsed>*._disabled,.tui-group_collapsed>*._readonly:hover,.tui-group_collapsed>*._disabled:hover{z-index:0}.tui-group_collapsed>*:hover,.tui-group_collapsed>*._hovered,.tui-group_collapsed>*._pressed{z-index:3}.tui-group_collapsed>*._invalid{z-index:2}.tui-group_collapsed>*._invalid:hover,.tui-group_collapsed>*._invalid._hovered,.tui-group_collapsed>*._invalid._pressed{z-index:4}.tui-group_collapsed>*._hosted_dropdown_focused,.tui-group_collapsed>*._focus-visible,.tui-group_collapsed>*._focused.ng-touched,.tui-group_collapsed>*._focused.ng-untouched{z-index:5}.tui-group_collapsed>*._active,.tui-group_collapsed>*[data-appearance=whiteblock-active]{z-index:6}.tui-group_collapsed>*._focus-visible._focused,.tui-group_collapsed>*._focus-visible._active,.tui-group_collapsed>*._focus-visible[data-appearance=whiteblock-active]{z-index:7}.tui-group_orientation_vertical{display:inline-flex;flex-direction:column}.tui-group_orientation_vertical>*{min-height:auto;flex:0 0 auto}.tui-group_orientation_vertical>*:not(:last-child){margin-right:0;margin-bottom:.125rem}.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}.tui-group_rounded.tui-group_orientation_horizontal>*:first-child{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal>*:last-child{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-bottom-left-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:last-child{border-top-right-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical>*:first-child{border-top-left-radius:var(--tui-radius-m);border-top-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical>*:last-child{border-bottom-left-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:last-child{border-bottom-left-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-m)}}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_vertical{width:100%}.tui-group_adaptive.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical>*:not(:last-child){margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_horizontal{flex-direction:column;width:100%}.tui-group_adaptive.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal>*:not(:last-child){margin-right:0;margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}.tui-group__auto-width-item{min-width:auto;flex:0 0 auto}.tui-group .tui-group__inherit-item{border-radius:inherit}\n"],encapsulation:2}),n})(),xt=(()=>{class n{constructor(t){this.orientation="horizontal",this.adaptive=!1,this.collapsed=!1,this.rounded=!0,this.size="m",t.addComponent(Tn)}get orientationHorizontal(){return"horizontal"===this.orientation}get orientationVertical(){return"vertical"===this.orientation}get sizeLarge(){return"l"===this.size}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gH))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiGroup","",5,"ng-container"]],hostAttrs:["role","group",1,"tui-group"],hostVars:12,hostBindings:function(t,i){2&t&&e.ekj("tui-group_adaptive",i.adaptive)("tui-group_collapsed",i.collapsed)("tui-group_rounded",i.rounded)("tui-group_orientation_horizontal",i.orientationHorizontal)("tui-group_orientation_vertical",i.orientationVertical)("tui-group_radius_large",i.sizeLarge)},inputs:{orientation:"orientation",adaptive:"adaptive",collapsed:"collapsed",rounded:"rounded",size:"size"}}),(0,c.gn)([(0,l.TH)()],n.prototype,"orientation",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"adaptive",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"collapsed",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"rounded",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),Pn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez]]}),n})();var kt=a(3422),ot=a(1127),ge=a(1308),rt=a(6966),wt=a(8341),St=a(4606),Ft=a(7377),It=a(4677),we=a(9740);function xn(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=o.polymorpheusOutlet;e.xp6(1),e.hij(" ",t," ")}}const kn=function(n,o){return{$implicit:n,active:o}};function wn(n,o){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,xn,2,1,"ng-container",5),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("polymorpheusOutlet",t.computedContent)("polymorpheusOutletContext",e.WLB(2,kn,t.value,t.computedFocused))}}function Sn(n,o){1&n&&e.GkF(0)}function Fn(n,o){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,Sn,1,0,"ng-container",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("polymorpheusOutlet",t.arrow)}}const In=["*",[["input"]]],Dn=["*","input"];let Dt=(()=>{class n extends R.F9{constructor(t,i,r,s){super(t,i),this.arrowMode=r,this.itemsHandlers=s,this.stringify=this.itemsHandlers.stringify,this.strictMatcher=j.zy,this.identityMatcher=this.itemsHandlers.identityMatcher,this.valueContent="",this.strict=!0,this.search=null,this.searchChange=new e.vpe,this.datalist="",this.open=!1}get arrow(){return this.interactive?this.arrowMode.interactive:this.arrowMode.disabled}get nativeFocusableElement(){var t,i;return null!==(i=null===(t=this.textfield)||void 0===t?void 0:t.nativeFocusableElement)&&void 0!==i?i:null}get focused(){return(0,he.V8)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get nativeValue(){return null===this.value?this.search||"":this.stringify(this.value)}get showValueTemplate(){return(0,w.Pc)(this.value)&&!this.focused}get computedContent(){return this.valueContent||this.nativeValue}onActiveZone(t){this.updateFocused(t)}checkOption(t){this.isStrictMatch(t)&&(this.updateValue(t),this.updateSearch(null))}handleOption(t){this.setNativeValue(this.stringify(t)),this.focusInput(),this.close(),this.updateSearch(null),this.updateValue(t)}onFieldKeyDownEnter(t){var i;this.open&&t.preventDefault();const r=(null===(i=this.accessor)||void 0===i?void 0:i.getOptions())||[];1===r.length&&(this.updateValue(r[0]),this.updateSearch(null),this.close())}onValueChange(t){var i,r;this.updateSearch(t);const s=null===(i=this.accessor)||void 0===i?void 0:i.getOptions().find(u=>this.isStrictMatch(u));if(void 0!==s)return this.updateValue(s),void this.updateSearch(null);(this.strict||""===this.search)&&this.updateValue(null),null===(r=this.hostedDropdown)||void 0===r||r.updateOpen(!0)}updateValue(t){super.updateValue(t)}toggle(){var t;null===(t=this.hostedDropdown)||void 0===t||t.updateOpen(!this.open)}isStrictMatch(t){return this.strictMatcher(t,this.search||"",this.stringify)}close(){var t;null===(t=this.hostedDropdown)||void 0===t||t.updateOpen(!1)}updateSearch(t){this.search!==t&&(this.search=t,this.searchChange.emit(t))}setNativeValue(t){this.nativeFocusableElement&&(this.nativeFocusableElement.value=t)}focusInput(t=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(wt.Ii),e.Y36(It.Ys))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-combo-box"]],contentQueries:function(t,i,r){if(1&t&&(e.Suo(r,ge.Cc,5),e.Suo(r,it.gX,5,e.Rgc)),2&t){let s;e.iGM(s=e.CRH())&&(i.accessor=s.first),e.iGM(s=e.CRH())&&(i.datalist=s.first)}},viewQuery:function(t,i){if(1&t&&(e.Gf(ot.o1,5),e.Gf(G.yc,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.hostedDropdown=r.first),e.iGM(r=e.CRH())&&(i.textfield=r.first)}},inputs:{stringify:"stringify",strictMatcher:"strictMatcher",identityMatcher:"identityMatcher",valueContent:"valueContent",strict:"strict",search:"search"},outputs:{searchChange:"searchChange"},features:[e._Bn([(0,Q.FT)(n),(0,ge.oE)(n),(0,R.wB)(n),(0,ge.P7)(St.Q4)],[Ft.yn]),e.qOj],ngContentSelectors:Dn,decls:7,vars:13,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-combo-box__textfield",1,"t-textfield",3,"pseudoFocus","pseudoHover","invalid","nativeId","readOnly","tuiTextfieldIcon","disabled","focusable","value","valueChange","click","keydown.enter"],["ngProjectAs","tuiContent","automation-id","tui-combo-box__template","class","t-value",5,["tuiContent"],4,"ngIf"],["icon",""],["ngProjectAs","tuiContent","automation-id","tui-combo-box__template",5,["tuiContent"],1,"t-value"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-icon"],[4,"polymorpheusOutlet"]],template:function(t,i){if(1&t&&(e.F$t(In),e.TgZ(0,"tui-hosted-dropdown",0),e.NdJ("openChange",function(s){return i.open=s})("tuiActiveZoneChange",function(s){return i.onActiveZone(s)}),e.TgZ(1,"tui-primitive-textfield",1),e.NdJ("valueChange",function(s){return i.onValueChange(s)})("click",function(){return i.toggle()})("keydown.enter",function(s){return i.onFieldKeyDownEnter(s)}),e.Hsn(2),e.Hsn(3,1,["ngProjectAs","input",5,["input"]]),e.YNc(4,wn,2,5,"div",2),e.qZA(),e.YNc(5,Fn,2,1,"ng-template",null,3,e.W1O),e.qZA()),2&t){const r=e.MAs(6);e.Q6J("canOpen",i.interactive)("content",i.datalist||"")("open",i.open),e.xp6(1),e.Q6J("pseudoFocus",i.computedFocused)("pseudoHover",i.pseudoHover)("invalid",i.computedInvalid)("nativeId",i.nativeId)("readOnly",i.readOnly)("tuiTextfieldIcon",i.arrow?r:"")("disabled",i.computedDisabled)("focusable",i.computedFocusable)("value",i.nativeValue),e.xp6(3),e.Q6J("ngIf",i.showValueTemplate)}},dependencies:[ot.o1,G.yc,kt.e,G.B1,Pe.AW,d.O5,we.Li],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center}.t-icon[_ngcontent-%COMP%]{pointer-events:auto}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"stringify",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"strictMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"valueContent",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"strict",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"search",void 0),n})(),An=(()=>{class n extends rt.D1{get value(){return this.host.nativeValue}onValueChange(t){this.host.onValueChange(t)}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-combo-box"]],features:[e._Bn([(0,ge.cp)(n)]),e.qOj]}),n})(),Nn=(()=>{class n{constructor(t){this.comboBox=t,this.strict=!0}onInput(){!this.strict&&this.comboBox.search&&this.comboBox.updateValue(this.comboBox.search)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Dt))},n.\u0275dir=e.lG2({type:n,selectors:[["tui-combo-box","strict",""]],hostBindings:function(t,i){1&t&&e.NdJ("input",function(){return i.onInput()})},inputs:{strict:"strict"}}),(0,c.gn)([(0,l.TH)()],n.prototype,"strict",void 0),n})(),Bn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,we.wq,kt.A,G.KW,ot.jh,St.Ig,wt.Mt,Pe.cn]]}),n})();var En=a(1225),Se=a(8865),Zn=a(6422),$=a(5825);function At(n,o){const[,t=""]=function Vn(n){const o=String(n),[t,i]=o.split("e-");let r=o;if(i){const[,s]=t.split("."),u=Number(i)+(s?.length||0);r=n.toFixed(u)}return r}(n).split(".");return(0,w.dt)(o)?t.slice(0,Math.max(0,o)):t}function Nt(n,o={}){const{decimalLimit:t,decimalSeparator:i,thousandSeparator:r,zeroPadding:s}=Object.assign(Object.assign({},$.Jl),o),u=String(Math.floor(Math.abs(n)));let h=At(n,t);if(Number.isFinite(t))if(s){const q=Math.max(t-h.length,0);h=`${h}${"0".repeat(q)}`}else h=h.replace(/0*$/,"");const g=u.length%3;let ne=(n<0?j.fv:"")+u.charAt(0);for(let q=1;q<u.length;q++)q%3===g&&u.length>3&&(ne+=r),ne+=u.charAt(q);return h?ne+i+h:ne}function Bt(n){return"."===n?",":"."}function zn(n=0,o=",",t=j.f$,i,r,s=!1){Se.z.assert(Number.isInteger(n)),Se.z.assert(n>=0);let u=-1;const h=!!i&&(0,Zn.Ex)(i)||s;return i&&h&&i.addEventListener("beforeinput",()=>{u=i.selectionStart||0}),(g,S)=>{if(!g&&S.rawValue===j.fv&&r)return j.fv;if(i&&h&&(0,he.V8)(i)){const _e=function jn(n="",o,t,i=","){const r=new RegExp(`${i}.+`),s=n.replace(r,""),u=o.replace(r,"");if(Math.abs(s.length-u.length)>2)return o.length;if(n.length===o.length)return n.indexOf(i)<=t?function Ln(n,o){for(let t=0;t<o.length;t++)if(n[t]!==o[t])return"0"===o[t]?t:t+1;return o.length}(n,o):s===u?t-1:t+1;if(0===n.length)return 1;return t+(o.length-n.length)}(S.previousConformedValue,g,u);setTimeout(()=>{i.setSelectionRange(_e,_e)})}if(i&&i.ownerDocument!==(0,de.Wf)(i)&&(0,he.V8)(i)&&S.currentCaretPosition){const _e=S.currentCaretPosition+function Un(n="",o,t){if(Math.abs(n.length-o.length)>2)return 0;const r=n.split(t).length;return o.split(t).length-r}(S.previousConformedValue,g,t);setTimeout(()=>{i.setSelectionRange(_e,_e)})}if(""===g||!n)return{value:g};const ne=function Hn(n,o=","){return n.includes(o)?n:n+o}(g,o),q=ne.split(o)[1];return{value:ne+"0".repeat(n-q.length)}}}const Et=/[1-9]/;function Zt({allowDecimal:n=!1,decimalSymbol:o=",",thousandSymbol:t=j.f$,autoCorrectDecimalSymbol:i=!0,decimalLimit:r=2,requireDecimal:s=!1,allowNegative:u=!1,integerLimit:h=0}={}){return Se.z.assert(Number.isInteger(r)),Se.z.assert(r>=0),Se.z.assert(Number.isInteger(h)),Se.z.assert(h>=0),(g,{previousConformedValue:S})=>{S&&s&&g.split(t).join("")===S.split(t).join("").split(o).join("")&&(g=S);const ne=(g[0]===j.fv||g[0]===j.F)&&u;if(function Gn(n,o,t){return t?/^[,.]$/.test(n):n===o}(g,o,i)&&n)return["0",o,$.hW];ne&&(g=g.slice(1));const q=function Yn(n,o,t){return t?Math.max(n.lastIndexOf(o),n.lastIndexOf(Bt(o))):n.lastIndexOf(o)}(g,o,i),me=-1!==q,_e=me?g.slice(0,q):g,ao=_e.match(new RegExp(t,"g"))||[],Kt=(h?_e.slice(0,h+ao.length):_e).replace($.R3,""),[uo]=Kt.match($.s9)||[""],co=uo.length,en=Kt.replace(/^0+(?!\.|$)/,"").trim(),lo=function Qn(n,o){return n.length>3?n.replace(/\B(?=(\d{3})+(?!\d))/g,o):n}(en,t),Oe=Vt(lo);if(me&&n||s){const Qe=me?Vt(g.slice(q+1).replace($.R3,"")):[],$e=r?Qe.slice(0,r):Qe;g[q]!==Bt(o)&&Oe.push($.v1),Oe.push(o,$.v1,...$e);for(let tn=0;tn<r-$e.length;tn++)Oe.push($.hW)}const po=1===Oe.length&&"0"===en;return ne&&(0===Oe.length&&Oe.push($.hW),Oe.unshift(j.fv)),function Rn(n,o=!1,t=0){if(o||0===t)return n;const i=n.indexOf($.hW);if(-1===i)return n;const s=n[i+1]===$.v1;return s&&1===t?n:s?(n.unshift(Et),n):(n[i]=Et,n)}(Oe,po,co)}}function Vt(n){return n.split("").map(o=>$.hW.test(o)?$.hW:o)}function $n({thousandSeparator:n}){return!$.YZ.includes(n)}function Ye(n,o,t){return parseFloat(n.split(t).join("").split(o).join("."))}let zt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiValueAccessor",""]],features:[e._Bn([Ft.E2])]}),n})(),Ht=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Wn=a(2243);let jt=(()=>{class n{constructor(t,i,r){this._renderer=t,this._elementRef=i,this._compositionMode=r,this.textMaskConfig={mask:[],guide:!0,placeholderChar:"_",pipe:void 0,keepCharPositions:!1},this.onChange=s=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Xn(){const n=(0,d.q)()?(0,d.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}ngOnChanges(){this._setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)}writeValue(t){this._setupMask(),this._renderer.setProperty(this.inputElement,"value",t??""),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&(this._setupMask(),void 0!==this.textMaskInputElement&&(this.textMaskInputElement.update(t),this.onChange(t=this.inputElement.value)))}_setupMask(t=!1){this.inputElement||(this.inputElement="INPUT"===this._elementRef.nativeElement.tagName.toUpperCase()?this._elementRef.nativeElement:this._elementRef.nativeElement.getElementsByTagName("INPUT")[0]),this.inputElement&&t&&(this.textMaskInputElement=(0,Wn.createTextMaskInputElement)(Object.assign({inputElement:this.inputElement},this.textMaskConfig)))}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this._handleInput(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(p.ve,8))},n.\u0275dir=e.lG2({type:n,selectors:[["","textMask",""]],hostBindings:function(t,i){1&t&&e.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},inputs:{textMaskConfig:["textMask","textMaskConfig"]},exportAs:["textMask"],features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0}]),e.TTD]}),n})(),Lt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();function Kn(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"section",2)(2,"button",3),e.NdJ("mousedown",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onButtonMouseDown(r,s.plusButtonDisabled))})("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.increaseValue())}),e.qZA(),e.TgZ(3,"button",4),e.NdJ("mousedown",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onButtonMouseDown(r,s.minusButtonDisabled))})("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.decreaseValue())}),e.qZA()(),e.BQk()}if(2&n){const t=o.ngIf,i=e.oxw(2);e.xp6(2),e.Q6J("icon",i.iconUp)("appearance",i.options.appearance)("title",t[0])("disabled",i.plusButtonDisabled)("focusable",!1),e.xp6(1),e.Q6J("icon",i.iconDown)("appearance",i.options.appearance)("disabled",i.minusButtonDisabled)("focusable",!1)("title",t[1])}}function ei(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Kn,4,10,"ng-container",1),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.minusTexts$))}}const ti=["*",[["input"]]],ni=["*","input"],Ut={icons:{up:"tuiIconPlus",down:"tuiIconMinus"},appearance:"textfield",hideButtons:!1,min:0,max:Number.MAX_SAFE_INTEGER,step:1,postfix:""},Jt=new e.OlP("[TUI_INPUT_COUNT_OPTIONS]: Default parameters for input count component",{factory:()=>Ut});let ii=(()=>{class n extends R.F9{constructor(t,i,r,s,u,h,g,S){super(t,i),this.appearance=r,this.textfieldSize=s,this.minusTexts$=u,this.isMobile=h,this.options=g,this.numberFormat=S,this.step=this.options.step,this.min=this.options.min,this.max=this.options.max,this.hideButtons=this.options.hideButtons,this.prefix="",this.postfix=this.options.postfix}getMask(t){return{mask:Zt({allowNegative:t,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator}),guide:!1}}get buttonsHidden(){return this.hideButtons||"table"===this.appearance}get iconUp(){return this.options.icons.up}get iconDown(){return this.options.icons.down}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get size(){return this.textfieldSize.size}get focused(){return(0,he.V8)(this.nativeFocusableElement)}get exampleText(){return String(this.min)}get computedValue(){return this.focused?this.nativeValue:this.formatNumber(this.value)}get minusButtonDisabled(){return!this.interactive||(0,w.Pc)(this.value)&&this.value<=this.min}get plusButtonDisabled(){return!this.interactive||(0,w.Pc)(this.value)&&this.value>=this.max}onButtonMouseDown(t,i=!1){i||!this.nativeFocusableElement||this.isMobile||(t.preventDefault(),this.nativeFocusableElement.focus())}onFocused(t){t||this.onBlur(),this.updateFocused(t)}onValueChange(){const t=this.capValue(this.nativeNumberValue);if(this.isNotNumber(t))return void this.updateValue(null);const i=this.formatNumber(t);this.nativeValue!==i&&(this.nativeValue=i),this.updateValue(t)}decreaseValue(){this.readOnly||this.safeUpdateValue((this.value||0)-this.step)}increaseValue(){this.readOnly||this.safeUpdateValue((this.value||0)+this.step)}onKeydown(t){switch(t.key){case"ArrowUp":case"Up":this.increaseValue(),t.preventDefault();break;case"ArrowDown":case"Down":this.decreaseValue(),t.preventDefault()}}get nativeNumberValue(){return parseInt(this.nativeValue.split(this.numberFormat.thousandSeparator).join(""),10)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){this.nativeFocusableElement&&(this.nativeFocusableElement.value=t)}safeUpdateValue(t){const i=(0,En.Ki)(t,this.min,this.max);this.updateValue(i),this.nativeValue=this.formatNumber(i)}capValue(t){const i=Math.min(t,this.max);return Number.isNaN(i)||i<this.min?null:i}onBlur(){if(this.isNotNumber(this.value))return void this.updateValue(null);const t=Math.max(this.nativeNumberValue||0,this.min),i=this.formatNumber(t);this.nativeValue=i,this.updateValue(t),this.primitiveTextfield&&(this.primitiveTextfield.value=i)}formatNumber(t){return this.isNotNumber(t)?"":Nt(t,this.numberFormat)}isNotNumber(t){return Number.isNaN(t)||!(0,w.Pc)(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(ge.jt),e.Y36(Pe.kI),e.Y36(It.mT),e.Y36(Q.fL),e.Y36(Jt),e.Y36(ge.HO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-input-count"]],viewQuery:function(t,i){if(1&t&&e.Gf(G.yc,5),2&t){let r;e.iGM(r=e.CRH())&&(i.primitiveTextfield=r.first)}},hostVars:3,hostBindings:function(t,i){2&t&&(e.uIk("data-size",i.size),e.ekj("_hide-buttons",i.buttonsHidden))},inputs:{step:"step",min:"min",max:"max",hideButtons:"hideButtons",prefix:"prefix",postfix:"postfix"},features:[e._Bn([(0,Q.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:ni,decls:4,vars:13,consts:[["tuiValueAccessor","",1,"t-textfield",3,"pseudoFocus","pseudoHover","pseudoActive","focusable","nativeId","prefix","postfix","disabled","readOnly","textMask","invalid","value","valueChange","keydown","focusedChange"],[4,"ngIf"],[1,"t-buttons"],["tuiIconButton","","type","button","automation-id","tui-input-count__plus-button","size","s",1,"t-button","t-button_plus",3,"icon","appearance","title","disabled","focusable","mousedown","click"],["tuiIconButton","","type","button","automation-id","tui-input-count__minus-button","size","s",1,"t-button","t-button_minus",3,"icon","appearance","disabled","focusable","title","mousedown","click"]],template:function(t,i){1&t&&(e.F$t(ti),e.TgZ(0,"tui-primitive-textfield",0),e.NdJ("valueChange",function(){return i.onValueChange()})("keydown",function(s){return i.onKeydown(s)})("focusedChange",function(s){return i.onFocused(s)}),e.Hsn(1),e.Hsn(2,1,["ngProjectAs","input",5,["input"]]),e.qZA(),e.YNc(3,ei,3,3,"ng-container",1)),2&t&&(e.Q6J("pseudoFocus",i.pseudoFocus)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("focusable",i.focusable)("nativeId",i.nativeId)("prefix",i.prefix)("postfix",i.postfix)("disabled",i.computedDisabled)("readOnly",i.readOnly)("textMask",i.getMask(i.min<0))("invalid",i.computedInvalid)("value",i.computedValue),e.xp6(3),e.Q6J("ngIf",!i.buttonsHidden))},dependencies:[G.yc,T.v0,G.B1,zt,jt,d.O5,d.Ov],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);border-radius:var(--tui-radius-m);height:var(--tui-height-m);color:var(--tui-text-01);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}[data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l)}.t-textfield[_ngcontent-%COMP%]{position:relative;border-radius:inherit;text-align:inherit;flex-grow:1;min-width:0}[_nghost-%COMP%]:not(._hide-buttons)   .t-textfield[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.t-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:.125rem;height:100%}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{display:flex;width:calc(var(--tui-height-m) * .75);height:calc(50% - .0625rem)}.t-buttons[_ngcontent-%COMP%]   .t-button_plus[_ngcontent-%COMP%]{margin-bottom:.125rem;border-radius:0 var(--tui-radius-m) 0 0}.t-buttons[_ngcontent-%COMP%]   .t-button_minus[_ngcontent-%COMP%]{border-radius:0 0 var(--tui-radius-m)}[data-size=l][_nghost-%COMP%]   .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{width:calc(var(--tui-height-l) * .75)}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"step",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"min",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"max",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideButtons",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"prefix",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"postfix",void 0),(0,c.gn)([l.UM],n.prototype,"getMask",null),n})(),oi=(()=>{class n extends rt.D1{onValueChange(){this.host.onValueChange()}ngAfterViewInit(){if(this.host.nativeFocusableElement){const{nativeFocusableElement:t}=this.host;t.autocomplete="off",t.inputMode="numeric",t.maxLength=t.maxLength>-1?t.maxLength:18}}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-input-count"]],features:[e._Bn([(0,ge.cp)(n)]),e.qOj]}),n})(),ri=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Lt,T.fN,G.KW,Pe.cn,Ht,we.wq]]}),n})();var si=a(710);let ai=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Fe=a(7846);const ui=["*"];let ci=(()=>{class n extends R.F9{constructor(t,i,r){super(t,i),this.modeDirective=r,this.contentAlign="right",this.hideCheckbox=!1,this.size="l"}get nativeFocusableElement(){return this.checkbox?this.checkbox.nativeFocusableElement:null}get checked(){return!1!==this.value&&this.hideCheckbox}get checkboxSize(){return"l"===this.size?"l":"m"}get focused(){return(0,he.V8)(this.nativeFocusableElement)}get appearance(){var t;return null!==(t=this.modeDirective)&&void 0!==t&&t.mode?this.checked?"primary":"secondary":this.checked?"whiteblock-active":"whiteblock"}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(Ke.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox-block"]],viewQuery:function(t,i){if(1&t&&e.Gf(Re,5),2&t){let r;e.iGM(r=e.CRH())&&(i.checkbox=r.first)}},hostVars:6,hostBindings:function(t,i){2&t&&(e.uIk("data-tui-host-align",i.contentAlign)("data-size",i.size),e.ekj("_hidden_checkbox",i.hideCheckbox)("_active",i.checked))},inputs:{contentAlign:"contentAlign",hideCheckbox:"hideCheckbox",size:"size"},features:[e._Bn([(0,Q.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:ui,decls:7,vars:15,consts:[[1,"t-wrapper"],["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],[1,"t-content-wrapper"],[1,"t-content"],[1,"t-view",3,"disabled","nativeId","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","focusable","ngModel","ngModelChange","focusedChange","focusVisibleChange"],[1,"t-label"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"tui-checkbox",4),e.NdJ("ngModelChange",function(s){return i.onModelChange(s)})("focusedChange",function(s){return i.onFocused(s)})("focusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA(),e.TgZ(5,"div",5),e.Hsn(6),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("active",i.pseudoActive)("invalid",i.computedInvalid),e.xp6(3),e.Q6J("disabled",i.computedDisabled||i.readOnly)("nativeId",i.nativeId)("pseudoInvalid",i.computedInvalid)("pseudoFocus",!1)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("size",i.checkboxSize)("focusable",i.focusable)("ngModel",i.value))},dependencies:[Re,Fe.o,p.JJ,p.On],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:inline-block;vertical-align:top;border-radius:var(--tui-radius-m)}[data-size=m][_nghost-%COMP%], [data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{position:relative;border-radius:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.t-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}[data-size=s][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-l)}.t-content[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:inherit}[data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{flex-direction:row-reverse}[data-size=s][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .5rem 0 1rem}[data-size=s]._hidden_checkbox[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .75rem}[data-size=m][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .75rem 0 1rem}[data-size=m]._hidden_checkbox[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=l]._hidden_checkbox[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 2.25rem}.t-view[_ngcontent-%COMP%]{margin-top:.75rem;margin-right:.75rem;align-self:flex-start}[data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:0}[data-size=s][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=m][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.875rem}[data-size=l][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:1rem}._hidden_checkbox[_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{position:absolute;height:1px;width:1px;margin:-1px;border:0;padding:0;overflow:hidden;clip:rect(0,0,0,0);-webkit-clip-path:inset(0);clip-path:inset(0)}.t-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}._hidden_checkbox[_nghost-%COMP%]   .t-label[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"contentAlign",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideCheckbox",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),li=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.u5,si.VE,ai,_t,Fe.W]]}),n})();var di=a(6942);let pi=(()=>{class n{get query(){return this.accessor.nativeFocusableElement&&this.accessor.nativeFocusableElement.value||""}filter(t,i,r,s){return t?(0,di.fR)(t)?this.filterFlat(t,i,r,s):this.filter2d(t,i,r,s):null}filterFlat(t,i,r,s){const u=this.getMatch(t,r,s);return(0,w.Pc)(u)?t:t.filter(h=>i(h,s,r))}filter2d(t,i,r,s){const u=t.find(h=>(0,w.Pc)(this.getMatch(h,r,s)));return(0,w.Pc)(u)?t:t.map(h=>this.filterFlat(h,i,r,s))}getMatch(t,i,r){return t.find(s=>i(s).toLocaleLowerCase()===r.toLocaleLowerCase())}}return(0,c.gn)([l.UM],n.prototype,"filter",null),n})(),hi=(()=>{class n extends pi{constructor(t){super(),this.accessor=t}transform(t,i){return this.filter(t,j.LQ,i,this.query)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q.KZ,16))},n.\u0275pipe=e.Yjl({name:"tuiFilterByInputWith",type:n,pure:!1}),n})(),gi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),mi=(()=>{class n{transform(t){return({$implicit:i})=>t(i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"tuiStringifyContent",type:n,pure:!0}),n})(),fi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();function vi(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",8),e.ALo(1,"tuiFilterByInputWith"),e.ALo(2,"tuiStringifyContent")),2&n){const t=e.oxw();e.Q6J("items",e.xi3(1,2,t.allMonsters,t.stringifySearch))("itemContent",e.lcZ(2,5,t.stringify))}}function _i(n,o){if(1&n&&(e.TgZ(0,"tui-checkbox-block",19),e._uU(1," Draw extra card "),e._UZ(2,"tui-tooltip",20),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("formControl",t.controls.drawExtra)}}function Ci(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",9)(1,"div",10),e._UZ(2,"img",11),e.TgZ(3,"div",12)(4,"div",13),e._uU(5),e.TgZ(6,"tui-svg",14),e.NdJ("click",function(){const s=e.CHM(t).index,u=e.oxw();return e.KtG(u.remove(s))}),e.qZA()(),e.TgZ(7,"tui-input-count",15),e._uU(8," Level ajustment "),e.qZA()()(),e.TgZ(9,"div",16)(10,"tui-checkbox-block",17),e._uU(11,"Is ally"),e.qZA(),e.YNc(12,_i,3,1,"tui-checkbox-block",18),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,r=e.oxw();e.xp6(2),e.Q6J("src","assets/images/ghs/monster/thumbnail/"+r.addedMonsters[i].edition+"-"+r.addedMonsters[i].name+".png",e.LSH),e.xp6(3),e.hij(" ",r.addedMonsters[i].displayName," "),e.xp6(2),e.Q6J("formControl",t.controls.levelAdjustment)("min",-1)("max",7),e.xp6(2),e.Q6J("collapsed",!0),e.xp6(1),e.Q6J("formControl",t.controls.isAlly),e.xp6(2),e.Q6J("ngIf",r.isDrawExtraNeeded(r.addedMonsters[i]))}}class Ze extends dt{constructor(o,t,i){super(o,t,r=>r.monsters$,(r,s)=>r.updateMonsters(s),()=>qe({name:["",p.kI.required],levelAdjustment:[0],isAlly:[!1],drawExtra:[!1]})),this.monstersProvider=i,this.allMonsters=[],this.addedMonsters=[],this.stringify=r=>r.displayName,this.stringifySearch=r=>`${r.name} ${r.displayName}`,this.selectedMonster=null}ngOnInit(){this.monstersProvider.getAvailableMonsters().subscribe(o=>{this.allMonsters=o,this.reset()})}isDrawExtraNeeded(o){return-1!==this.addedMonsters.findIndex(t=>void 0!==t.deck&&t!==o&&t.deck===o.deck&&t.edition===o.edition)}addNewMonster(o){o&&(this.addNew(),this.form.controls.at(0)?.patchValue({name:o.name}),this.addedMonsters.unshift(o),setTimeout(()=>this.selectedMonster=null,0))}remove(o){this.addedMonsters.splice(o,1),super.remove(o)}reset(){this.addedMonsters=[];for(const o of this.savedModel){const t=this.allMonsters.find(i=>i.name===o.name);this.addedMonsters.push(t||{name:o.name,displayName:`<Unknown monster> ${o.name}`,edition:""})}super.reset()}}Ze.\u0275fac=function(o){return new(o||Ze)(e.Y36(_.gz),e.Y36(m.a3),e.Y36(ke))},Ze.\u0275cmp=e.Xpm({type:Ze,selectors:[["ghse-scenario-monsters-editor"]],features:[e._Bn([m.a3]),e.qOj],decls:13,vars:5,consts:[[1,"monster-search",3,"strict","stringify","ngModel","ngModelChange"],["tuiTextfield","","placeholder","Type a name"],[3,"items","itemContent",4,"tuiDataList"],[1,"monsters"],["class","monster-form",4,"ngFor","ngForOf"],[1,"form-row","buttons"],["tuiButton","","type","button",3,"disabled","click"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[3,"items","itemContent"],[1,"monster-form"],[1,"form-row","monster-info"],[1,"thumbnail",3,"src"],[1,"info-controls"],[1,"form-row","name"],["src","tuiIconTrashLarge",1,"delete",3,"click"],[1,"form-row",3,"formControl","min","max"],["tuiGroup","","orientation","vertical",1,"form-row","additional-info",3,"collapsed"],[3,"formControl"],["nativeId","drawExtra",3,"formControl",4,"ngIf"],["nativeId","drawExtra",3,"formControl"],["describeId","drawExtra","content","This monster shares the same deck as the other added monster. You can decide whether they will use the same ability card for a round (then leave the checkbox empty) or if this monster should draw another card (then tick the checkbox)"]],template:function(o,t){1&o&&(e.TgZ(0,"tui-combo-box",0),e.NdJ("ngModelChange",function(r){return t.selectedMonster=r})("ngModelChange",function(r){return t.addNewMonster(r)}),e._uU(1," Search monsters to add "),e._UZ(2,"input",1),e.YNc(3,vi,3,7,"tui-data-list-wrapper",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,Ci,13,8,"form",4),e.qZA(),e.TgZ(6,"form")(7,"div",5)(8,"div")(9,"button",6),e.NdJ("click",function(){return t.save()}),e._uU(10,"Save"),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return t.reset()}),e._uU(12," Reset "),e.qZA()()()()),2&o&&(e.Q6J("strict",!0)("stringify",t.stringify)("ngModel",t.selectedMonster),e.xp6(5),e.Q6J("ngForOf",t.form.controls),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[d.sg,d.O5,p._Y,p.JJ,p.JL,p.oH,T.v0,C.P,it.gX,Ct.eC,G.MB,Pt.w,xt,Dt,Nn,An,p.On,p.F,ii,oi,ci,hi,mi],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin-top:1.5rem;width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .monster-search[_ngcontent-%COMP%]{width:20rem}[_nghost-%COMP%]   .monsters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));gap:1rem}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .monster-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .monster-info[_ngcontent-%COMP%]   .info-controls[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .monster-info[_ngcontent-%COMP%]   .info-controls[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font:var(--tui-font-heading-6);display:flex;justify-content:space-between}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .additional-info[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:5rem;height:5rem;margin-right:1rem}"],changeDetection:0});class Ve{}Ve.\u0275fac=function(o){return new(o||Ve)},Ve.\u0275cmp=e.Xpm({type:Ve,selectors:[["ghse-scenario-rooms-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-rooms-editor works!"),e.qZA())}});class ze{}ze.\u0275fac=function(o){return new(o||ze)},ze.\u0275cmp=e.Xpm({type:ze,selectors:[["ghse-scenario-rules-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-rules-editor works!"),e.qZA())}});class He{}He.\u0275fac=function(o){return new(o||He)},He.\u0275cmp=e.Xpm({type:He,selectors:[["ghse-scenario-sections-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-sections-editor works!"),e.qZA())}});class Ie{constructor(o){this.serviceFactory=o}canActivateChild(o,t){const i=o.paramMap.get("id")??o.parent?.paramMap.get("id");return!!i&&(""===o.routeConfig?.path||this.serviceFactory.create(i).exists$)}}Ie.\u0275fac=function(o){return new(o||Ie)(e.LFG(x))},Ie.\u0275prov=e.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"});class ae{constructor(o){this.factory=o}resolve(o,t){const i=o.paramMap.get("id")??o.parent?.paramMap.get("id")??"new";return this.factory.create(i)}}ae.\u0275fac=function(o){return new(o||ae)(e.LFG(x))},ae.\u0275prov=e.Yz7({token:ae,factory:ae.\u0275fac,providedIn:Me});var Ge=a(9892),Rt=a(8421);const{isArray:Mi}=Array;var Yt=a(5403);var Pi=a(9468),xi=a(4482),wi=a(5698),je=a(4258);let Gt=(()=>{class n{constructor(t,i){this.tuiFocusableComponent=t,this.elementRef=i}get element(){var t;return(null===(t=this.tuiFocusableComponent)||void 0===t?void 0:t.nativeFocusableElement)||this.elementRef.nativeElement}get isTextFieldElement(){return this.element.matches("input, textarea")}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n}),n})(),Ii=(()=>{class n extends Gt{constructor(t,i,r){super(t,i),this.animationFrame$=r}setFocus(){this.isTextFieldElement?function yi(...n){return 1===(n=function Oi(n){return 1===n.length&&Mi(n[0])?n[0]:n}(n)).length?(0,Rt.Xf)(n[0]):new F.y(function Ti(n){return o=>{let t=[];for(let i=0;t&&!o.closed&&i<n.length;i++)t.push((0,Rt.Xf)(n[i]).subscribe((0,Yt.x)(o,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}o.next(r)})))}}(n))}((0,oe.H)(1e3),this.animationFrame$.pipe((0,Pi.p)(j.Yg),(0,M.U)(()=>this.element.closest(".ng-animating")),function ki(n){return(0,xi.e)((o,t)=>{let i=!1,r=0;o.subscribe((0,Yt.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(Boolean),(0,wi.q)(1))).subscribe(()=>this.element.focus()):this.element.focus()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q.KZ,10),e.Y36(e.SBq),e.Y36(Ge.L1))},n.\u0275dir=e.lG2({type:n,features:[e.qOj]}),n})(),Di=(()=>{class n extends Gt{constructor(t,i,r,s,u){super(t,i),this.renderer=r,this.ngZone=s,this.windowRef=u,this.patchCssStyles()}setFocus(){this.isTextFieldElement?this.ngZone.runOutsideAngular(()=>this.iosWebkitAutofocus()):this.element.focus()}iosWebkitAutofocus(){var t;const i=this.makeFakeInput(),r=this.getDurationTimeBeforeFocus();let s=0,u=0;const h=()=>i.focus({preventScroll:!0}),g=()=>{clearTimeout(s),s=this.windowRef.setTimeout(()=>{clearTimeout(u),i.removeEventListener("blur",h),i.removeEventListener("focus",g),u=this.windowRef.setTimeout(()=>{this.element.focus({preventScroll:!1}),i.remove()},r)})};i.addEventListener("blur",h,{once:!0}),i.addEventListener("focus",g),this.insideDialog()?this.windowRef.document.body.appendChild(i):null===(t=this.element.parentElement)||void 0===t||t.appendChild(i),i.focus({preventScroll:!0})}makeFakeInput(){const t=this.renderer.createElement("input"),i=this.element.getBoundingClientRect();return t.style.height=(0,je.O)(i.height),t.style.width=(0,je.O)(i.width/2),t.style.position="fixed",t.style.opacity="0",t.style.fontSize=(0,je.O)(16),t.readOnly=!0,t.style.top=(0,je.O)(i.top),t.style.left=(0,je.O)(i.left),t}getDurationTimeBeforeFocus(){return parseFloat(this.windowRef.getComputedStyle(this.element).getPropertyValue("--tui-duration"))||0}insideDialog(){return!!this.element.closest("tui-dialog")}patchCssStyles(){const t=this.windowRef.document;for(const i of[t.documentElement,t.body])i.style.setProperty("overflow","auto"),i.style.setProperty("height","100%")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q.KZ,10),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(Ge.m9))},n.\u0275dir=e.lG2({type:n,features:[e.qOj]}),n})();const Qt=new e.OlP("[TUI_AUTOFOCUS_HANDLER]: Autofocusing handler"),Ai=[{provide:Qt,useFactory:(n,o,t,i,r,s,u)=>u?new Di(n,o,i,r,s):new Ii(n,o,t),deps:[[new e.FiY,new e.PiD,Q.KZ],e.SBq,Ge.L1,e.Qsj,e.R0b,Ge.m9,Q.FA]}];let Ni=(()=>{class n{constructor(t){this.handler=t,this.autoFocus=!0}ngAfterViewInit(){(function bi(n){return null!==n&&typeof n<"u"&&"false"!=`${n}`})(this.autoFocus)&&this.handler.setFocus()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Qt))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiAutoFocus",""]],inputs:{autoFocus:["tuiAutoFocus","autoFocus"]},features:[e._Bn(Ai)]}),n})(),Bi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Ei=a(3281);const Zi=["*"];let Vi=(()=>{class n{constructor(){this.name="tui-radio-group-"+n.index++}}return n.index=0,n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio-group"]],inputs:{name:"name"},ngContentSelectors:Zi,decls:1,vars:0,template:function(t,i){1&t&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"name",void 0),n})();const zi=["focusableElement"];function Hi(n,o){if(1&n&&e._UZ(0,"div",4),2&n){const t=e.oxw();e.Q6J("@tuiScaleIn",t.animation)}}const $t={size:"m",appearances:{unchecked:"outline",checked:"primary"}},qt=new e.OlP("[TUI_RADIO_OPTIONS]: Default parameters for radio component",{factory:()=>$t});let Wt=(()=>{class n extends R.F9{constructor(t,i,r,s,u){super(t,i),this.animationOptions=r,this.options=s,this.radioGroup=u,this.identityMatcher=j.bg,this.name=null,this.size=this.options.size,this.pseudoDisabled=!1,this.animation=Object.assign({value:""},this.animationOptions)}get appearance(){return this.checked?this.options.appearances.checked:this.options.appearances.unchecked}get computedDisabled(){return this.disabled||this.pseudoDisabled}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,he.V8)(this.nativeFocusableElement)}get checked(){return null===this.value?null===this.item:null!=this.item&&this.identityMatcher(this.value,this.item)}get computedName(){return this.name||this.radioGroupName||this.controlName||""}get isFocusable(){return!this.readOnly&&this.computedFocusable}onChecked(t){t&&this.updateValue(void 0!==this.item?this.item:this.fallbackValue)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}get radioGroupName(){return null===this.radioGroup?null:this.radioGroup.name}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(ge.Pw),e.Y36(qt),e.Y36(Vi,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio"]],viewQuery:function(t,i){if(1&t&&e.Gf(zi,5),2&t){let r;e.iGM(r=e.CRH())&&(i.focusableElement=r.first)}},hostVars:3,hostBindings:function(t,i){2&t&&(e.uIk("data-size",i.size),e.ekj("_disabled",i.computedDisabled))},inputs:{item:"item",identityMatcher:"identityMatcher",name:"name",size:"size",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,Q.FT)(n),(0,R.wB)(n)]),e.qOj],decls:4,vars:12,consts:[["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],["class","t-mark",4,"ngIf"],["type","radio",1,"t-native",3,"id","disabled","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-mark"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Hi,1,1,"div",1),e.TgZ(2,"input",2,3),e.NdJ("tuiFocusedChange",function(s){return i.onFocused(s)})("tuiCheckedChange",function(s){return i.onChecked(s)})("tuiFocusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA()()),2&t&&(e.Q6J("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("active",i.pseudoActive)("invalid",i.computedInvalid),e.xp6(1),e.Q6J("ngIf",i.checked),e.xp6(1),e.Q6J("id",i.id)("disabled",i.computedDisabled)("tuiChecked",i.checked)("tuiFocusable",i.isFocusable),e.uIk("name",i.computedName))},dependencies:[Fe.o,d.O5,pt,Je.t,gt,ft],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0;border-radius:100%}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-mark[_ngcontent-%COMP%]{position:absolute;background-color:currentColor;border-radius:100%}[data-size=m][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.25rem;width:.5rem;height:.5rem}[data-size=l][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.4375rem;width:.625rem;height:.625rem}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-native[_ngcontent-%COMP%]{cursor:default}"],data:{animation:[Ei.gI]},changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"name",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"pseudoDisabled",void 0),n})(),ji=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,ht,Je.u,mt,vt,Fe.W]]}),n})();const Li=["*"];let Ui=(()=>{class n extends R.F9{constructor(t,i,r){super(t,i),this.modeDirective=r,this.identityMatcher=j.bg,this.contentAlign="right",this.size="l",this.hideRadio=!1,this.pseudoDisabled=!1}get nativeFocusableElement(){return this.radio?this.radio.nativeFocusableElement:null}get focused(){return!!this.radio&&this.radio.focused}get computedDisabled(){return this.disabled||this.pseudoDisabled}get checked(){return this.value===this.item&&this.hideRadio}get checkboxSize(){return"l"===this.size?"l":"m"}get appearance(){var t;return null!==(t=this.modeDirective)&&void 0!==t&&t.mode?this.checked?"primary":"secondary":this.checked?"whiteblock-active":"whiteblock"}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(Ke.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio-block"]],viewQuery:function(t,i){if(1&t&&e.Gf(Wt,5),2&t){let r;e.iGM(r=e.CRH())&&(i.radio=r.first)}},hostVars:8,hostBindings:function(t,i){2&t&&(e.uIk("data-tui-host-align",i.contentAlign)("data-size",i.size),e.ekj("_hidden_radio",i.hideRadio)("_disabled",i.computedDisabled)("_active",i.checked))},inputs:{item:"item",identityMatcher:"identityMatcher",contentAlign:"contentAlign",size:"size",hideRadio:"hideRadio",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,Q.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:Li,decls:7,vars:19,consts:[[1,"t-wrapper"],["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],[1,"t-content-wrapper"],[1,"t-content"],[1,"t-view",3,"focusable","identityMatcher","item","name","nativeId","readOnly","pseudoDisabled","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","ngModel","ngModelChange","focusedChange","focusVisibleChange"],[1,"t-label"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"tui-radio",4),e.NdJ("ngModelChange",function(s){return i.onModelChange(s)})("focusedChange",function(s){return i.onFocused(s)})("focusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA(),e.TgZ(5,"div",5),e.Hsn(6),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("active",i.pseudoActive)("invalid",i.computedInvalid),e.xp6(3),e.Q6J("focusable",i.focusable)("identityMatcher",i.identityMatcher)("item",i.item)("name",i.computedName||"")("nativeId",i.nativeId)("readOnly",i.readOnly)("pseudoDisabled",i.computedDisabled)("pseudoInvalid",i.computedInvalid)("pseudoFocus",!1)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("size",i.checkboxSize)("ngModel",i.value))},dependencies:[Wt,Fe.o,p.JJ,p.On],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:inline-block;vertical-align:top;border-radius:var(--tui-radius-m)}[data-size=m][_nghost-%COMP%], [data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{position:relative;border-radius:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}.t-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}[data-size=s][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-l)}.t-content[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:inherit}[data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{flex-direction:row-reverse}[data-size=s][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .5rem 0 1rem}[data-size=s]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .75rem}[data-size=m][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .75rem 0 1rem}[data-size=m]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=l]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 2.25rem}.t-view[_ngcontent-%COMP%]{margin-top:.75rem;margin-right:.75rem;align-self:flex-start}[data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:0}[data-size=s][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=m][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.875rem}[data-size=l][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:1rem}[data-size=l][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:1rem;margin-right:0}._hidden_radio[_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{position:absolute;height:1px;width:1px;margin:-1px;border:0;padding:0;overflow:hidden;clip:rect(0,0,0,0);-webkit-clip-path:inset(0);clip-path:inset(0)}.t-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}._hidden_radio[_nghost-%COMP%]   .t-label[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"contentAlign",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideRadio",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"pseudoDisabled",void 0),n})(),Ji=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.u5,ji,Fe.W]]}),n})();var Xt=a(7721);function Ri(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=o.polymorpheusOutlet;e.xp6(1),e.hij(" ",t," ")}}function Yi(n,o){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,Ri,2,1,"ng-container",5),e.qZA()),2&n){e.oxw();const t=e.MAs(8);e.xp6(1),e.Q6J("polymorpheusOutlet",t)}}function Gi(n,o){1&n&&e.GkF(0)}function Qi(n,o){1&n&&e.Hsn(0,2)}const $i=["*",[["input"]],[["tuiContent"]]],qi=function(n,o,t,i,r){return[n,o,t,i,r]},Wi=["*","input","tuiContent"];let Ki=(()=>{class n extends R.F9{constructor(t,i,r,s){super(t,i),this.numberFormat=r,this.isIOS=s,this.unfinishedValue="",this.min=Number.MIN_SAFE_INTEGER,this.max=Number.MAX_SAFE_INTEGER,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.polymorpheusValueContent=j.Mm,this.mask=(u,h,g,S)=>({mask:Zt({allowNegative:u,decimalLimit:g,allowDecimal:"never"!==h,requireDecimal:"always"===h,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:$n(this.numberFormat)}),pipe:zn("always"===h?g:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,S,u,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return this.isIOS&&this.isNegativeAllowed?"text":"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(t){const i=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;i.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(t.preventDefault(),r.selectionStart++)}onValueChange(t){if(function qn(n){switch(n){case"":case j.fv:case",":case`${j.fv},`:return!0;default:return!1}}(t))return void this.updateValue(null);if(this.isNativeValueNotFinished)return void(this.unfinishedValue=t);this.unfinishedValue=null;const i=this.absoluteCapInputValue(t);null===i||Number.isNaN(i)||(this.updateValue(i),i!==Ye(t,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(t){if($.YZ.includes(t.key)){if("never"===this.decimal)return void t.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(t.preventDefault(),this.setCaretAfterComma())}}onFocused(t){if(this.updateFocused(t),t)return;const i=this.unfinishedValue?Ye(this.unfinishedValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator):this.nativeNumberValue;if(this.unfinishedValue=null,Number.isNaN(i))return void this.clear();const r=Math.min(this.max,Math.max(this.min,i));this.updateValue(r),this.nativeValue=this.formattedValue}getFormattedValue(t){const r=Math.abs(t)%1>0;let s="always"===this.decimal||r&&"never"!==this.decimal?this.precision:0;const u=r?At(t,this.precision):"";return this.focused&&"always"!==this.decimal&&(s=u.length),Nt(t,Object.assign(Object.assign({},this.numberFormat),{decimalLimit:s}))}get isNativeValueNotFinished(){const t=this.nativeNumberValue;return t<0?t>this.max:t<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=t,this.nativeFocusableElement.value=t)}get nativeNumberValue(){return Ye(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(t){const i=Ye(t,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=i<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),i):Math.min(i,Math.min(this.max,Number.MAX_SAFE_INTEGER));return Number.isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const t=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(t,t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(ge.HO),e.Y36(Q.FA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-input-number"]],contentQueries:function(t,i,r){if(1&t&&e.Suo(r,we.Li,5),2&t){let s;e.iGM(s=e.CRH())&&(i.polymorpheusValueContent=s)}},viewQuery:function(t,i){if(1&t&&e.Gf(G.yc,5),2&t){let r;e.iGM(r=e.CRH())&&(i.primitiveTextfield=r.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown.0",function(s){return i.onZero(s)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[e._Bn([(0,Q.FT)(n),(0,R.wB)(n)]),e.qOj],ngContentSelectors:Wi,decls:9,vars:27,consts:[["tuiValueAccessor","",1,"t-textfield",3,"pseudoHover","pseudoFocus","pseudoActive","invalid","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","focusedChange","keydown"],["ngProjectAs","tuiContent","class","t-value-content",5,["tuiContent"],4,"ngIf"],[4,"ngIf"],["valueContent",""],["ngProjectAs","tuiContent",5,["tuiContent"],1,"t-value-content"],[4,"polymorpheusOutlet"]],template:function(t,i){1&t&&(e.F$t($i),e.TgZ(0,"tui-primitive-textfield",0),e.NdJ("valueChange",function(s){return i.onValueChange(s)})("focusedChange",function(s){return i.onFocused(s)})("keydown",function(s){return i.onKeyDown(s)}),e.ALo(1,"tuiMapper"),e.Hsn(2),e.Hsn(3,1,["ngProjectAs","input",5,["input"]]),e.YNc(4,Yi,2,1,"div",1),e.qZA(),e.YNc(5,Gi,1,0,"ng-container",2),e.ALo(6,"async"),e.YNc(7,Qi,1,0,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("pseudoHover",i.pseudoHover)("pseudoFocus",i.computedFocused)("pseudoActive",i.pseudoActive)("invalid",i.computedInvalid)("readOnly",i.readOnly)("disabled",i.computedDisabled)("textMask",e.G7q(1,13,e.qbA(21,qi,i.isNegativeAllowed,i.mask,i.decimal,i.precision,i.nativeFocusableElement)))("value",i.computedValue)("prefix",i.prefix)("postfix",i.postfix)("focusable",i.focusable),e.xp6(4),e.Q6J("ngIf",i.polymorpheusValueContent.length),e.xp6(1),e.Q6J("ngIf",e.lcZ(6,19,i.polymorpheusValueContent.changes)))},dependencies:[G.yc,G.B1,zt,jt,d.O5,we.Li,Xt.c,d.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"min",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"max",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"decimal",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"precision",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"prefix",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"postfix",void 0),n})(),eo=(()=>{class n extends rt.D1{get value(){return this.host.computedValue}onValueChange(t){this.host.onValueChange(t)}ngDoCheck(){this.host.nativeFocusableElement&&(this.host.nativeFocusableElement.maxLength=this.host.calculatedMaxLength,this.host.nativeFocusableElement.inputMode="decimal")}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-input-number"]],features:[e._Bn([(0,ge.cp)(n)]),e.qOj]}),n})(),to=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Lt,Xt.I,G.KW,Pe.cn,Ht,we.wq]]}),n})();function no(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"You can use mathematical expressions for the above fields. Substitution list:"),e.qZA(),e.TgZ(2,"ul")(3,"li"),e._uU(4,"L \u2014 scenario level"),e.qZA(),e.TgZ(5,"li"),e._uU(6,"C \u2014 characters count"),e.qZA(),e.TgZ(7,"li"),e._uU(8,"x - multiply symbol ('*' works as well)"),e.qZA()(),e.TgZ(9,"p"),e._uU(10," You may also use functions such as "),e.TgZ(11,"i"),e._uU(12,"math.floor"),e.qZA(),e._uU(13," and "),e.TgZ(14,"i"),e._uU(15,"math.ceil"),e.qZA(),e._uU(16," using following format as an example: [(2+L)xC/2{%math.floor}] "),e.qZA())}const io=function(){return[]};function oo(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",7)(1,"div",8)(2,"tui-input",9),e._uU(3,"Marker "),e._UZ(4,"input",10),e.qZA(),e.TgZ(5,"div",11)(6,"tui-input",12),e._uU(7,"Name"),e.qZA(),e._UZ(8,"tui-error",13),e.ALo(9,"async"),e.ALo(10,"tuiFieldError"),e.qZA(),e.TgZ(11,"tui-svg",14),e.NdJ("click",function(){const s=e.CHM(t).index,u=e.oxw();return e.KtG(u.remove(s))}),e.qZA()(),e.TgZ(12,"div",15)(13,"tui-radio-block",16)(14,"div",17),e._UZ(15,"tui-svg",18),e._uU(16," Objective "),e.qZA()(),e.TgZ(17,"tui-radio-block",16)(18,"div",17),e._UZ(19,"tui-svg",19),e._uU(20," Escort"),e.qZA()()(),e.TgZ(21,"div",20)(22,"div",21)(23,"tui-input",22),e._uU(24,"Health"),e.qZA(),e.TgZ(25,"tui-input",23),e._uU(26,"Count"),e.qZA(),e.TgZ(27,"tui-input-number",24),e._uU(28," Initiative "),e.qZA(),e._UZ(29,"tui-tooltip",25),e.qZA(),e.YNc(30,no,17,0,"ng-template",null,26,e.W1O),e.qZA()()}if(2&n){const t=o.$implicit,i=e.MAs(31);e.Q6J("formGroup",t),e.xp6(2),e.Q6J("formControl",t.controls.marker),e.xp6(4),e.Q6J("formControl",t.controls.name),e.xp6(2),e.Q6J("formControl",t.controls.name)("error",e.lcZ(9,15,e.lcZ(10,17,e.DdM(19,io)))),e.xp6(5),e.Q6J("formControl",t.controls.escort)("item",!1),e.xp6(4),e.Q6J("formControl",t.controls.escort)("item",!0),e.xp6(6),e.Q6J("formControl",t.controls.health),e.xp6(2),e.Q6J("formControl",t.controls.count),e.xp6(2),e.Q6J("formControl",t.controls.initiative)("min",1)("max",99),e.xp6(2),e.Q6J("content",i)}}class Le extends dt{constructor(o,t){super(o,t,i=>i.objectives$,(i,r)=>i.updateObjectives(r),()=>qe({name:["",p.kI.required],health:[""],escort:[!1],initiative:[null,[p.kI.min(1),p.kI.max(99)]],count:[""],marker:["",p.kI.maxLength(1)]})),this.reset()}}Le.\u0275fac=function(o){return new(o||Le)(e.Y36(_.gz),e.Y36(m.a3))},Le.\u0275cmp=e.Xpm({type:Le,selectors:[["ghse-scenario-objectives"]],features:[e._Bn([m.a3]),e.qOj],decls:12,vars:2,consts:[[1,"new-buttons"],["tuiButton","","type","button","icon","tuiIconPlusLarge",3,"click"],[1,"objectives"],["class","objective-form",3,"formGroup",4,"ngFor","ngForOf"],[1,"form-row","buttons"],["tuiButton","","type","button",3,"disabled","click"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[1,"objective-form",3,"formGroup"],[1,"form-row","multi-field"],["maxlength","1",1,"marker",3,"formControl"],["tuiTextfield","","maxlength","1"],[1,"row-errors","name"],["tuiAutoFocus","","required","",3,"formControl"],[3,"formControl","error"],["src","tuiIconTrashLarge",1,"delete",3,"click"],["tuiGroup","",1,"form-row"],[3,"formControl","item"],[1,"objective-type"],["src","assets/images/ghs/objective/objective.svg","width","32"],["src","assets/images/ghs/objective/escort.svg"],[1,"form-row"],[1,"multi-field","expression-fields"],[1,"health",3,"formControl"],[1,"count",3,"formControl"],[1,"initiative",3,"formControl","min","max"],[3,"content"],["expressionsDescription",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return t.addNew()}),e._uU(2,"Add objective"),e.qZA()(),e.TgZ(3,"div",2),e.YNc(4,oo,32,20,"form",3),e.qZA(),e.TgZ(5,"form")(6,"div",4)(7,"div")(8,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(9,"Save"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return t.reset()}),e._uU(11," Reset "),e.qZA()()()()),2&o&&(e.xp6(4),e.Q6J("ngForOf",t.form.controls),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[d.sg,p._Y,p.JJ,p.JL,p.Q7,p.nD,p.oH,p.sg,T.v0,C.P,Xe.v,Ue.K3,Ue.wU,G.MB,Pt.w,xt,Ui,Ki,eo,Ni,p.F,d.Ov,tt.Ag],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin-top:1.5rem;width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]{width:42rem;display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-items:center;justify-content:space-between}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:2rem}[_nghost-%COMP%]   .objectives[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(30rem,1fr));gap:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{margin-right:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-right:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .health[_ngcontent-%COMP%]{flex-grow:2}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .initiative[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   tui-tooltip[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expressions-description[_ngcontent-%COMP%]{margin-top:.5rem;color:var(--tui-text-02)}[_nghost-%COMP%]   .objective-type[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .objective-type[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:2rem;height:2rem;margin-right:1rem}"],changeDetection:0});const ro=[{path:"",pathMatch:"full",component:W},{path:":id",component:Ne,canActivateChild:[Ie],children:[{path:"",pathMatch:"full",component:Be,resolve:{detailsService:ae}},{path:"properties",component:Ee,resolve:{detailsService:ae}},{path:"objectives",component:Le,resolve:{detailsService:ae}},{path:"monsters",component:Ze,resolve:{detailsService:ae}},{path:"rooms",component:Ve,resolve:{detailsService:ae}},{path:"rules",component:ze,resolve:{detailsService:ae}},{path:"sections",component:He,resolve:{detailsService:ae}}]}];class De{}De.\u0275fac=function(o){return new(o||De)},De.\u0275mod=e.oAB({type:De}),De.\u0275inj=e.cJS({imports:[_.Bz.forChild(ro),_.Bz]});var so=a(4466);class Ae{}Ae.\u0275fac=function(o){return new(o||Ae)},Ae.\u0275mod=e.oAB({type:Ae}),Ae.\u0275inj=e.cJS({imports:[d.ez,De,Me,so.m,ln,fn,fe,bt.cB,Pn,Ji,to,Bi,Bn,gi,fi,p.u5,ri,li]})},2243:function(st){st.exports=function(ie){function a(_){if(d[_])return d[_].exports;var e=d[_]={exports:{},id:_,loaded:!1};return ie[_].call(e.exports,e,e.exports,a),e.loaded=!0,e.exports}var d={};return a.m=ie,a.c=d,a.p="",a(0)}([function(ie,a,d){"use strict";function _(Z){return Z&&Z.__esModule?Z:{default:Z}}Object.defineProperty(a,"__esModule",{value:!0});var e=d(3);Object.defineProperty(a,"conformToMask",{enumerable:!0,get:function(){return _(e).default}});var k=d(2);Object.defineProperty(a,"adjustCaretPosition",{enumerable:!0,get:function(){return _(k).default}});var M=d(5);Object.defineProperty(a,"createTextMaskInputElement",{enumerable:!0,get:function(){return _(M).default}})},function(ie,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.placeholderChar="_",a.strFunction="function"},function(ie,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function d(k){var M=k.previousConformedValue,Z=void 0===M?e:M,N=k.previousPlaceholder,O=void 0===N?e:N,y=k.currentCaretPosition,T=void 0===y?0:y,v=k.conformedValue,C=k.rawValue,c=k.placeholderChar,F=k.placeholder,ue=k.indexesOfPipedChars,D=void 0===ue?_:ue,Ce=k.caretTrapIndexes,X=void 0===Ce?_:Ce;if(0===T||!C.length)return 0;var I=Z.length,m=F.length,l=v.length,w=C.length-I,b=w>0;if(w>1&&!b&&0!==I)return T;var A=0,ce=void 0,L=void 0;if(!b||Z!==v&&v!==F){var K=v.toLowerCase(),P=C.toLowerCase().substr(0,T).split(e).filter(function(x){return-1!==K.indexOf(x)});L=P[P.length-1];var le=O.substr(0,P.length).split(e).filter(function(x){return x!==c}).length,V=F.substr(0,P.length).split(e).filter(function(x){return x!==c}).length;!b&&(V!==le||void 0!==O[P.length-1]&&void 0!==F[P.length-2]&&O[P.length-1]!==c&&O[P.length-1]!==F[P.length-1]&&O[P.length-1]===F[P.length-2])&&le>0&&F.indexOf(L)>-1&&void 0!==C[T]&&(ce=!0,L=C[T]);for(var ve=D.map(function(x){return K[x]}).filter(function(x){return x===L}).length,pe=P.filter(function(x){return x===L}).length,be=F.substr(0,F.indexOf(c)).split(e).filter(function(x,Te){return x===L&&C[Te]!==x}).length+pe+ve+(ce?1:0),W=0,U=0;U<l&&(A=U+1,K[U]===L&&W++,!(W>=be));U++);}else A=T-w;if(b){for(var H=A,E=A;E<=m;E++)if(F[E]===c&&(H=E),F[E]===c||-1!==X.indexOf(E)||E===m)return H}else if(ce){for(var ee=A-1;ee>=0;ee--)if(v[ee]===L||-1!==X.indexOf(ee)||0===ee)return ee}else for(var te=A;te>=0;te--)if(F[te-1]===c||-1!==X.indexOf(te)||0===te)return te};var _=[],e=""},function(ie,a,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(O){return typeof O}:function(O){return O&&"function"==typeof Symbol&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O};a.default=function _(){var O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(0,k.isArray)(y)){if((typeof y>"u"?"undefined":e(y))!==M.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");y=y(O,T),y=(0,k.processCaretTraps)(y).maskWithoutCaretTraps}var v=T.guide,C=void 0===v||v,c=T.previousConformedValue,F=void 0===c?N:c,ue=T.placeholderChar,D=void 0===ue?M.placeholderChar:ue,Ce=T.placeholder,X=void 0===Ce?(0,k.convertMaskToPlaceholder)(y,D):Ce,I=T.keepCharPositions,m=!1===C&&void 0!==F,l=O.length,w=F.length,b=X.length,de=y.length,Y=l-w,oe=Y>0,A=T.currentCaretPosition+(oe?-Y:0),ce=A+Math.abs(Y);if(!0===I&&!oe){for(var L=N,K=A;K<ce;K++)X[K]===D&&(L+=D);O=O.slice(0,A)+L+O.slice(A,l)}for(var z=O.split(N).map(function(ee,te){return{char:ee,isNew:te>=A&&te<ce}}),B=l-1;B>=0;B--){var P=z[B].char;P!==D&&P===X[B>=A&&w===de?B-Y:B]&&z.splice(B,1)}var V=N,re=!1;e:for(var se=0;se<b;se++){var fe=X[se];if(fe===D){if(z.length>0)for(;z.length>0;){var ve=z.shift(),pe=ve.char,ye=ve.isNew;if(pe===D&&!0!==m){V+=D;continue e}if(y[se].test(pe)){if(!0===I&&!1!==ye&&F!==N&&!1!==C&&oe){for(var be=z.length,W=null,U=0;U<be;U++){var J=z[U];if(J.char!==D&&!1===J.isNew)break;if(J.char===D){W=U;break}}null!==W?(V+=pe,z.splice(W,1)):se--}else V+=pe;continue e}re=!0}!1===m&&(V+=X.substr(se,b));break}V+=fe}if(m&&!1===oe){for(var H=null,E=0;E<V.length;E++)X[E]===D&&(H=E);V=null!==H?V.substr(0,H+1):N}return{conformedValue:V,meta:{someCharsRejected:re}}};var k=d(4),M=d(1),Z=[],N=""},function(ie,a,d){"use strict";function e(v){return Array.isArray&&Array.isArray(v)||v instanceof Array}Object.defineProperty(a,"__esModule",{value:!0}),a.convertMaskToPlaceholder=function _(){var v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.placeholderChar;if(!e(v))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==v.indexOf(C))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(C)+"\n\nThe mask that was received is: "+JSON.stringify(v));return v.map(function(c){return c instanceof RegExp?C:c}).join("")},a.isArray=e,a.isString=function k(v){return"string"==typeof v||v instanceof String},a.isNumber=function M(v){return"number"==typeof v&&void 0===v.length&&!isNaN(v)},a.isNil=function Z(v){return typeof v>"u"||null===v},a.processCaretTraps=function N(v){for(var C=[],c=void 0;-1!==(c=v.indexOf(T));)C.push(c),v.splice(c,1);return{maskWithoutCaretTraps:v,indexes:C}};var O=d(1),y=[],T="[]"},function(ie,a,d){"use strict";function _(f){return f&&f.__esModule?f:{default:f}}function k(f,I){document.activeElement===f&&(Ce?X(function(){return f.setSelectionRange(I,I,ue)},0):f.setSelectionRange(I,I,ue))}function M(f){if((0,C.isString)(f))return f;if((0,C.isNumber)(f))return String(f);if(null==f)return F;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(f))}Object.defineProperty(a,"__esModule",{value:!0});var Z=Object.assign||function(f){for(var I=1;I<arguments.length;I++){var m=arguments[I];for(var l in m)Object.prototype.hasOwnProperty.call(m,l)&&(f[l]=m[l])}return f},N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};a.default=function e(f){var I={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:I,update:function(m){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,w=l.inputElement,b=l.mask,de=l.guide,Y=l.pipe,oe=l.placeholderChar,A=void 0===oe?c.placeholderChar:oe,ce=l.keepCharPositions,L=void 0!==ce&&ce,K=l.showMask,z=void 0!==K&&K;if(typeof m>"u"&&(m=w.value),m!==I.previousConformedValue){(typeof b>"u"?"undefined":N(b))===D&&void 0!==b.pipe&&void 0!==b.mask&&(Y=b.pipe,b=b.mask);var B=void 0,P=void 0;if(b instanceof Array&&(B=(0,C.convertMaskToPlaceholder)(b,A)),!1!==b){var le=M(m),V=w.selectionEnd,re=I.previousConformedValue,se=I.previousPlaceholder,fe=void 0;if((typeof b>"u"?"undefined":N(b))===c.strFunction){if(!1===(P=b(le,{currentCaretPosition:V,previousConformedValue:re,placeholderChar:A})))return;var ve=(0,C.processCaretTraps)(P);fe=ve.indexes,B=(0,C.convertMaskToPlaceholder)(P=ve.maskWithoutCaretTraps,A)}else P=b;var be={previousConformedValue:re,guide:de,placeholderChar:A,pipe:Y,placeholder:B,currentCaretPosition:V,keepCharPositions:L},U=(0,v.default)(le,P,be).conformedValue,J=(typeof Y>"u"?"undefined":N(Y))===c.strFunction,H={};J&&(!1===(H=Y(U,Z({rawValue:le},be)))?H={value:re,rejected:!0}:(0,C.isString)(H)&&(H={value:H}));var E=J?H.value:U,ee=(0,y.default)({previousConformedValue:re,previousPlaceholder:se,conformedValue:E,placeholder:B,rawValue:le,currentCaretPosition:V,placeholderChar:A,indexesOfPipedChars:H.indexesOfPipedChars,caretTrapIndexes:fe}),Te=E===B&&0===ee?z?B:F:E;I.previousConformedValue=Te,I.previousPlaceholder=B,w.value!==Te&&(w.value=Te,k(w,ee))}}}}};var y=_(d(2)),v=_(d(3)),C=d(4),c=d(1),F="",ue="none",D="object",Ce=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),X=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout}])}}]);