(self.webpackChunkghs_editor=self.webpackChunkghs_editor||[]).push([[46],{46:(ct,oe,a)=>{"use strict";a.r(oe),a.d(oe,{ScenariosModule:()=>Ae});var d=a(6895),_=a(5142),e=a(4650),w=a(1135),b=a(4004),N=a(3900),V=a(4128),T=a(1856);class x{constructor(o){this.storage=o,this._model=new w.X([]),this.scenarios$=this._model.asObservable(),this.maxOrder$=this._model.pipe((0,b.U)(t=>Math.max(...t.map(i=>i.order),0))),this.reload()}reload(){this.storage.scenarios.getAllIds().pipe((0,N.w)(o=>(0,V.D)(o.map(t=>this.storage.scenarios.withId(t).get())))).subscribe(o=>{this._model.next(o.filter(t=>null!==t))})}setScenariosOrder(o){const t=Array.from(this._model.value);o.forEach((i,r)=>{const s={...this._model.value.at(r),order:i};this.storage.scenarios.withId(s.id).set(s).subscribe(),t.at(r).order=i}),this._model.next(t)}remove(o){this.storage.scenarios.withId(o).remove().subscribe();const t=Array.from(this._model.value),i=t.findIndex(r=>r.id===o);t.splice(i,1),this._model.next(t)}}x.\u0275fac=function(o){return new(o||x)(e.LFG(T.O))},x.\u0275prov=e.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"});var O=a(9367),v=a(7819),C=a(8276),c=a(655),k=a(9751);const K=new e.OlP("MutationObserver config");let f=(()=>{class n extends k.y{constructor({nativeElement:t},i){super(r=>{const s=new MutationObserver(u=>{r.next(u)});return s.observe(t,i),()=>{s.disconnect()}})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.SBq),e.LFG(K))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var g=a(7776),l=a(8923),F=a(5753),M=a(3679),fe=a(3054),Y=a(7579),re=a(5963),A=a(9841),le=a(7331),Z=a(9300),te=a(1884),L=a(8675),B=a(8372);const y=["*"];function de(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("transitionend.self",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onTransitionEnd())}),e.Hsn(1),e.qZA()}if(2&n){const t=o.ngIf;e.Udp("top",t.top,"px")("left",t.left,"px")("width",t.width,"px")("height",t.height,"px")}}let H=(()=>{class n{constructor(t){this.elementRef=t,this.element$=new Y.x,this.debounce=0,this.orderChange=this.element$.pipe((0,le.D)(()=>(0,re.H)(this.debounce)),(0,Z.h)(this.filter.bind(this)),(0,b.U)(i=>this.reorder(i))),this.element=null,this.order$=new w.X(new Map)}set order(t){this.order$.next(t)}get order(){return this.order$.value}rearrange(t){this.element$.next(t)}filter(t){return!!this.element&&!!t&&this.element!==t}reorder(t){var i,r;const s=Array.from(this.elementRef.nativeElement.children),u=s.indexOf(this.element||t),h=s.indexOf(t),m=this.order.size?new Map(this.order):new Map(s.map((U,he)=>[he,he])),I=null!==(i=m.get(u))&&void 0!==i?i:u,q=null!==(r=m.get(h))&&void 0!==r?r:h;return m.set(u,q),m.set(h,I),this.order$.next(m),m}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tiles"]],hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("pointerleave.silent",function(){return i.rearrange()}),2&t&&e.ekj("_dragged",i.element)},inputs:{debounce:"debounce",order:"order"},outputs:{orderChange:"orderChange"},features:[e._Bn([g.a3,g.tl,f,{provide:K,useValue:{childList:!0}}])],ngContentSelectors:y,decls:1,vars:0,template:function(t,i){1&t&&(e.F$t(),e.Hsn(0))},styles:["tui-tiles{position:relative;z-index:0;display:grid;grid-auto-flow:dense;justify-items:stretch}tui-tiles._dragged tui-tile>.t-wrapper{pointer-events:none}tui-tiles._dragged tui-tile:not(._dragged)>.t-wrapper{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}tui-tiles:not(._dragged) tui-tile._dragged>.t-wrapper{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}tui-tile>.t-wrapper{position:absolute;z-index:0;border-radius:inherit}tui-tile._dragged>.t-wrapper{z-index:1;transition:none}\n"],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"debounce",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"order",null),n})(),se=(()=>{class n{constructor(t,i,r,s,u){this.ngZone=t,this.elementRef=i,this.tiles=r,this.resize$=s,this.mutation$=u,this.width=1,this.height=1,this.dragged=!1,this.offset$=new w.X([0,0]),this.position$=(0,A.a)([this.offset$.pipe((0,te.x)(F.Hh)),this.resize$.pipe((0,L.O)(null)),this.mutation$.pipe((0,L.O)(null)),this.tiles.order$.pipe((0,B.b)(0))]).pipe((0,b.U)(([[h,m]])=>({top:m||this.element.offsetTop,left:h||this.element.offsetLeft,width:this.element.clientWidth,height:this.element.clientHeight})),(0,M.Ao)(this.ngZone))}get column(){return`span var(--tui-width, ${this.width})`}get row(){return`span var(--tui-height, ${this.height})`}get element(){return this.elementRef.nativeElement}onEnter(){this.tiles.rearrange(this.element)}onDrag(t){this.dragged=this.dragged||t,this.tiles.element=t?this.element:null}onTransitionEnd(){this.dragged=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(H),e.Y36(g.tl),e.Y36(f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tile"]],hostVars:6,hostBindings:function(t,i){1&t&&e.NdJ("pointerenter",function(){return i.onEnter()}),2&t&&(e.Udp("grid-column",i.column)("grid-row",i.row),e.ekj("_dragged",i.dragged))},inputs:{width:"width",height:"height"},ngContentSelectors:y,decls:2,vars:3,consts:[["class","t-wrapper",3,"top","left","width","height","transitionend.self",4,"ngIf"],[1,"t-wrapper",3,"transitionend.self"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,de,2,8,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.position$))},dependencies:[d.O5,d.Ov],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"width",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"height",void 0),n})(),ae=(()=>{class n{constructor(t){this.tile=t,this.x=NaN,this.y=NaN}onStart(t){const i=(0,fe.mA)(t),{x:r,y:s,pointerId:u}=t;(0,fe.ve)(i)&&i.releasePointerCapture(u),this.onPointer(r,s)}onPointer(t=NaN,i=NaN){this.x=t-this.tile.element.offsetLeft,this.y=i-this.tile.element.offsetTop,this.tile.onDrag(!Number.isNaN(t)),this.tile.offset$.next([0,0])}onMove(t,i){Number.isNaN(this.x)||this.tile.offset$.next([t-this.x,i-this.y])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(se))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiTileHandle",""]],hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("pointerdown.silent.prevent",function(s){return i.onStart(s)})("pointerup.silent",function(){return i.onPointer()},!1,e.evT)("pointermove.silent",function(s){return i.onMove(s.x,s.y)},!1,e.evT),2&t&&e.Udp("touch-action","none")}}),n})(),_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez]]}),n})();function ve(n,o){if(1&n&&(e.TgZ(0,"button",7),e._uU(1," Add scenario "),e.qZA()),2&n){const t=e.oxw();e.Q6J("routerLink",t.newScenarioId)}}function me(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"h3",9),e._uU(2,"No scenarios yet"),e.qZA(),e.TgZ(3,"p",10),e._uU(4,"Add a scenario using button below or by importing existig json in the main menu"),e.qZA(),e.TgZ(5,"button",11),e._uU(6,"Add scenario"),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("routerLink",t.newScenarioId)}}function xe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tui-tile",15)(1,"div",16),e._uU(2),e.qZA(),e._UZ(3,"tui-svg",17),e.TgZ(4,"tui-svg",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.removeScenario(s))}),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,r=e.oxw(2);e.Udp("order",r.scenariosOrder.get(i)),e.xp6(1),e.Q6J("routerLink",t.id),e.xp6(1),e.AsE(" #",t.generalInfo.index,": ",t.generalInfo.name," ")}}function Ce(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"tui-tiles",13),e.NdJ("orderChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.reorder(r))}),e.YNc(2,xe,5,5,"tui-tile",14),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("debounce",500)("order",t.scenariosOrder),e.xp6(1),e.Q6J("ngForOf",t.scenarios)}}class X{constructor(o){this.scenariosService=o,this.newScenarioId=crypto.randomUUID(),this.isLoading=!0,this.scenarios=[]}ngOnInit(){this.scenariosService.scenarios$.subscribe(o=>{this.scenarios=o,this.scenariosOrder=new Map(o.map((t,i)=>[i,t.order])),this.isLoading=!1})}reorder(o){this.scenariosService.setScenariosOrder(o)}removeScenario(o){this.scenariosService.remove(o.id)}}X.\u0275fac=function(o){return new(o||X)(e.Y36(x))},X.\u0275cmp=e.Xpm({type:X,selectors:[["ghse-scenarios-list"]],decls:8,vars:7,consts:[[1,"page-header"],[1,"tui-text_h2"],["tuiButton","","size","s","icon","tuiIconPlusLarge",3,"routerLink",4,"ngIf"],[1,"page-content"],["size","xxl",3,"showLoader","overlay"],["class","no-items",4,"ngIf"],["class","items",4,"ngIf"],["tuiButton","","size","s","icon","tuiIconPlusLarge",3,"routerLink"],[1,"no-items"],[1,"tui-text_h3"],[1,"tui-text_body-l"],["tuiButton","","size","xl","icon","tuiIconPlusLarge",3,"routerLink"],[1,"items"],[1,"tiles",3,"debounce","order","orderChange"],["class","tile",3,"order",4,"ngFor","ngForOf"],[1,"tile"],[1,"scenario",3,"routerLink"],["tuiTileHandle","","src","tuiIconDragLarge",1,"handle"],["src","tuiIconTrashLarge",1,"remove",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Scenarios"),e.qZA(),e.YNc(3,ve,2,1,"button",2),e.qZA(),e.TgZ(4,"div",3)(5,"tui-loader",4),e.YNc(6,me,7,1,"div",5),e.YNc(7,Ce,3,3,"div",6),e.qZA()()),2&o&&(e.ekj("with-button",0!==t.scenarios.length),e.xp6(3),e.Q6J("ngIf",0!==t.scenarios.length),e.xp6(2),e.Q6J("showLoader",t.isLoading)("overlay",!0),e.xp6(1),e.Q6J("ngIf",0===t.scenarios.length),e.xp6(1),e.Q6J("ngIf",0!==t.scenarios.length&&t.scenariosOrder))},dependencies:[d.sg,d.O5,_.rH,O.v0,v.kM,C.P,H,se,ae],styles:['.ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 0rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   a[tuiButton][_ngcontent-%COMP%], [_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   button[tuiButton][_ngcontent-%COMP%]{margin-left:2rem;margin-top:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .no-items[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .tiles[_ngcontent-%COMP%]{gap:1rem;grid:auto-flow minmax(6rem,auto) / repeat(auto-fill,minmax(20rem,1fr))}[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]:before{content:"Drop here";display:flex;height:100%;justify-content:center;align-items:center;box-sizing:border-box;color:var(--tui-base-04);border-radius:var(--tui-radius-l);border:2px dashed var(--tui-base-03)}.scenario[_ngcontent-%COMP%]{transition-property:box-shadow;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;height:100%;padding:1rem;background:var(--tui-base-01);box-sizing:border-box;border-radius:var(--tui-radius-l);border:1px solid var(--tui-base-03);overflow:hidden}.scenario[_ngcontent-%COMP%]:hover{box-shadow:0 .75rem 2.25rem #0003}tui-tile._dragged[_ngcontent-%COMP%]   .scenario[_ngcontent-%COMP%]{box-shadow:0 .75rem 2.25rem #0003}.handle[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;right:.75rem;top:1rem;background:var(--tui-base-01);color:var(--tui-base-05);opacity:0;cursor:move}.handle[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}tui-tiles[_ngcontent-%COMP%]:not(._dragged)   tui-tile[_ngcontent-%COMP%]:hover   .handle[_ngcontent-%COMP%], tui-tile._dragged[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{opacity:1}.remove[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;right:.75rem;bottom:1rem;background:var(--tui-base-01);color:var(--tui-base-05);opacity:0;cursor:pointer}.remove[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}tui-tiles[_ngcontent-%COMP%]:not(._dragged)   tui-tile[_ngcontent-%COMP%]:hover   .remove[_ngcontent-%COMP%]{opacity:1}']});var z=a(2722);class ${static getBusinessId(o){return 0!==o.generalInfo.group.length?`${o.generalInfo.index}-${o.generalInfo.group}`:o.generalInfo.index}static getFullName(o){return`#${$.getBusinessId(o)}: ${o.generalInfo.name}`}}var R=a(5888),E=a(8505);class ne{constructor(o,t,i,r){this.listService=o,this.storageService=t,this.alertService=i,this.scenarioId=r,this._dataSaved$=this.alertService.open("Data saved",{status:"success"}),this._maxOrder=0,this._model=new w.X(R.zI),this.reload(),this.businessId$=this._model.asObservable().pipe((0,b.U)(s=>$.getBusinessId(s))),this.exists$=this._model.asObservable().pipe((0,b.U)(s=>""!==s.generalInfo.index)),this.listService.maxOrder$.subscribe(s=>this._maxOrder=s),this.fullModel$=this._model.asObservable(),this.generalInfo$=this._model.asObservable().pipe((0,b.U)(s=>s.generalInfo)),this.properties$=this._model.asObservable().pipe((0,b.U)(s=>s.properties)),this.objectives$=this._model.asObservable().pipe((0,b.U)(s=>s.objectives)),this.monsters$=this._model.asObservable().pipe((0,b.U)(s=>s.monsters))}updateGeneralInfo(o){const t={...this._model.value,generalInfo:o};""===this._model.value.id&&(t.id=this.scenarioId),0===this._model.value.order&&(t.order=this._maxOrder+1),this.notifyUpdated(t)}updateProperties(o){this.notifyUpdated({...this._model.value,properties:o})}updateObjectives(o){this.notifyUpdated({...this._model.value,objectives:o})}updateMonsters(o){this.notifyUpdated({...this._model.value,monsters:o})}reload(){this.storageService.scenarios.withId(this.scenarioId).get().subscribe(o=>{null!==o&&this._model.next(o)})}notifyUpdated(o){this.storageService.scenarios.withId(this.scenarioId).set(o).pipe((0,E.b)(()=>this._model.next(o)),(0,E.b)(()=>this.listService.reload()),(0,N.w)(()=>this._dataSaved$)).subscribe()}}var ie=a(343);class P{constructor(o,t,i){this.listService=o,this.storageService=t,this.alertService=i,this.services=new Map}create(o){return this.services.has(o)||this.services.set(o,new ne(this.listService,this.storageService,this.alertService,o)),this.services.get(o)}}P.\u0275fac=function(o){return new(o||P)(e.LFG(x),e.LFG(T.O),e.LFG(ie.J9))},P.\u0275prov=e.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"});var Oe=a(9791),pe=a(9255),j=a(8535),Be=a(9982);let dn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var lt=a(8790),dt=a(4645),ue=a(1308),$e=a(1127),qe=a(4677),pt=a(515),Xe=a(6451),pn=a(4671),hn=a(4707),ht=a(9646),mn=a(3099),ye=a(9740),Ee=a(9892),Ke=a(5917);const gn=["tuiTab",""];function fn(n,o){1&n&&e.GkF(0)}const mt=["*"];function _n(n,o){1&n&&e.GkF(0)}function vn(n,o){if(1&n&&e._UZ(0,"tui-underline",2),2&n){const t=e.oxw();e.Q6J("element",t.activeElement)}}const gt=new e.OlP("[TUI_TAB_EVENT]: Stream of tab activation events"),On=[g.a3,g.ku,lt.Ok,{provide:gt,deps:[e.SBq,lt.Ok,[new e.FiY,f],[new e.FiY,_.Od]],useFactory:({nativeElement:n},o,t,i)=>{const r=i&&t?t.pipe((0,Z.h)(()=>i.isActive)):pt.E;return(0,Xe.T)(r,o.pipe((0,Z.h)(pn.y)),n.matches("button")?(0,M.mL)(n,"click"):pt.E).pipe((0,b.U)(()=>n.dispatchEvent(new CustomEvent("tui-tab-activate",{bubbles:!0}))))}},dt.CV];let ft=(()=>{class n{constructor(t,i,r,s,u,h){this.routerLinkActive=t,this.elementRef=i,this.mode$=r,this.event$=s,this.margin=u,this.focusVisible=!1,h.subscribe(m=>{this.focusVisible=m})}get isActive(){return!!this.routerLinkActive&&this.routerLinkActive.isActive}ngOnDestroy(){(0,pe.V8)(this.elementRef.nativeElement)&&this.elementRef.nativeElement.blur()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.Od,8),e.Y36(e.SBq),e.Y36(ue.Au),e.Y36(gt),e.Y36(qe.WO),e.Y36(g.ku))},n.\u0275cmp=e.Xpm({type:n,selectors:[["a","tuiTab","",3,"routerLink",""],["a","tuiTab","","routerLink","","routerLinkActive",""],["button","tuiTab",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(t,i){1&t&&e.NdJ("$.data-mode.attr",function(){return i.mode$}),2&t&&(e.Udp("cursor","pointer")("--tui-tab-margin",i.margin,"px"),e.ekj("_focus-visible",i.focusVisible)("_active",i.isActive))},features:[e._Bn(On)],attrs:gn,ngContentSelectors:mt,decls:4,vars:3,consts:[[4,"ngIf"],[1,"t-highlight"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,fn,1,0,"ng-container",0),e.ALo(1,"async"),e.TgZ(2,"span",1),e.Hsn(3),e.qZA()),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.event$))},dependencies:[d.O5,d.Ov],styles:['._underline[_nghost-%COMP%]:hover, ._underline   [_nghost-%COMP%]:hover{box-shadow:inset 0 -2px var(--tui-base-03)}tui-tabs    > [_nghost-%COMP%]:first-child, tui-tabs    > [_nghost-%COMP%]:first-child, [tuiTabs]    > [_nghost-%COMP%]:first-child, [tuiTabs]    > [_nghost-%COMP%]:first-child, tui-tabs    > :first-child[_nghost-%COMP%], tui-tabs    > :first-child   [_nghost-%COMP%], [tuiTabs]    > :first-child[_nghost-%COMP%], [tuiTabs]    > :first-child   [_nghost-%COMP%]{margin-left:0}[_nghost-%COMP%]{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;position:relative;display:flex;flex-shrink:0;height:100%;box-sizing:border-box;justify-content:space-between;align-items:center;white-space:nowrap;cursor:pointer;outline:none;text-decoration:none;color:inherit;transition-property:color,box-shadow,opacity;margin-left:var(--tui-tab-margin, 1.5rem)}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);pointer-events:none}[_nghost-%COMP%]:not([data-mode])._active{opacity:1;color:var(--tui-text-01);box-shadow:none}[data-mode=onDark][_nghost-%COMP%]{color:rgba(255,255,255,.72)}[data-mode=onDark][_nghost-%COMP%]:hover, [data-mode=onDark]._active[_nghost-%COMP%]{color:#fff}[data-mode=onDark]._focus-visible[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{background:var(--tui-clear-inverse);color:var(--tui-text-01)}[data-mode=onLight][_nghost-%COMP%]{color:var(--tui-text-02)}[data-mode=onLight][_nghost-%COMP%]:hover, [data-mode=onLight]._active[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._focus-visible[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{background:var(--tui-text-01);color:#fff}._focus-visible[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{background:var(--tui-selection)}._android[_nghost-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;height:3rem;flex:1;flex-shrink:0;justify-content:center;margin:0;text-transform:uppercase;color:var(--tui-base-09);opacity:.5;font-size:.875rem;font-weight:500;letter-spacing:-.008125rem;font-family:-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif}._android[_nghost-%COMP%]:hover{box-shadow:none}._android._active[_nghost-%COMP%]{opacity:1;color:var(--tui-base-09)}._android[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{width:auto}._ios[_nghost-%COMP%]{height:1.75rem;flex:1;flex-shrink:0;justify-content:center;margin:0;color:var(--tui-base-01);opacity:1;font-size:.8125rem;font-weight:500;letter-spacing:-.005rem;font-family:-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif}._ios[_nghost-%COMP%]:hover{box-shadow:none}._ios._active[_nghost-%COMP%]{font-size:.875rem;font-weight:600;color:var(--tui-link)}._ios[_nghost-%COMP%]   .t-highlight[_ngcontent-%COMP%]{width:auto}@media (hover: hover){[_nghost-%COMP%]:hover{color:var(--tui-text-01)}}.t-highlight[_ngcontent-%COMP%]{display:inline-flex;width:100%;align-items:center;justify-content:inherit}.t-highlight[_ngcontent-%COMP%]    >*{flex-shrink:0}tui-tabs[data-vertical][_nghost-%COMP%], tui-tabs[data-vertical]   [_nghost-%COMP%], [tuiTabs][data-vertical][_nghost-%COMP%], [tuiTabs][data-vertical]   [_nghost-%COMP%]{min-height:2.75rem;height:auto;white-space:normal;margin:0;text-align:left;padding:.25rem 1.25rem .25rem 0}tui-tabs[data-vertical][_nghost-%COMP%]:after, tui-tabs[data-vertical]   [_nghost-%COMP%]:after, [tuiTabs][data-vertical][_nghost-%COMP%]:after, [tuiTabs][data-vertical]   [_nghost-%COMP%]:after{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";position:absolute;top:0;bottom:0;right:0;width:2px;background:var(--tui-primary);transform:scaleX(0);transform-origin:right}tui-tabs[data-vertical][_nghost-%COMP%]:hover, tui-tabs[data-vertical]   [_nghost-%COMP%]:hover, [tuiTabs][data-vertical][_nghost-%COMP%]:hover, [tuiTabs][data-vertical]   [_nghost-%COMP%]:hover{box-shadow:inset -2px 0 var(--tui-base-03)}tui-tabs[data-vertical]._active[_nghost-%COMP%]:after, tui-tabs[data-vertical]   ._active[_nghost-%COMP%]:after, [tuiTabs][data-vertical]._active[_nghost-%COMP%]:after, [tuiTabs][data-vertical]   ._active[_nghost-%COMP%]:after{transform:none}tui-tabs[data-vertical="right"][_nghost-%COMP%], tui-tabs[data-vertical="right"]   [_nghost-%COMP%], [tuiTabs][data-vertical="right"][_nghost-%COMP%], [tuiTabs][data-vertical="right"]   [_nghost-%COMP%]{text-align:right;padding:.25rem 0 .25rem 1.25rem}tui-tabs[data-vertical="right"][_nghost-%COMP%]:after, tui-tabs[data-vertical="right"]   [_nghost-%COMP%]:after, [tuiTabs][data-vertical="right"][_nghost-%COMP%]:after, [tuiTabs][data-vertical="right"]   [_nghost-%COMP%]:after{right:auto;left:0;transform-origin:left}tui-tabs[data-vertical="right"][_nghost-%COMP%]:hover, tui-tabs[data-vertical="right"]   [_nghost-%COMP%]:hover, [tuiTabs][data-vertical="right"][_nghost-%COMP%]:hover, [tuiTabs][data-vertical="right"]   [_nghost-%COMP%]:hover{box-shadow:inset 2px 0 var(--tui-base-03)}'],changeDetection:0}),n})(),_t=(()=>{class n{constructor(t){this.elementRef=t,this.activeItemIndex=0,this.activeItemIndexChange=new e.vpe}get tabs(){return Array.from(this.elementRef.nativeElement.querySelectorAll("[tuiTab]"))}get activeElement(){return this.tabs[this.activeItemIndex]||null}onActivate(t,i){const r=this.tabs.findIndex(s=>s===i);t.stopPropagation(),r!==this.activeItemIndex&&(this.activeItemIndexChange.emit(r),this.activeItemIndex=r)}moveFocus(t,i){const{tabs:r}=this;(0,pe.VR)(r.indexOf(t),r,i)}ngAfterViewChecked(){const{tabs:t,activeElement:i}=this;t.forEach(r=>{const s=r===i;r.classList.toggle("_active",s),r.setAttribute("tabIndex",s?"0":"-1")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["tui-tabs"],["nav","tuiTabs",""]],hostBindings:function(t,i){1&t&&e.NdJ("tui-tab-activate",function(s){return i.onActivate(s,s.target)})},inputs:{activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"}}),(0,c.gn)([(0,l.TH)()],n.prototype,"activeItemIndex",void 0),n})();const vt={underline:!0,exposeActive:!0,itemsLimit:1/0},bt=new e.OlP("[TUI_TABS_OPTIONS]: Default parameters for tabs component",{factory:()=>vt});let yn=(()=>{class n{constructor({nativeElement:t},i,r,s){this.ngZone=i,this.animationFrame$=r,this.mode$=s,this.element$=new hn.t(1),this.refresh$=this.element$.pipe((0,N.w)(u=>u?this.animationFrame$.pipe((0,b.U)(()=>u),(0,M.fL)(this.ngZone)):(0,ht.of)(null)),(0,mn.B)()),this.transition$=(0,Ke.Gt)(this.element$.pipe((0,b.U)(u=>u&&"all"),(0,B.b)(50))),this.transform$=(0,Ke.Gt)(this.refresh$.pipe((0,b.U)(u=>u?`translate3d(${u.offsetLeft}px, 0, 0)`:null))),this.width$=(0,Ke.Gt)(this.refresh$.pipe((0,b.U)(u=>u?.clientWidth||0))),t["$.style.transitionProperty"]=this.transition$,t["$.style.transform"]=this.transform$,t["$.style.width.px"]=this.width$}set element(t){this.element$.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(Ee.L1),e.Y36(ue.Au))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-underline"]],hostBindings:function(t,i){1&t&&e.NdJ("$.data-mode.attr",function(){return i.mode$})("$.style.transitionProperty",function(){return i.transition$()})("$.style.transform",function(){return i.transform$()})("$.style.width.px",function(){return i.width$()})},inputs:{element:"element"},features:[e._Bn([dt.CV])],decls:0,vars:0,template:function(t,i){},styles:["[_nghost-%COMP%]{transition-property:all;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;left:0;height:100%;color:var(--tui-primary);transform:scale(0);box-shadow:inset 0 -.1875rem 0 -.0625rem;transition-property:none;pointer-events:none}[data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onLight][_nghost-%COMP%]{color:var(--tui-text-02)}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"element",null),n})(),Pn=(()=>{class n{constructor(t,i,r,s,u){this.options=t,this.elementRef=i,this.tabs=r,this.children=j.Mm,this.underline=this.options.underline,u.pipe((0,Z.h)(()=>this.underline)).subscribe(()=>{s.detectChanges()})}get activeItemIndex(){return this.tabs.activeItemIndex}set activeItemIndex(t){this.tabs.activeItemIndex=t}get activeElement(){return this.tabs.activeElement}onKeyDownArrow(t,i){this.tabs.moveFocus(t,i)}ngAfterViewChecked(){this.scrollTo(this.tabs.activeItemIndex)}scrollTo(t){const i=this.tabs.tabs[t];if(!i)return;const{offsetLeft:r,offsetWidth:s}=i,{nativeElement:u}=this.elementRef;r<u.scrollLeft&&(u.scrollLeft=r),r+s>u.scrollLeft+u.offsetWidth&&(u.scrollLeft=r+s-u.offsetWidth)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(bt),e.Y36(e.SBq),e.Y36(_t),e.Y36(e.sBO),e.Y36(g.tl))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-tabs",3,"vertical",""],["nav","tuiTabs","",3,"vertical",""]],contentQueries:function(t,i,r){if(1&t&&e.Suo(r,ft,4),2&t){let s;e.iGM(s=e.CRH())&&(i.children=s)}},hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("keydown.arrowRight.prevent",function(s){return i.onKeyDownArrow(s.target,1)})("keydown.arrowLeft.prevent",function(s){return i.onKeyDownArrow(s.target,-1)}),2&t&&e.ekj("_underline",i.underline)},inputs:{underline:"underline"},features:[e._Bn([g.a3,g.tl,f,{provide:K,useValue:{childList:!0}}])],ngContentSelectors:mt,decls:4,vars:4,consts:[[4,"ngIf"],["class","t-underline",3,"element",4,"ngIf"],[1,"t-underline",3,"element"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,_n,1,0,"ng-container",0),e.ALo(1,"async"),e.Hsn(2),e.YNc(3,vn,1,1,"tui-underline",1)),2&t&&(e.Q6J("ngIf",e.lcZ(1,2,i.children.changes)),e.xp6(3),e.Q6J("ngIf",i.underline))},dependencies:[yn,d.O5,d.Ov],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;position:relative;z-index:0;display:flex;font:var(--tui-font-text-m);height:var(--tui-height-l);color:var(--tui-text-02);box-shadow:inset 0 -1px var(--tui-base-03);overflow:auto}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-underline[_ngcontent-%COMP%]{z-index:-1}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"underline",void 0),(0,c.gn)([l.UM],n.prototype,"scrollTo",null),n})();new e.OlP("[TUI_TABS_REFRESH]: Refresh stream");let In=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,ye.wq,$e.jh,C.E,Be.u,dn]]}),n})();class Ne{constructor(o,t,i,r){this.detailsServiceFactory=o,this.route=t,this.router=i,this.destroy$=r}ngOnInit(){const o=this.route.snapshot.paramMap.get("id");this.detailsService=this.detailsServiceFactory.create(o),this.detailsService.fullModel$?.pipe((0,z.R)(this.destroy$)).subscribe(t=>this.model=t)}get areStepsDisabled(){return""===this.model?.generalInfo.index}get header(){return this.model&&""!==this.model.generalInfo.name?$.getFullName(this.model):"New scenario"}}Ne.\u0275fac=function(o){return new(o||Ne)(e.Y36(P),e.Y36(_.gz),e.Y36(_.F0),e.Y36(g.a3))},Ne.\u0275cmp=e.Xpm({type:Ne,selectors:[["ghse-scenario-detail"]],features:[e._Bn([g.a3])],decls:23,vars:7,consts:[[1,"page-header","with-link"],["tuiLink","","routerLink",".."],["src","tuiIconChevronLeft"],[1,"tui-text_h2"],["tuiTab","","routerLink",".","routerLinkActive",""],["tuiTab","","routerLink","properties","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","objectives","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","monsters","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","rooms","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","rules","routerLinkActive","",3,"disabled"],["tuiTab","","routerLink","sections","routerLinkActive","",3,"disabled"],[1,"page-content"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"tui-svg",2),e._uU(3," Scenarios"),e.qZA(),e.TgZ(4,"h2",3),e._uU(5),e.qZA(),e.TgZ(6,"tui-tabs")(7,"button",4),e._uU(8,"General"),e.qZA(),e.TgZ(9,"button",5),e._uU(10,"Properties"),e.qZA(),e.TgZ(11,"button",6),e._uU(12,"Objectives"),e.qZA(),e.TgZ(13,"button",7),e._uU(14,"Monsters"),e.qZA(),e.TgZ(15,"button",8),e._uU(16,"Rooms"),e.qZA(),e.TgZ(17,"button",9),e._uU(18,"Special rules"),e.qZA(),e.TgZ(19,"button",10),e._uU(20,"Sections"),e.qZA()()(),e.TgZ(21,"div",11),e._UZ(22,"router-outlet"),e.qZA()),2&o&&(e.xp6(5),e.Oqu(t.header),e.xp6(4),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled),e.xp6(2),e.Q6J("disabled",t.areStepsDisabled))},dependencies:[_.lC,_.rH,_.Od,Oe.V,C.P,Pn,_t,ft],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:3rem;box-shadow:inset 0 -1px var(--tui-base-03)}[_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]{padding:1.5rem 3rem 0rem}[_nghost-%COMP%]   .page-header.with-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:.5rem}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   a[tuiButton][_ngcontent-%COMP%], [_nghost-%COMP%]   .page-header.with-button[_ngcontent-%COMP%]   button[tuiButton][_ngcontent-%COMP%]{margin-left:2rem;margin-top:.5rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.5rem 3rem}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .page-content[_ngcontent-%COMP%]{flex-direction:row}[_nghost-%COMP%]   tui-tabs[_ngcontent-%COMP%]{margin-top:1rem}"],changeDetection:0});var p=a(4006);function et(n){return new p.cw(Object.entries(n).reduce((o,[t,[i,r]])=>({...o,[t]:new p.NI(i,{validators:r,nonNullable:null!==i})}),{}))}class tt{constructor(o,t,i,r,s){this.destroy$=t,this.details$=i,this.updateDetails=r,this.form=s,this.currentScenarioId="",o.data.pipe((0,z.R)(this.destroy$)).subscribe(({detailsService:u})=>{this.detailsService=u,this.detailsService&&(this.detailsService.businessId$.subscribe(h=>this.currentScenarioId=h),i(this.detailsService).subscribe(h=>{this.savedModel=h}))})}save(){if(this.detailsService){const o=this.form.getRawValue();this.updateDetails(this.detailsService,o),this.form.markAsPristine()}}reset(){this.savedModel?(this.form.patchValue(this.savedModel),this.form.markAsPristine()):this.form.reset()}}class Ct extends tt{constructor(o,t,i,r,s){super(o,t,i,r,new p.Oe([])),this.instanceFormCreator=s}addNew(){this.form.insert(0,this.instanceFormCreator()),this.form.markAsDirty()}remove(o){this.form.removeAt(o),this.form.markAsDirty()}reset(){if(this.savedModel){this.form.clear();for(const o of this.savedModel){const t=this.instanceFormCreator();t.patchValue(o),this.form.push(t)}this.form.markAsPristine()}else this.form.reset()}}var nt=a(4601),Q=a(117),Je=a(6679),J=a(1054),G=a(7414),it=a(2302);let Mt=(()=>{class n{constructor(t,i){this.element=t,this.renderer=i,this.tuiCheckedChange=new e.vpe,this.updateProperty("checked",!1)}set tuiChecked(t){this.updateProperty("checked",t||!1),this.updateProperty("indeterminate",null===t)}onChange({checked:t}){this.updateProperty("indeterminate",!1),this.tuiCheckedChange.emit(t)}updateProperty(t,i){this.renderer.setProperty(this.element.nativeElement,t,i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj))},n.\u0275dir=e.lG2({type:n,selectors:[["input","tuiChecked",""],["input","tuiCheckedChange",""]],hostBindings:function(t,i){1&t&&e.NdJ("change",function(s){return i.onChange(s.target)})},inputs:{tuiChecked:"tuiChecked"},outputs:{tuiCheckedChange:"tuiCheckedChange"}}),n})(),Tt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var kn=a(5684);let xt=(()=>{class n{constructor({nativeElement:t},i){this.tuiFocusedChange=(0,Xe.T)((0,M.mL)(t,"focusin"),(0,M.mL)(t,"focusout")).pipe((0,b.U)(()=>(0,pe.V8)(t)),(0,L.O)(!1),(0,te.x)(),(0,kn.T)(1),(0,M.Yr)(i))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.R0b))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiFocusedChange",""]],outputs:{tuiFocusedChange:"tuiFocusedChange"}}),n})(),Ot=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),yt=(()=>{class n{constructor(t){this.tuiFocusVisibleChange=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.ku))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiFocusVisibleChange",""]],outputs:{tuiFocusVisibleChange:"tuiFocusVisibleChange"},features:[e._Bn([g.a3,g.ku])]}),n})(),Pt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var ot=a(2973);const Sn=["focusableElement"];let Ye=(()=>{class n extends J.F9{constructor(t,i,r){super(t,r),this.options=i,this.size=this.options.size}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get computedFocusable(){return this.interactive&&this.focusable}onChecked(t){this.updateValue(t)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(ot.Y2),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox"]],viewQuery:function(t,i){if(1&t&&e.Gf(Sn,5),2&t){let r;e.iGM(r=e.CRH())&&(i.focusableElement=r.first)}},hostVars:1,hostBindings:function(t,i){2&t&&e.uIk("data-size",i.size)},inputs:{size:"size"},features:[e._Bn([(0,G.FT)(n),(0,J.wB)(n)]),e.qOj],decls:3,vars:11,consts:[[3,"size","disabled","focused","hovered","pressed","invalid","value"],["type","checkbox","automation-id","tui-checkbox__native",1,"t-native",3,"disabled","id","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""]],template:function(t,i){1&t&&(e.TgZ(0,"tui-primitive-checkbox",0)(1,"input",1,2),e.NdJ("tuiFocusedChange",function(s){return i.onFocused(s)})("tuiCheckedChange",function(s){return i.onChecked(s)})("tuiFocusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA()()),2&t&&(e.Q6J("size",i.size)("disabled",i.disabled)("focused",i.computedFocusVisible)("hovered",i.pseudoHover)("pressed",i.pseudoActive)("invalid",i.computedInvalid)("value",i.value),e.xp6(1),e.Q6J("disabled",i.disabled)("id",i.id)("tuiChecked",i.value)("tuiFocusable",i.computedFocusable))},dependencies:[ot.r3,Mt,Be.t,xt,yt],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),wt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Tt,Be.u,Ot,Pt,ot.fB]]}),n})();const Fn=["*"];let Dn=(()=>{class n extends J.F9{constructor(t,i,r){super(t,i),this.modeDirective=r,this.size="m"}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get nativeFocusableElement(){return this.checkbox?this.checkbox.nativeFocusableElement:null}get hostMode(){return this.modeDirective?this.modeDirective.mode:null}onFocused(t){this.updateFocused(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(it.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox-labeled"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ye,5),2&t){let r;e.iGM(r=e.CRH())&&(i.checkbox=r.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.uIk("data-size",i.size)("data-mode",i.hostMode)},inputs:{size:"size"},features:[e._Bn([(0,G.FT)(n),(0,J.wB)(n)]),e.qOj],ngContentSelectors:Fn,decls:4,vars:12,consts:[[1,"t-wrapper"],[3,"disabled","readOnly","focusable","nativeId","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","ngModel","ngModelChange","focusedChange"],[1,"t-content"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"tui-checkbox",1),e.NdJ("ngModelChange",function(s){return i.onModelChange(s)})("focusedChange",function(s){return i.onFocused(s)}),e.qZA(),e.TgZ(2,"div",2),e.Hsn(3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("disabled",i.computedDisabled)("readOnly",i.readOnly)("focusable",i.focusable)("nativeId",i.nativeId)("pseudoInvalid",i.computedInvalid)("pseudoFocus",i.pseudoFocus)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("size",i.size)("ngModel",i.value),e.xp6(1),e.ekj("t-content_disabled",i.computedDisabled))},dependencies:[Ye,p.JJ,p.On],styles:["[_nghost-%COMP%]{position:relative;display:block;line-height:0}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{display:inline-flex;max-width:100%;cursor:pointer}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}[data-mode=onDark][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}.t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-s);line-height:1rem;word-wrap:break-word;min-width:0}.t-content_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-m);margin-left:.75rem}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),An=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,p.u5,wt]]}),n})();var rt=a(5120);const st=function(){return[]};class Ve extends tt{constructor(o,t){super(o,t,r=>r.generalInfo$,(r,s)=>r.updateGeneralInfo(s),et({index:["",p.kI.required],group:[""],name:["",p.kI.required],initial:[!1]})),this.reset()}}Ve.\u0275fac=function(o){return new(o||Ve)(e.Y36(_.gz),e.Y36(g.a3))},Ve.\u0275cmp=e.Xpm({type:Ve,selectors:[["ghse-scenario-general-editor"]],features:[e._Bn([{provide:g.a3}]),e.qOj],decls:32,vars:27,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],["data-automation","edition.prefix",1,"prefixName",3,"formControl"],[1,"tui-required"],[3,"formControl","error"],[1,"form-row","multi-field"],[1,"scenario-index"],[1,"scenario-group"],["tuiTextfield","","placeholder","solo"],["size","l",3,"formControl"],[1,"form-row","buttons"],["tuiButton","","type","submit",3,"disabled"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(1,"div",1)(2,"tui-input",2),e._uU(3," Scenario name "),e._UZ(4,"span",3),e.qZA(),e._UZ(5,"tui-error",4),e.ALo(6,"async"),e.ALo(7,"tuiFieldError"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"tui-input",2),e._uU(11," Scenario # "),e._UZ(12,"span",3),e.qZA(),e._UZ(13,"tui-error",4),e.ALo(14,"async"),e.ALo(15,"tuiFieldError"),e.qZA(),e.TgZ(16,"div",7)(17,"tui-input",2),e._uU(18," Scenario group "),e._UZ(19,"input",8),e.qZA(),e._UZ(20,"tui-error",4),e.ALo(21,"async"),e.ALo(22,"tuiFieldError"),e.qZA()(),e.TgZ(23,"div",1)(24,"tui-checkbox-labeled",9),e._uU(25," It is initial scenario of a campaign "),e.qZA()(),e.TgZ(26,"div",10)(27,"div")(28,"button",11),e._uU(29,"Save"),e.qZA(),e.TgZ(30,"button",12),e.NdJ("click",function(){return t.reset()}),e._uU(31," Reset "),e.qZA()()()()),2&o&&(e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("formControl",t.form.controls.name),e.xp6(3),e.Q6J("formControl",t.form.controls.name)("error",e.lcZ(6,12,e.lcZ(7,14,e.DdM(24,st)))),e.xp6(5),e.Q6J("formControl",t.form.controls.index),e.xp6(3),e.Q6J("formControl",t.form.controls.index)("error",e.lcZ(14,16,e.lcZ(15,18,e.DdM(25,st)))),e.xp6(4),e.Q6J("formControl",t.form.controls.group),e.xp6(3),e.Q6J("formControl",t.form.controls.group)("error",e.lcZ(21,20,e.lcZ(22,22,e.DdM(26,st)))),e.xp6(4),e.Q6J("formControl",t.form.controls.initial),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[p._Y,p.JJ,p.JL,p.oH,p.sg,O.v0,nt.v,Je.K3,Je.wU,Q.MB,Dn,d.Ov,rt.Ag],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .scenario-group[_ngcontent-%COMP%]{width:auto;flex-shrink:0}[_nghost-%COMP%]   .scenario-index[_ngcontent-%COMP%]{flex:1;margin-right:1.5rem}"]});var Pe=a(9886),at=a(3861),Bn=a(9343),It=a(6772),kt=a(3935);function En(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",15),e.ALo(1,"async")),2&n){const t=e.oxw(2);e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}function Nn(n,o){1&n&&(e.TgZ(0,"span",16),e._uU(1,"-- OR --"),e.qZA())}function Vn(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tui-input-tag",13),e.NdJ("searchChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSearchChange(r))}),e._uU(2," Scenario requires "),e.YNc(3,En,2,4,"tui-data-list-wrapper",9),e.qZA(),e.YNc(4,Nn,2,0,"span",14),e.BQk()}if(2&n){const t=o.$implicit,i=o.index;e.xp6(1),e.Q6J("formControl",t)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("ngIf",0===i)}}function Zn(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",17),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}function Ln(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",15),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("itemContent",t.scenarioName)("items",e.lcZ(1,2,t.filteredItems$))}}const St=function(){return[]};class Ze extends tt{constructor(o,t,i,r){super(o,t,u=>u.properties$,(u,h)=>u.updateProperties(h),i.group({blocks:[[]],unlocks:[[]],requires:i.array([i.control([]),i.control([])])})),this.scenariosListService=r,this.scenarios=null,this.scenariosIds=null,this.scenarioName=({$implicit:u})=>this.scenarios?.get(u),this.search$=new Y.x,this.reset()}ngOnInit(){this.scenariosListService.scenarios$.pipe((0,z.R)(this.destroy$)).subscribe(o=>{this.scenarios=new Map(o.filter(t=>$.getBusinessId(t)!==this.currentScenarioId).map(t=>[$.getBusinessId(t),$.getFullName(t)])),this.scenariosIds=Array.from(this.scenarios.keys()),this.filteredItems$=this.search$.pipe((0,N.w)(t=>(0,ht.of)(Array.from(this.scenarios?.entries()??[]).filter(i=>i[1].toLowerCase().includes(t.toLowerCase())).map(i=>i[0]))),(0,L.O)(this.scenariosIds))})}onSearchChange(o){this.search$.next(o)}}Ze.\u0275fac=function(o){return new(o||Ze)(e.Y36(_.gz),e.Y36(g.a3),e.Y36(p.j3),e.Y36(x))},Ze.\u0275cmp=e.Xpm({type:Ze,selectors:[["ghse-scenario-properties-editor"]],features:[e._Bn([{provide:g.a3}]),e.qOj],decls:24,vars:21,consts:[[3,"formGroup","ngSubmit"],["tuiLabel","Scenario requirements:",1,"form-row"],[1,"multi-field"],[4,"ngFor","ngForOf"],["tuiLabel","Scenario unlocks:",1,"form-row"],[3,"formControl","tuiTextfieldLabelOutside","searchChange"],["emptyContent","Be sure to create said scenario later.",3,"itemContent","items",4,"tuiDataList"],[3,"formControl","error"],["tuiLabel","Scenario blocks:",1,"form-row"],["emptyContent","No such scenario currently exists. You can insert it now but be sure to create said scenario later.",3,"itemContent","items",4,"tuiDataList"],[1,"form-row","buttons"],["tuiButton","","type","submit",3,"disabled"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[1,"requirement",3,"formControl","tuiTextfieldLabelOutside","searchChange"],["class","separator",4,"ngIf"],["emptyContent","No such scenario currently exists. You can insert it now but be sure to create said scenario later.",3,"itemContent","items"],[1,"separator"],["emptyContent","Be sure to create said scenario later.",3,"itemContent","items"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(1,"label",1)(2,"div",2),e.YNc(3,Vn,5,3,"ng-container",3),e.qZA()(),e.TgZ(4,"label",4)(5,"tui-input-tag",5),e.NdJ("searchChange",function(r){return t.onSearchChange(r)}),e._uU(6," Scenario unlocks "),e.YNc(7,Zn,2,4,"tui-data-list-wrapper",6),e.qZA(),e._UZ(8,"tui-error",7),e.ALo(9,"async"),e.ALo(10,"tuiFieldError"),e.qZA(),e.TgZ(11,"label",8)(12,"tui-input-tag",5),e.NdJ("searchChange",function(r){return t.onSearchChange(r)}),e._uU(13," Scenario blocks "),e.YNc(14,Ln,2,4,"tui-data-list-wrapper",9),e.qZA(),e._UZ(15,"tui-error",7),e.ALo(16,"async"),e.ALo(17,"tuiFieldError"),e.qZA(),e.TgZ(18,"div",10)(19,"div")(20,"button",11),e._uU(21,"Save"),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(){return t.reset()}),e._uU(23," Reset "),e.qZA()()()()),2&o&&(e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("ngForOf",t.form.controls.requires.controls),e.xp6(2),e.Q6J("formControl",t.form.controls.unlocks)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("formControl",t.form.controls.unlocks)("error",e.lcZ(9,11,e.lcZ(10,13,e.DdM(19,St)))),e.xp6(4),e.Q6J("formControl",t.form.controls.blocks)("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("formControl",t.form.controls.blocks)("error",e.lcZ(16,15,e.lcZ(17,17,e.DdM(20,St)))),e.xp6(5),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[d.sg,d.O5,p._Y,p.JJ,p.JL,p.oH,p.sg,O.v0,Pe.xT,at.gX,Bn.A,nt.v,It.eC,kt.PZ,d.Ov,rt.Ag],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .requirement[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 2rem}"],changeDetection:0});class Me{}Me.\u0275fac=function(o){return new(o||Me)},Me.\u0275mod=e.oAB({type:Me}),Me.\u0275inj=e.cJS({imports:[d.ez]});var Ft=a(1842),Dt=a(8574),At=a(529);class we{constructor(o,t){this.http=t,o.baseEditionData$.pipe((0,b.U)(i=>i.extendedEditions),(0,N.w)(i=>(0,V.D)(i.map(r=>this.loadEditionLabel(r))))).subscribe(i=>{this._labels=new Map(i.map(r=>[Object.keys(r.en.edition)[0],r]))})}getMonster(o,t){return this._labels.get(o)?.en.monster[t]??""}loadEditionLabel(o){return this.http.get(`assets/json/ghs-data/${o}/label.json`,{context:(0,Ft.DN)()})}}we.\u0275fac=function(o){return new(o||we)(e.LFG(Dt.C),e.LFG(At.eN))},we.\u0275prov=e.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"});class Ie{constructor(o,t,i){this.labelService=t,this.http=i,o.baseEditionData$.pipe((0,b.U)(r=>r.extendedEditions)).subscribe(r=>this.editions=r)}getAvailableMonsters(){return this.http.get("assets/json/monsters.generated.json",{context:(0,Ft.DN)()}).pipe((0,b.U)(o=>o.filter(t=>this.editions.includes(t.edition)).map(t=>(t.displayName=this.labelService.getMonster(t.edition,t.name),t))))}}Ie.\u0275fac=function(o){return new(o||Ie)(e.LFG(Dt.C),e.LFG(we),e.LFG(At.eN))},Ie.\u0275prov=e.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:Me});var Bt=a(3675);let Hn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,i){},styles:[".tui-group{position:relative;z-index:0;display:flex}.tui-group>*{flex:1 1 0;min-width:0}.tui-group>*:nth-child(n){border-radius:0}.tui-group>*:not(:last-child){margin-right:.125rem}.tui-group_collapsed>*{z-index:1}.tui-group_collapsed>*:not(:last-child){margin-right:-1px}.tui-group_collapsed>*._readonly,.tui-group_collapsed>*._disabled,.tui-group_collapsed>*._readonly:hover,.tui-group_collapsed>*._disabled:hover{z-index:0}.tui-group_collapsed>*:hover,.tui-group_collapsed>*._hovered,.tui-group_collapsed>*._pressed{z-index:3}.tui-group_collapsed>*._invalid{z-index:2}.tui-group_collapsed>*._invalid:hover,.tui-group_collapsed>*._invalid._hovered,.tui-group_collapsed>*._invalid._pressed{z-index:4}.tui-group_collapsed>*._hosted_dropdown_focused,.tui-group_collapsed>*._focus-visible,.tui-group_collapsed>*._focused.ng-touched,.tui-group_collapsed>*._focused.ng-untouched{z-index:5}.tui-group_collapsed>*._active,.tui-group_collapsed>*[data-appearance=whiteblock-active]{z-index:6}.tui-group_collapsed>*._focus-visible._focused,.tui-group_collapsed>*._focus-visible._active,.tui-group_collapsed>*._focus-visible[data-appearance=whiteblock-active]{z-index:7}.tui-group_orientation_vertical{display:inline-flex;flex-direction:column}.tui-group_orientation_vertical>*{min-height:auto;flex:0 0 auto}.tui-group_orientation_vertical>*:not(:last-child){margin-right:0;margin-bottom:.125rem}.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}.tui-group_rounded.tui-group_orientation_horizontal>*:first-child{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal>*:last-child{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-bottom-left-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:last-child{border-top-right-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical>*:first-child{border-top-left-radius:var(--tui-radius-m);border-top-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical>*:last-child{border-bottom-left-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:last-child{border-bottom-left-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-m)}}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_vertical{width:100%}.tui-group_adaptive.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical>*:not(:last-child){margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_horizontal{flex-direction:column;width:100%}.tui-group_adaptive.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal>*:not(:last-child){margin-right:0;margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}.tui-group__auto-width-item{min-width:auto;flex:0 0 auto}.tui-group .tui-group__inherit-item{border-radius:inherit}\n"],encapsulation:2}),n})(),Et=(()=>{class n{constructor(t){this.orientation="horizontal",this.adaptive=!1,this.collapsed=!1,this.rounded=!0,this.size="m",t.addComponent(Hn)}get orientationHorizontal(){return"horizontal"===this.orientation}get orientationVertical(){return"vertical"===this.orientation}get sizeLarge(){return"l"===this.size}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.gH))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiGroup","",5,"ng-container"]],hostAttrs:["role","group",1,"tui-group"],hostVars:12,hostBindings:function(t,i){2&t&&e.ekj("tui-group_adaptive",i.adaptive)("tui-group_collapsed",i.collapsed)("tui-group_rounded",i.rounded)("tui-group_orientation_horizontal",i.orientationHorizontal)("tui-group_orientation_vertical",i.orientationVertical)("tui-group_radius_large",i.sizeLarge)},inputs:{orientation:"orientation",adaptive:"adaptive",collapsed:"collapsed",rounded:"rounded",size:"size"}}),(0,c.gn)([(0,l.TH)()],n.prototype,"orientation",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"adaptive",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"collapsed",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"rounded",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),zn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez]]}),n})();var Nt=a(3422),ut=a(6966),Vt=a(8341),Zt=a(4606),Lt=a(7377);function Rn(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=o.polymorpheusOutlet;e.xp6(1),e.hij(" ",t," ")}}const jn=function(n,o){return{$implicit:n,active:o}};function Un(n,o){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,Rn,2,1,"ng-container",5),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("polymorpheusOutlet",t.computedContent)("polymorpheusOutletContext",e.WLB(2,jn,t.value,t.computedFocused))}}function $n(n,o){1&n&&e.GkF(0)}function Jn(n,o){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,$n,1,0,"ng-container",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("polymorpheusOutlet",t.arrow)}}const Yn=["*",[["input"]]],Qn=["*","input"];let Ht=(()=>{class n extends J.F9{constructor(t,i,r,s){super(t,i),this.arrowMode=r,this.itemsHandlers=s,this.stringify=this.itemsHandlers.stringify,this.strictMatcher=j.zy,this.identityMatcher=this.itemsHandlers.identityMatcher,this.valueContent="",this.strict=!0,this.search=null,this.searchChange=new e.vpe,this.datalist="",this.open=!1}get arrow(){return this.interactive?this.arrowMode.interactive:this.arrowMode.disabled}get nativeFocusableElement(){var t,i;return null!==(i=null===(t=this.textfield)||void 0===t?void 0:t.nativeFocusableElement)&&void 0!==i?i:null}get focused(){return(0,pe.V8)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get nativeValue(){return null===this.value?this.search||"":this.stringify(this.value)}get showValueTemplate(){return(0,F.Pc)(this.value)&&!this.focused}get computedContent(){return this.valueContent||this.nativeValue}onActiveZone(t){this.updateFocused(t)}checkOption(t){this.isStrictMatch(t)&&(this.updateValue(t),this.updateSearch(null))}handleOption(t){this.setNativeValue(this.stringify(t)),this.focusInput(),this.close(),this.updateSearch(null),this.updateValue(t)}onFieldKeyDownEnter(t){var i;this.open&&t.preventDefault();const r=(null===(i=this.accessor)||void 0===i?void 0:i.getOptions())||[];1===r.length&&(this.updateValue(r[0]),this.updateSearch(null),this.close())}onValueChange(t){var i,r;this.updateSearch(t);const s=null===(i=this.accessor)||void 0===i?void 0:i.getOptions().find(u=>this.isStrictMatch(u));if(void 0!==s)return this.updateValue(s),void this.updateSearch(null);(this.strict||""===this.search)&&this.updateValue(null),null===(r=this.hostedDropdown)||void 0===r||r.updateOpen(!0)}updateValue(t){super.updateValue(t)}toggle(){var t;null===(t=this.hostedDropdown)||void 0===t||t.updateOpen(!this.open)}isStrictMatch(t){return this.strictMatcher(t,this.search||"",this.stringify)}close(){var t;null===(t=this.hostedDropdown)||void 0===t||t.updateOpen(!1)}updateSearch(t){this.search!==t&&(this.search=t,this.searchChange.emit(t))}setNativeValue(t){this.nativeFocusableElement&&(this.nativeFocusableElement.value=t)}focusInput(t=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(Vt.Ii),e.Y36(qe.Ys))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-combo-box"]],contentQueries:function(t,i,r){if(1&t&&(e.Suo(r,ue.Cc,5),e.Suo(r,at.gX,5,e.Rgc)),2&t){let s;e.iGM(s=e.CRH())&&(i.accessor=s.first),e.iGM(s=e.CRH())&&(i.datalist=s.first)}},viewQuery:function(t,i){if(1&t&&(e.Gf($e.o1,5),e.Gf(Q.yc,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.hostedDropdown=r.first),e.iGM(r=e.CRH())&&(i.textfield=r.first)}},inputs:{stringify:"stringify",strictMatcher:"strictMatcher",identityMatcher:"identityMatcher",valueContent:"valueContent",strict:"strict",search:"search"},outputs:{searchChange:"searchChange"},features:[e._Bn([(0,G.FT)(n),(0,ue.oE)(n),(0,J.wB)(n),(0,ue.P7)(Zt.Q4)],[Lt.yn]),e.qOj],ngContentSelectors:Qn,decls:7,vars:13,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-combo-box__textfield",1,"t-textfield",3,"pseudoFocus","pseudoHover","invalid","nativeId","readOnly","tuiTextfieldIcon","disabled","focusable","value","valueChange","click","keydown.enter"],["ngProjectAs","tuiContent","automation-id","tui-combo-box__template","class","t-value",5,["tuiContent"],4,"ngIf"],["icon",""],["ngProjectAs","tuiContent","automation-id","tui-combo-box__template",5,["tuiContent"],1,"t-value"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-icon"],[4,"polymorpheusOutlet"]],template:function(t,i){if(1&t&&(e.F$t(Yn),e.TgZ(0,"tui-hosted-dropdown",0),e.NdJ("openChange",function(s){return i.open=s})("tuiActiveZoneChange",function(s){return i.onActiveZone(s)}),e.TgZ(1,"tui-primitive-textfield",1),e.NdJ("valueChange",function(s){return i.onValueChange(s)})("click",function(){return i.toggle()})("keydown.enter",function(s){return i.onFieldKeyDownEnter(s)}),e.Hsn(2),e.Hsn(3,1,["ngProjectAs","input",5,["input"]]),e.YNc(4,Un,2,5,"div",2),e.qZA(),e.YNc(5,Jn,2,1,"ng-template",null,3,e.W1O),e.qZA()),2&t){const r=e.MAs(6);e.Q6J("canOpen",i.interactive)("content",i.datalist||"")("open",i.open),e.xp6(1),e.Q6J("pseudoFocus",i.computedFocused)("pseudoHover",i.pseudoHover)("invalid",i.computedInvalid)("nativeId",i.nativeId)("readOnly",i.readOnly)("tuiTextfieldIcon",i.arrow?r:"")("disabled",i.computedDisabled)("focusable",i.computedFocusable)("value",i.nativeValue),e.xp6(3),e.Q6J("ngIf",i.showValueTemplate)}},dependencies:[$e.o1,Q.yc,Nt.e,Q.B1,Pe.AW,d.O5,ye.Li],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center}.t-icon[_ngcontent-%COMP%]{pointer-events:auto}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"stringify",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"strictMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"valueContent",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"strict",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"search",void 0),n})(),Gn=(()=>{class n extends ut.D1{get value(){return this.host.nativeValue}onValueChange(t){this.host.onValueChange(t)}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-combo-box"]],features:[e._Bn([(0,ue.cp)(n)]),e.qOj]}),n})(),Wn=(()=>{class n{constructor(t){this.comboBox=t,this.strict=!0}onInput(){!this.strict&&this.comboBox.search&&this.comboBox.updateValue(this.comboBox.search)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ht))},n.\u0275dir=e.lG2({type:n,selectors:[["tui-combo-box","strict",""]],hostBindings:function(t,i){1&t&&e.NdJ("input",function(){return i.onInput()})},inputs:{strict:"strict"}}),(0,c.gn)([(0,l.TH)()],n.prototype,"strict",void 0),n})(),qn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,ye.wq,Nt.A,Q.KW,$e.jh,Zt.Ig,Vt.Mt,Pe.cn]]}),n})();var Xn=a(1225),ke=a(8865),Kn=a(6422),W=a(5825);function zt(n,o){const[,t=""]=function ei(n){const o=String(n),[t,i]=o.split("e-");let r=o;if(i){const[,s]=t.split("."),u=Number(i)+(s?.length||0);r=n.toFixed(u)}return r}(n).split(".");return(0,F.dt)(o)?t.slice(0,Math.max(0,o)):t}function Rt(n,o={}){const{decimalLimit:t,decimalSeparator:i,thousandSeparator:r,zeroPadding:s}=Object.assign(Object.assign({},W.Jl),o),u=String(Math.floor(Math.abs(n)));let h=zt(n,t);if(Number.isFinite(t))if(s){const U=Math.max(t-h.length,0);h=`${h}${"0".repeat(U)}`}else h=h.replace(/0*$/,"");const m=u.length%3;let q=(n<0?j.fv:"")+u.charAt(0);for(let U=1;U<u.length;U++)U%3===m&&u.length>3&&(q+=r),q+=u.charAt(U);return h?q+i+h:q}function jt(n){return"."===n?",":"."}function ti(n=0,o=",",t=j.f$,i,r,s=!1){ke.z.assert(Number.isInteger(n)),ke.z.assert(n>=0);let u=-1;const h=!!i&&(0,Kn.Ex)(i)||s;return i&&h&&i.addEventListener("beforeinput",()=>{u=i.selectionStart||0}),(m,I)=>{if(!m&&I.rawValue===j.fv&&r)return j.fv;if(i&&h&&(0,pe.V8)(i)){const ge=function ii(n="",o,t,i=","){const r=new RegExp(`${i}.+`),s=n.replace(r,""),u=o.replace(r,"");if(Math.abs(s.length-u.length)>2)return o.length;if(n.length===o.length)return n.indexOf(i)<=t?function oi(n,o){for(let t=0;t<o.length;t++)if(n[t]!==o[t])return"0"===o[t]?t:t+1;return o.length}(n,o):s===u?t-1:t+1;if(0===n.length)return 1;return t+(o.length-n.length)}(I.previousConformedValue,m,u);setTimeout(()=>{i.setSelectionRange(ge,ge)})}if(i&&i.ownerDocument!==(0,fe.Wf)(i)&&(0,pe.V8)(i)&&I.currentCaretPosition){const ge=I.currentCaretPosition+function ri(n="",o,t){if(Math.abs(n.length-o.length)>2)return 0;const r=n.split(t).length;return o.split(t).length-r}(I.previousConformedValue,m,t);setTimeout(()=>{i.setSelectionRange(ge,ge)})}if(""===m||!n)return{value:m};const q=function ni(n,o=","){return n.includes(o)?n:n+o}(m,o),U=q.split(o)[1];return{value:q+"0".repeat(n-U.length)}}}const Ut=/[1-9]/;function $t({allowDecimal:n=!1,decimalSymbol:o=",",thousandSymbol:t=j.f$,autoCorrectDecimalSymbol:i=!0,decimalLimit:r=2,requireDecimal:s=!1,allowNegative:u=!1,integerLimit:h=0}={}){return ke.z.assert(Number.isInteger(r)),ke.z.assert(r>=0),ke.z.assert(Number.isInteger(h)),ke.z.assert(h>=0),(m,{previousConformedValue:I})=>{I&&s&&m.split(t).join("")===I.split(t).join("").split(o).join("")&&(m=I);const q=(m[0]===j.fv||m[0]===j.F)&&u;if(function ci(n,o,t){return t?/^[,.]$/.test(n):n===o}(m,o,i)&&n)return["0",o,W.hW];q&&(m=m.slice(1));const U=function ui(n,o,t){return t?Math.max(n.lastIndexOf(o),n.lastIndexOf(jt(o))):n.lastIndexOf(o)}(m,o,i),he=-1!==U,ge=he?m.slice(0,U):m,yo=ge.match(new RegExp(t,"g"))||[],un=(h?ge.slice(0,h+yo.length):ge).replace(W.R3,""),[Po]=un.match(W.s9)||[""],wo=Po.length,cn=un.replace(/^0+(?!\.|$)/,"").trim(),Io=function li(n,o){return n.length>3?n.replace(/\B(?=(\d{3})+(?!\d))/g,o):n}(cn,t),Te=Jt(Io);if(he&&n||s){const Ge=he?Jt(m.slice(U+1).replace(W.R3,"")):[],We=r?Ge.slice(0,r):Ge;m[U]!==jt(o)&&Te.push(W.v1),Te.push(o,W.v1,...We);for(let ln=0;ln<r-We.length;ln++)Te.push(W.hW)}const ko=1===Te.length&&"0"===cn;return q&&(0===Te.length&&Te.push(W.hW),Te.unshift(j.fv)),function ai(n,o=!1,t=0){if(o||0===t)return n;const i=n.indexOf(W.hW);if(-1===i)return n;const s=n[i+1]===W.v1;return s&&1===t?n:s?(n.unshift(Ut),n):(n[i]=Ut,n)}(Te,ko,wo)}}function Jt(n){return n.split("").map(o=>W.hW.test(o)?W.hW:o)}function di({thousandSeparator:n}){return!W.YZ.includes(n)}function Qe(n,o,t){return parseFloat(n.split(t).join("").split(o).join("."))}let Yt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiValueAccessor",""]],features:[e._Bn([Lt.E2])]}),n})(),Qt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var hi=a(2243);let Gt=(()=>{class n{constructor(t,i,r){this._renderer=t,this._elementRef=i,this._compositionMode=r,this.textMaskConfig={mask:[],guide:!0,placeholderChar:"_",pipe:void 0,keepCharPositions:!1},this.onChange=s=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mi(){const n=(0,d.q)()?(0,d.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}ngOnChanges(){this._setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)}writeValue(t){this._setupMask(),this._renderer.setProperty(this.inputElement,"value",t??""),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&(this._setupMask(),void 0!==this.textMaskInputElement&&(this.textMaskInputElement.update(t),this.onChange(t=this.inputElement.value)))}_setupMask(t=!1){this.inputElement||(this.inputElement="INPUT"===this._elementRef.nativeElement.tagName.toUpperCase()?this._elementRef.nativeElement:this._elementRef.nativeElement.getElementsByTagName("INPUT")[0]),this.inputElement&&t&&(this.textMaskInputElement=(0,hi.createTextMaskInputElement)(Object.assign({inputElement:this.inputElement},this.textMaskConfig)))}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this._handleInput(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(p.ve,8))},n.\u0275dir=e.lG2({type:n,selectors:[["","textMask",""]],hostBindings:function(t,i){1&t&&e.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},inputs:{textMaskConfig:["textMask","textMaskConfig"]},exportAs:["textMask"],features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0}]),e.TTD]}),n})(),Wt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();function gi(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"section",2)(2,"button",3),e.NdJ("mousedown",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onButtonMouseDown(r,s.plusButtonDisabled))})("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.increaseValue())}),e.qZA(),e.TgZ(3,"button",4),e.NdJ("mousedown",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onButtonMouseDown(r,s.minusButtonDisabled))})("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.decreaseValue())}),e.qZA()(),e.BQk()}if(2&n){const t=o.ngIf,i=e.oxw(2);e.xp6(2),e.Q6J("icon",i.iconUp)("appearance",i.options.appearance)("title",t[0])("disabled",i.plusButtonDisabled)("focusable",!1),e.xp6(1),e.Q6J("icon",i.iconDown)("appearance",i.options.appearance)("disabled",i.minusButtonDisabled)("focusable",!1)("title",t[1])}}function fi(n,o){if(1&n&&(e.ynx(0),e.YNc(1,gi,4,10,"ng-container",1),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.minusTexts$))}}const _i=["*",[["input"]]],vi=["*","input"],qt={icons:{up:"tuiIconPlus",down:"tuiIconMinus"},appearance:"textfield",hideButtons:!1,min:0,max:Number.MAX_SAFE_INTEGER,step:1,postfix:""},Xt=new e.OlP("[TUI_INPUT_COUNT_OPTIONS]: Default parameters for input count component",{factory:()=>qt});let bi=(()=>{class n extends J.F9{constructor(t,i,r,s,u,h,m,I){super(t,i),this.appearance=r,this.textfieldSize=s,this.minusTexts$=u,this.isMobile=h,this.options=m,this.numberFormat=I,this.step=this.options.step,this.min=this.options.min,this.max=this.options.max,this.hideButtons=this.options.hideButtons,this.prefix="",this.postfix=this.options.postfix}getMask(t){return{mask:$t({allowNegative:t,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator}),guide:!1}}get buttonsHidden(){return this.hideButtons||"table"===this.appearance}get iconUp(){return this.options.icons.up}get iconDown(){return this.options.icons.down}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get size(){return this.textfieldSize.size}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get exampleText(){return String(this.min)}get computedValue(){return this.focused?this.nativeValue:this.formatNumber(this.value)}get minusButtonDisabled(){return!this.interactive||(0,F.Pc)(this.value)&&this.value<=this.min}get plusButtonDisabled(){return!this.interactive||(0,F.Pc)(this.value)&&this.value>=this.max}onButtonMouseDown(t,i=!1){i||!this.nativeFocusableElement||this.isMobile||(t.preventDefault(),this.nativeFocusableElement.focus())}onFocused(t){t||this.onBlur(),this.updateFocused(t)}onValueChange(){const t=this.capValue(this.nativeNumberValue);if(this.isNotNumber(t))return void this.updateValue(null);const i=this.formatNumber(t);this.nativeValue!==i&&(this.nativeValue=i),this.updateValue(t)}decreaseValue(){this.readOnly||this.safeUpdateValue((this.value||0)-this.step)}increaseValue(){this.readOnly||this.safeUpdateValue((this.value||0)+this.step)}onKeydown(t){switch(t.key){case"ArrowUp":case"Up":this.increaseValue(),t.preventDefault();break;case"ArrowDown":case"Down":this.decreaseValue(),t.preventDefault()}}get nativeNumberValue(){return parseInt(this.nativeValue.split(this.numberFormat.thousandSeparator).join(""),10)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){this.nativeFocusableElement&&(this.nativeFocusableElement.value=t)}safeUpdateValue(t){const i=(0,Xn.Ki)(t,this.min,this.max);this.updateValue(i),this.nativeValue=this.formatNumber(i)}capValue(t){const i=Math.min(t,this.max);return Number.isNaN(i)||i<this.min?null:i}onBlur(){if(this.isNotNumber(this.value))return void this.updateValue(null);const t=Math.max(this.nativeNumberValue||0,this.min),i=this.formatNumber(t);this.nativeValue=i,this.updateValue(t),this.primitiveTextfield&&(this.primitiveTextfield.value=i)}formatNumber(t){return this.isNotNumber(t)?"":Rt(t,this.numberFormat)}isNotNumber(t){return Number.isNaN(t)||!(0,F.Pc)(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(ue.jt),e.Y36(Pe.kI),e.Y36(qe.mT),e.Y36(G.fL),e.Y36(Xt),e.Y36(ue.HO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-input-count"]],viewQuery:function(t,i){if(1&t&&e.Gf(Q.yc,5),2&t){let r;e.iGM(r=e.CRH())&&(i.primitiveTextfield=r.first)}},hostVars:3,hostBindings:function(t,i){2&t&&(e.uIk("data-size",i.size),e.ekj("_hide-buttons",i.buttonsHidden))},inputs:{step:"step",min:"min",max:"max",hideButtons:"hideButtons",prefix:"prefix",postfix:"postfix"},features:[e._Bn([(0,G.FT)(n),(0,J.wB)(n)]),e.qOj],ngContentSelectors:vi,decls:4,vars:13,consts:[["tuiValueAccessor","",1,"t-textfield",3,"pseudoFocus","pseudoHover","pseudoActive","focusable","nativeId","prefix","postfix","disabled","readOnly","textMask","invalid","value","valueChange","keydown","focusedChange"],[4,"ngIf"],[1,"t-buttons"],["tuiIconButton","","type","button","automation-id","tui-input-count__plus-button","size","s",1,"t-button","t-button_plus",3,"icon","appearance","title","disabled","focusable","mousedown","click"],["tuiIconButton","","type","button","automation-id","tui-input-count__minus-button","size","s",1,"t-button","t-button_minus",3,"icon","appearance","disabled","focusable","title","mousedown","click"]],template:function(t,i){1&t&&(e.F$t(_i),e.TgZ(0,"tui-primitive-textfield",0),e.NdJ("valueChange",function(){return i.onValueChange()})("keydown",function(s){return i.onKeydown(s)})("focusedChange",function(s){return i.onFocused(s)}),e.Hsn(1),e.Hsn(2,1,["ngProjectAs","input",5,["input"]]),e.qZA(),e.YNc(3,fi,3,3,"ng-container",1)),2&t&&(e.Q6J("pseudoFocus",i.pseudoFocus)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("focusable",i.focusable)("nativeId",i.nativeId)("prefix",i.prefix)("postfix",i.postfix)("disabled",i.computedDisabled)("readOnly",i.readOnly)("textMask",i.getMask(i.min<0))("invalid",i.computedInvalid)("value",i.computedValue),e.xp6(3),e.Q6J("ngIf",!i.buttonsHidden))},dependencies:[Q.yc,O.v0,Q.B1,Yt,Gt,d.O5,d.Ov],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);border-radius:var(--tui-radius-m);height:var(--tui-height-m);color:var(--tui-text-01);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}[data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l)}.t-textfield[_ngcontent-%COMP%]{position:relative;border-radius:inherit;text-align:inherit;flex-grow:1;min-width:0}[_nghost-%COMP%]:not(._hide-buttons)   .t-textfield[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.t-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:.125rem;height:100%}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{display:flex;width:calc(var(--tui-height-m) * .75);height:calc(50% - .0625rem)}.t-buttons[_ngcontent-%COMP%]   .t-button_plus[_ngcontent-%COMP%]{margin-bottom:.125rem;border-radius:0 var(--tui-radius-m) 0 0}.t-buttons[_ngcontent-%COMP%]   .t-button_minus[_ngcontent-%COMP%]{border-radius:0 0 var(--tui-radius-m)}[data-size=l][_nghost-%COMP%]   .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{width:calc(var(--tui-height-l) * .75)}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"step",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"min",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"max",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideButtons",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"prefix",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"postfix",void 0),(0,c.gn)([l.UM],n.prototype,"getMask",null),n})(),Ci=(()=>{class n extends ut.D1{onValueChange(){this.host.onValueChange()}ngAfterViewInit(){if(this.host.nativeFocusableElement){const{nativeFocusableElement:t}=this.host;t.autocomplete="off",t.inputMode="numeric",t.maxLength=t.maxLength>-1?t.maxLength:18}}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-input-count"]],features:[e._Bn([(0,ue.cp)(n)]),e.qOj]}),n})(),Mi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Wt,O.fN,Q.KW,Pe.cn,Qt,ye.wq]]}),n})();var Ti=a(710);let xi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Se=a(7846);const Oi=["*"];let yi=(()=>{class n extends J.F9{constructor(t,i,r){super(t,i),this.modeDirective=r,this.contentAlign="right",this.hideCheckbox=!1,this.size="l"}get nativeFocusableElement(){return this.checkbox?this.checkbox.nativeFocusableElement:null}get checked(){return!1!==this.value&&this.hideCheckbox}get checkboxSize(){return"l"===this.size?"l":"m"}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get appearance(){var t;return null!==(t=this.modeDirective)&&void 0!==t&&t.mode?this.checked?"primary":"secondary":this.checked?"whiteblock-active":"whiteblock"}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(it.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-checkbox-block"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ye,5),2&t){let r;e.iGM(r=e.CRH())&&(i.checkbox=r.first)}},hostVars:6,hostBindings:function(t,i){2&t&&(e.uIk("data-tui-host-align",i.contentAlign)("data-size",i.size),e.ekj("_hidden_checkbox",i.hideCheckbox)("_active",i.checked))},inputs:{contentAlign:"contentAlign",hideCheckbox:"hideCheckbox",size:"size"},features:[e._Bn([(0,G.FT)(n),(0,J.wB)(n)]),e.qOj],ngContentSelectors:Oi,decls:7,vars:15,consts:[[1,"t-wrapper"],["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],[1,"t-content-wrapper"],[1,"t-content"],[1,"t-view",3,"disabled","nativeId","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","focusable","ngModel","ngModelChange","focusedChange","focusVisibleChange"],[1,"t-label"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"tui-checkbox",4),e.NdJ("ngModelChange",function(s){return i.onModelChange(s)})("focusedChange",function(s){return i.onFocused(s)})("focusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA(),e.TgZ(5,"div",5),e.Hsn(6),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("active",i.pseudoActive)("invalid",i.computedInvalid),e.xp6(3),e.Q6J("disabled",i.computedDisabled||i.readOnly)("nativeId",i.nativeId)("pseudoInvalid",i.computedInvalid)("pseudoFocus",!1)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("size",i.checkboxSize)("focusable",i.focusable)("ngModel",i.value))},dependencies:[Ye,Se.o,p.JJ,p.On],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:inline-block;vertical-align:top;border-radius:var(--tui-radius-m)}[data-size=m][_nghost-%COMP%], [data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{position:relative;border-radius:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.t-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}[data-size=s][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-l)}.t-content[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:inherit}[data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{flex-direction:row-reverse}[data-size=s][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .5rem 0 1rem}[data-size=s]._hidden_checkbox[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .75rem}[data-size=m][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .75rem 0 1rem}[data-size=m]._hidden_checkbox[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=l]._hidden_checkbox[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 2.25rem}.t-view[_ngcontent-%COMP%]{margin-top:.75rem;margin-right:.75rem;align-self:flex-start}[data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:0}[data-size=s][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=m][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.875rem}[data-size=l][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:1rem}._hidden_checkbox[_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{position:absolute;height:1px;width:1px;margin:-1px;border:0;padding:0;overflow:hidden;clip:rect(0,0,0,0);-webkit-clip-path:inset(0);clip-path:inset(0)}.t-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}._hidden_checkbox[_nghost-%COMP%]   .t-label[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"contentAlign",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideCheckbox",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),n})(),Pi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.u5,Ti.VE,xi,wt,Se.W]]}),n})();var wi=a(6942);let Ii=(()=>{class n{get query(){return this.accessor.nativeFocusableElement&&this.accessor.nativeFocusableElement.value||""}filter(t,i,r,s){return t?(0,wi.fR)(t)?this.filterFlat(t,i,r,s):this.filter2d(t,i,r,s):null}filterFlat(t,i,r,s){const u=this.getMatch(t,r,s);return(0,F.Pc)(u)?t:t.filter(h=>i(h,s,r))}filter2d(t,i,r,s){const u=t.find(h=>(0,F.Pc)(this.getMatch(h,r,s)));return(0,F.Pc)(u)?t:t.map(h=>this.filterFlat(h,i,r,s))}getMatch(t,i,r){return t.find(s=>i(s).toLocaleLowerCase()===r.toLocaleLowerCase())}}return(0,c.gn)([l.UM],n.prototype,"filter",null),n})(),ki=(()=>{class n extends Ii{constructor(t){super(),this.accessor=t}transform(t,i){return this.filter(t,j.LQ,i,this.query)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(G.KZ,16))},n.\u0275pipe=e.Yjl({name:"tuiFilterByInputWith",type:n,pure:!1}),n})(),Si=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),Fi=(()=>{class n{transform(t){return({$implicit:i})=>t(i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"tuiStringifyContent",type:n,pure:!0}),n})(),Di=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();function Ai(n,o){if(1&n&&(e._UZ(0,"tui-data-list-wrapper",8),e.ALo(1,"tuiFilterByInputWith"),e.ALo(2,"tuiStringifyContent")),2&n){const t=e.oxw();e.Q6J("items",e.xi3(1,2,t.allMonsters,t.stringifySearch))("itemContent",e.lcZ(2,5,t.stringify))}}function Bi(n,o){if(1&n&&(e.TgZ(0,"tui-checkbox-block",19),e._uU(1," Draw extra card "),e._UZ(2,"tui-tooltip",20),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("formControl",t.controls.drawExtra)}}function Ei(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",9)(1,"div",10),e._UZ(2,"img",11),e.TgZ(3,"div",12)(4,"div",13),e._uU(5),e.TgZ(6,"tui-svg",14),e.NdJ("click",function(){const s=e.CHM(t).index,u=e.oxw();return e.KtG(u.remove(s))}),e.qZA()(),e.TgZ(7,"tui-input-count",15),e._uU(8," Level ajustment "),e.qZA()()(),e.TgZ(9,"div",16)(10,"tui-checkbox-block",17),e._uU(11,"Is ally"),e.qZA(),e.YNc(12,Bi,3,1,"tui-checkbox-block",18),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,r=e.oxw();e.xp6(2),e.Q6J("src","assets/images/ghs/monster/thumbnail/"+r.addedMonsters[i].edition+"-"+r.addedMonsters[i].name+".png",e.LSH),e.xp6(3),e.hij(" ",r.addedMonsters[i].displayName," "),e.xp6(2),e.Q6J("formControl",t.controls.levelAdjustment)("min",-1)("max",7),e.xp6(2),e.Q6J("collapsed",!0),e.xp6(1),e.Q6J("formControl",t.controls.isAlly),e.xp6(2),e.Q6J("ngIf",r.isDrawExtraNeeded(r.addedMonsters[i]))}}class Le extends Ct{constructor(o,t,i){super(o,t,r=>r.monsters$,(r,s)=>r.updateMonsters(s),()=>et({name:["",p.kI.required],levelAdjustment:[0],isAlly:[!1],drawExtra:[!1]})),this.monstersProvider=i,this.allMonsters=[],this.addedMonsters=[],this.stringify=r=>r.displayName,this.stringifySearch=r=>`${r.name} ${r.displayName}`,this.selectedMonster=null}ngOnInit(){this.monstersProvider.getAvailableMonsters().subscribe(o=>{this.allMonsters=o,this.reset()})}isDrawExtraNeeded(o){return-1!==this.addedMonsters.findIndex(t=>void 0!==t.deck&&t!==o&&t.deck===o.deck&&t.edition===o.edition)}addNewMonster(o){o&&(this.addNew(),this.form.controls.at(0)?.patchValue({name:o.name}),this.addedMonsters.unshift(o),setTimeout(()=>this.selectedMonster=null,0))}remove(o){this.addedMonsters.splice(o,1),super.remove(o)}reset(){this.addedMonsters=[];for(const o of this.savedModel){const t=this.allMonsters.find(i=>i.name===o.name);this.addedMonsters.push(t||{name:o.name,displayName:`<Unknown monster> ${o.name}`,edition:""})}super.reset()}}Le.\u0275fac=function(o){return new(o||Le)(e.Y36(_.gz),e.Y36(g.a3),e.Y36(Ie))},Le.\u0275cmp=e.Xpm({type:Le,selectors:[["ghse-scenario-monsters-editor"]],features:[e._Bn([g.a3]),e.qOj],decls:13,vars:5,consts:[[1,"monster-search",3,"strict","stringify","ngModel","ngModelChange"],["tuiTextfield","","placeholder","Type a name"],[3,"items","itemContent",4,"tuiDataList"],[1,"monsters"],["class","monster-form",4,"ngFor","ngForOf"],[1,"form-row","buttons"],["tuiButton","","type","button",3,"disabled","click"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[3,"items","itemContent"],[1,"monster-form"],[1,"form-row","monster-info"],[1,"thumbnail",3,"src"],[1,"info-controls"],[1,"form-row","name"],["src","tuiIconTrashLarge",1,"delete",3,"click"],[1,"form-row",3,"formControl","min","max"],["tuiGroup","","orientation","vertical",1,"form-row","additional-info",3,"collapsed"],[3,"formControl"],["nativeId","drawExtra",3,"formControl",4,"ngIf"],["nativeId","drawExtra",3,"formControl"],["describeId","drawExtra","content","This monster shares the same deck as the other added monster. You can decide whether they will use the same ability card for a round (then leave the checkbox empty) or if this monster should draw another card (then tick the checkbox)"]],template:function(o,t){1&o&&(e.TgZ(0,"tui-combo-box",0),e.NdJ("ngModelChange",function(r){return t.selectedMonster=r})("ngModelChange",function(r){return t.addNewMonster(r)}),e._uU(1," Search monsters to add "),e._UZ(2,"input",1),e.YNc(3,Ai,3,7,"tui-data-list-wrapper",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,Ei,13,8,"form",4),e.qZA(),e.TgZ(6,"form")(7,"div",5)(8,"div")(9,"button",6),e.NdJ("click",function(){return t.save()}),e._uU(10,"Save"),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return t.reset()}),e._uU(12," Reset "),e.qZA()()()()),2&o&&(e.Q6J("strict",!0)("stringify",t.stringify)("ngModel",t.selectedMonster),e.xp6(5),e.Q6J("ngForOf",t.form.controls),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[d.sg,d.O5,p._Y,p.JJ,p.JL,p.oH,O.v0,C.P,at.gX,It.eC,Q.MB,Bt.w,Et,Ht,Wn,Gn,p.On,p.F,bi,Ci,yi,ki,Fi],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .monster-search[_ngcontent-%COMP%]{width:20rem;margin-bottom:1.5rem}[_nghost-%COMP%]   .monsters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));gap:1.5rem}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .monster-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .monster-info[_ngcontent-%COMP%]   .info-controls[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .monster-info[_ngcontent-%COMP%]   .info-controls[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font:var(--tui-font-heading-6);display:flex;justify-content:space-between}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .additional-info[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .monster-form[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:5rem;height:5rem;margin-right:1rem}"],changeDetection:0});class He{}He.\u0275fac=function(o){return new(o||He)},He.\u0275cmp=e.Xpm({type:He,selectors:[["ghse-scenario-rooms-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-rooms-editor works!"),e.qZA())}});class ze{}ze.\u0275fac=function(o){return new(o||ze)},ze.\u0275cmp=e.Xpm({type:ze,selectors:[["ghse-scenario-rules-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-rules-editor works!"),e.qZA())}});class Re{}Re.\u0275fac=function(o){return new(o||Re)},Re.\u0275cmp=e.Xpm({type:Re,selectors:[["ghse-scenario-sections-editor"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"scenario-sections-editor works!"),e.qZA())}});class Fe{constructor(o){this.serviceFactory=o}canActivateChild(o,t){const i=o.paramMap.get("id")??o.parent?.paramMap.get("id");return!!i&&(""===o.routeConfig?.path||this.serviceFactory.create(i).exists$)}}Fe.\u0275fac=function(o){return new(o||Fe)(e.LFG(P))},Fe.\u0275prov=e.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"});class ce{constructor(o){this.factory=o}resolve(o,t){const i=o.paramMap.get("id")??o.parent?.paramMap.get("id")??"new";return this.factory.create(i)}}ce.\u0275fac=function(o){return new(o||ce)(e.LFG(P))},ce.\u0275prov=e.Yz7({token:ce,factory:ce.\u0275fac,providedIn:Me});var Kt=a(8421);const{isArray:Vi}=Array;var en=a(5403);var zi=a(9468),Ri=a(4482),Ui=a(5698),je=a(4258);let tn=(()=>{class n{constructor(t,i){this.tuiFocusableComponent=t,this.elementRef=i}get element(){var t;return(null===(t=this.tuiFocusableComponent)||void 0===t?void 0:t.nativeFocusableElement)||this.elementRef.nativeElement}get isTextFieldElement(){return this.element.matches("input, textarea")}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n}),n})(),Yi=(()=>{class n extends tn{constructor(t,i,r){super(t,i),this.animationFrame$=r}setFocus(){this.isTextFieldElement?function Li(...n){return 1===(n=function Zi(n){return 1===n.length&&Vi(n[0])?n[0]:n}(n)).length?(0,Kt.Xf)(n[0]):new k.y(function Hi(n){return o=>{let t=[];for(let i=0;t&&!o.closed&&i<n.length;i++)t.push((0,Kt.Xf)(n[i]).subscribe((0,en.x)(o,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}o.next(r)})))}}(n))}((0,re.H)(1e3),this.animationFrame$.pipe((0,zi.p)(j.Yg),(0,b.U)(()=>this.element.closest(".ng-animating")),function ji(n){return(0,Ri.e)((o,t)=>{let i=!1,r=0;o.subscribe((0,en.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(Boolean),(0,Ui.q)(1))).subscribe(()=>this.element.focus()):this.element.focus()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(G.KZ,10),e.Y36(e.SBq),e.Y36(Ee.L1))},n.\u0275dir=e.lG2({type:n,features:[e.qOj]}),n})(),Qi=(()=>{class n extends tn{constructor(t,i,r,s,u){super(t,i),this.renderer=r,this.ngZone=s,this.windowRef=u,this.patchCssStyles()}setFocus(){this.isTextFieldElement?this.ngZone.runOutsideAngular(()=>this.iosWebkitAutofocus()):this.element.focus()}iosWebkitAutofocus(){var t;const i=this.makeFakeInput(),r=this.getDurationTimeBeforeFocus();let s=0,u=0;const h=()=>i.focus({preventScroll:!0}),m=()=>{clearTimeout(s),s=this.windowRef.setTimeout(()=>{clearTimeout(u),i.removeEventListener("blur",h),i.removeEventListener("focus",m),u=this.windowRef.setTimeout(()=>{this.element.focus({preventScroll:!1}),i.remove()},r)})};i.addEventListener("blur",h,{once:!0}),i.addEventListener("focus",m),this.insideDialog()?this.windowRef.document.body.appendChild(i):null===(t=this.element.parentElement)||void 0===t||t.appendChild(i),i.focus({preventScroll:!0})}makeFakeInput(){const t=this.renderer.createElement("input"),i=this.element.getBoundingClientRect();return t.style.height=(0,je.O)(i.height),t.style.width=(0,je.O)(i.width/2),t.style.position="fixed",t.style.opacity="0",t.style.fontSize=(0,je.O)(16),t.readOnly=!0,t.style.top=(0,je.O)(i.top),t.style.left=(0,je.O)(i.left),t}getDurationTimeBeforeFocus(){return parseFloat(this.windowRef.getComputedStyle(this.element).getPropertyValue("--tui-duration"))||0}insideDialog(){return!!this.element.closest("tui-dialog")}patchCssStyles(){const t=this.windowRef.document;for(const i of[t.documentElement,t.body])i.style.setProperty("overflow","auto"),i.style.setProperty("height","100%")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(G.KZ,10),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(Ee.m9))},n.\u0275dir=e.lG2({type:n,features:[e.qOj]}),n})();const nn=new e.OlP("[TUI_AUTOFOCUS_HANDLER]: Autofocusing handler"),Gi=[{provide:nn,useFactory:(n,o,t,i,r,s,u)=>u?new Qi(n,o,i,r,s):new Yi(n,o,t),deps:[[new e.FiY,new e.PiD,G.KZ],e.SBq,Ee.L1,e.Qsj,e.R0b,Ee.m9,G.FA]}];let Wi=(()=>{class n{constructor(t){this.handler=t,this.autoFocus=!0}ngAfterViewInit(){(function Ni(n){return null!==n&&typeof n<"u"&&"false"!=`${n}`})(this.autoFocus)&&this.handler.setFocus()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(nn))},n.\u0275dir=e.lG2({type:n,selectors:[["","tuiAutoFocus",""]],inputs:{autoFocus:["tuiAutoFocus","autoFocus"]},features:[e._Bn(Gi)]}),n})(),qi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Xi=a(3281);const Ki=["*"];let eo=(()=>{class n{constructor(){this.name="tui-radio-group-"+n.index++}}return n.index=0,n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio-group"]],inputs:{name:"name"},ngContentSelectors:Ki,decls:1,vars:0,template:function(t,i){1&t&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"name",void 0),n})();const to=["focusableElement"];function no(n,o){if(1&n&&e._UZ(0,"div",4),2&n){const t=e.oxw();e.Q6J("@tuiScaleIn",t.animation)}}const on={size:"m",appearances:{unchecked:"outline",checked:"primary"}},rn=new e.OlP("[TUI_RADIO_OPTIONS]: Default parameters for radio component",{factory:()=>on});let sn=(()=>{class n extends J.F9{constructor(t,i,r,s,u){super(t,i),this.animationOptions=r,this.options=s,this.radioGroup=u,this.identityMatcher=j.bg,this.name=null,this.size=this.options.size,this.pseudoDisabled=!1,this.animation=Object.assign({value:""},this.animationOptions)}get appearance(){return this.checked?this.options.appearances.checked:this.options.appearances.unchecked}get computedDisabled(){return this.disabled||this.pseudoDisabled}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,pe.V8)(this.nativeFocusableElement)}get checked(){return null===this.value?null===this.item:null!=this.item&&this.identityMatcher(this.value,this.item)}get computedName(){return this.name||this.radioGroupName||this.controlName||""}get isFocusable(){return!this.readOnly&&this.computedFocusable}onChecked(t){t&&this.updateValue(void 0!==this.item?this.item:this.fallbackValue)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}get radioGroupName(){return null===this.radioGroup?null:this.radioGroup.name}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(ue.Pw),e.Y36(rn),e.Y36(eo,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio"]],viewQuery:function(t,i){if(1&t&&e.Gf(to,5),2&t){let r;e.iGM(r=e.CRH())&&(i.focusableElement=r.first)}},hostVars:3,hostBindings:function(t,i){2&t&&(e.uIk("data-size",i.size),e.ekj("_disabled",i.computedDisabled))},inputs:{item:"item",identityMatcher:"identityMatcher",name:"name",size:"size",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,G.FT)(n),(0,J.wB)(n)]),e.qOj],decls:4,vars:12,consts:[["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],["class","t-mark",4,"ngIf"],["type","radio",1,"t-native",3,"id","disabled","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-mark"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,no,1,1,"div",1),e.TgZ(2,"input",2,3),e.NdJ("tuiFocusedChange",function(s){return i.onFocused(s)})("tuiCheckedChange",function(s){return i.onChecked(s)})("tuiFocusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA()()),2&t&&(e.Q6J("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("active",i.pseudoActive)("invalid",i.computedInvalid),e.xp6(1),e.Q6J("ngIf",i.checked),e.xp6(1),e.Q6J("id",i.id)("disabled",i.computedDisabled)("tuiChecked",i.checked)("tuiFocusable",i.isFocusable),e.uIk("name",i.computedName))},dependencies:[Se.o,d.O5,Mt,Be.t,xt,yt],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0;border-radius:100%}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-mark[_ngcontent-%COMP%]{position:absolute;background-color:currentColor;border-radius:100%}[data-size=m][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.25rem;width:.5rem;height:.5rem}[data-size=l][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.4375rem;width:.625rem;height:.625rem}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-native[_ngcontent-%COMP%]{cursor:default}"],data:{animation:[Xi.gI]},changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"name",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"pseudoDisabled",void 0),n})(),io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Tt,Be.u,Ot,Pt,Se.W]]}),n})();const oo=["*"];let ro=(()=>{class n extends J.F9{constructor(t,i,r){super(t,i),this.modeDirective=r,this.identityMatcher=j.bg,this.contentAlign="right",this.size="l",this.hideRadio=!1,this.pseudoDisabled=!1}get nativeFocusableElement(){return this.radio?this.radio.nativeFocusableElement:null}get focused(){return!!this.radio&&this.radio.focused}get computedDisabled(){return this.disabled||this.pseudoDisabled}get checked(){return this.value===this.item&&this.hideRadio}get checkboxSize(){return"l"===this.size?"l":"m"}get appearance(){var t;return null!==(t=this.modeDirective)&&void 0!==t&&t.mode?this.checked?"primary":"secondary":this.checked?"whiteblock-active":"whiteblock"}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}onModelChange(t){this.updateValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(it.w,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-radio-block"]],viewQuery:function(t,i){if(1&t&&e.Gf(sn,5),2&t){let r;e.iGM(r=e.CRH())&&(i.radio=r.first)}},hostVars:8,hostBindings:function(t,i){2&t&&(e.uIk("data-tui-host-align",i.contentAlign)("data-size",i.size),e.ekj("_hidden_radio",i.hideRadio)("_disabled",i.computedDisabled)("_active",i.checked))},inputs:{item:"item",identityMatcher:"identityMatcher",contentAlign:"contentAlign",size:"size",hideRadio:"hideRadio",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,G.FT)(n),(0,J.wB)(n)]),e.qOj],ngContentSelectors:oo,decls:7,vars:19,consts:[[1,"t-wrapper"],["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],[1,"t-content-wrapper"],[1,"t-content"],[1,"t-view",3,"focusable","identityMatcher","item","name","nativeId","readOnly","pseudoDisabled","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","ngModel","ngModelChange","focusedChange","focusVisibleChange"],[1,"t-label"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"tui-radio",4),e.NdJ("ngModelChange",function(s){return i.onModelChange(s)})("focusedChange",function(s){return i.onFocused(s)})("focusVisibleChange",function(s){return i.onFocusVisible(s)}),e.qZA(),e.TgZ(5,"div",5),e.Hsn(6),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("active",i.pseudoActive)("invalid",i.computedInvalid),e.xp6(3),e.Q6J("focusable",i.focusable)("identityMatcher",i.identityMatcher)("item",i.item)("name",i.computedName||"")("nativeId",i.nativeId)("readOnly",i.readOnly)("pseudoDisabled",i.computedDisabled)("pseudoInvalid",i.computedInvalid)("pseudoFocus",!1)("pseudoHover",i.pseudoHover)("pseudoActive",i.pseudoActive)("size",i.checkboxSize)("ngModel",i.value))},dependencies:[sn,Se.o,p.JJ,p.On],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:inline-block;vertical-align:top;border-radius:var(--tui-radius-m)}[data-size=m][_nghost-%COMP%], [data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{position:relative;border-radius:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}.t-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}[data-size=s][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-content-wrapper[_ngcontent-%COMP%]{min-height:var(--tui-height-l)}.t-content[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:inherit}[data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{flex-direction:row-reverse}[data-size=s][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .5rem 0 1rem}[data-size=s]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem 0 .75rem}[data-size=m][data-tui-host-align=right][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 .75rem 0 1rem}[data-size=m]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 1rem}[data-size=l]._hidden_radio[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding:0 2.25rem}.t-view[_ngcontent-%COMP%]{margin-top:.75rem;margin-right:.75rem;align-self:flex-start}[data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:0}[data-size=s][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}[data-size=s][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=m][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:.875rem}[data-size=l][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-top:1rem}[data-size=l][data-tui-host-align=right][_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{margin-left:1rem;margin-right:0}._hidden_radio[_nghost-%COMP%]   .t-view[_ngcontent-%COMP%]{position:absolute;height:1px;width:1px;margin:-1px;border:0;padding:0;overflow:hidden;clip:rect(0,0,0,0);-webkit-clip-path:inset(0);clip-path:inset(0)}.t-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}._hidden_radio[_nghost-%COMP%]   .t-label[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"identityMatcher",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"contentAlign",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"size",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"hideRadio",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"pseudoDisabled",void 0),n})(),so=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.u5,io,Se.W]]}),n})();var an=a(7721);function ao(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=o.polymorpheusOutlet;e.xp6(1),e.hij(" ",t," ")}}function uo(n,o){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,ao,2,1,"ng-container",5),e.qZA()),2&n){e.oxw();const t=e.MAs(8);e.xp6(1),e.Q6J("polymorpheusOutlet",t)}}function co(n,o){1&n&&e.GkF(0)}function lo(n,o){1&n&&e.Hsn(0,2)}const po=["*",[["input"]],[["tuiContent"]]],ho=function(n,o,t,i,r){return[n,o,t,i,r]},mo=["*","input","tuiContent"];let fo=(()=>{class n extends J.F9{constructor(t,i,r,s){super(t,i),this.numberFormat=r,this.isIOS=s,this.unfinishedValue="",this.min=Number.MIN_SAFE_INTEGER,this.max=Number.MAX_SAFE_INTEGER,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.polymorpheusValueContent=j.Mm,this.mask=(u,h,m,I)=>({mask:$t({allowNegative:u,decimalLimit:m,allowDecimal:"never"!==h,requireDecimal:"always"===h,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:di(this.numberFormat)}),pipe:ti("always"===h?m:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,I,u,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return this.isIOS&&this.isNegativeAllowed?"text":"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(t){const i=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;i.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(t.preventDefault(),r.selectionStart++)}onValueChange(t){if(function pi(n){switch(n){case"":case j.fv:case",":case`${j.fv},`:return!0;default:return!1}}(t))return void this.updateValue(null);if(this.isNativeValueNotFinished)return void(this.unfinishedValue=t);this.unfinishedValue=null;const i=this.absoluteCapInputValue(t);null===i||Number.isNaN(i)||(this.updateValue(i),i!==Qe(t,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(t){if(W.YZ.includes(t.key)){if("never"===this.decimal)return void t.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(t.preventDefault(),this.setCaretAfterComma())}}onFocused(t){if(this.updateFocused(t),t)return;const i=this.unfinishedValue?Qe(this.unfinishedValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator):this.nativeNumberValue;if(this.unfinishedValue=null,Number.isNaN(i))return void this.clear();const r=Math.min(this.max,Math.max(this.min,i));this.updateValue(r),this.nativeValue=this.formattedValue}getFormattedValue(t){const r=Math.abs(t)%1>0;let s="always"===this.decimal||r&&"never"!==this.decimal?this.precision:0;const u=r?zt(t,this.precision):"";return this.focused&&"always"!==this.decimal&&(s=u.length),Rt(t,Object.assign(Object.assign({},this.numberFormat),{decimalLimit:s}))}get isNativeValueNotFinished(){const t=this.nativeNumberValue;return t<0?t>this.max:t<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=t,this.nativeFocusableElement.value=t)}get nativeNumberValue(){return Qe(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(t){const i=Qe(t,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=i<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),i):Math.min(i,Math.min(this.max,Number.MAX_SAFE_INTEGER));return Number.isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const t=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(t,t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.a5,10),e.Y36(e.sBO),e.Y36(ue.HO),e.Y36(G.FA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tui-input-number"]],contentQueries:function(t,i,r){if(1&t&&e.Suo(r,ye.Li,5),2&t){let s;e.iGM(s=e.CRH())&&(i.polymorpheusValueContent=s)}},viewQuery:function(t,i){if(1&t&&e.Gf(Q.yc,5),2&t){let r;e.iGM(r=e.CRH())&&(i.primitiveTextfield=r.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown.0",function(s){return i.onZero(s)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[e._Bn([(0,G.FT)(n),(0,J.wB)(n)]),e.qOj],ngContentSelectors:mo,decls:9,vars:27,consts:[["tuiValueAccessor","",1,"t-textfield",3,"pseudoHover","pseudoFocus","pseudoActive","invalid","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","focusedChange","keydown"],["ngProjectAs","tuiContent","class","t-value-content",5,["tuiContent"],4,"ngIf"],[4,"ngIf"],["valueContent",""],["ngProjectAs","tuiContent",5,["tuiContent"],1,"t-value-content"],[4,"polymorpheusOutlet"]],template:function(t,i){1&t&&(e.F$t(po),e.TgZ(0,"tui-primitive-textfield",0),e.NdJ("valueChange",function(s){return i.onValueChange(s)})("focusedChange",function(s){return i.onFocused(s)})("keydown",function(s){return i.onKeyDown(s)}),e.ALo(1,"tuiMapper"),e.Hsn(2),e.Hsn(3,1,["ngProjectAs","input",5,["input"]]),e.YNc(4,uo,2,1,"div",1),e.qZA(),e.YNc(5,co,1,0,"ng-container",2),e.ALo(6,"async"),e.YNc(7,lo,1,0,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("pseudoHover",i.pseudoHover)("pseudoFocus",i.computedFocused)("pseudoActive",i.pseudoActive)("invalid",i.computedInvalid)("readOnly",i.readOnly)("disabled",i.computedDisabled)("textMask",e.G7q(1,13,e.qbA(21,ho,i.isNegativeAllowed,i.mask,i.decimal,i.precision,i.nativeFocusableElement)))("value",i.computedValue)("prefix",i.prefix)("postfix",i.postfix)("focusable",i.focusable),e.xp6(4),e.Q6J("ngIf",i.polymorpheusValueContent.length),e.xp6(1),e.Q6J("ngIf",e.lcZ(6,19,i.polymorpheusValueContent.changes)))},dependencies:[Q.yc,Q.B1,Yt,Gt,d.O5,ye.Li,an.c,d.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),(0,c.gn)([(0,l.TH)()],n.prototype,"min",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"max",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"decimal",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"precision",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"prefix",void 0),(0,c.gn)([(0,l.TH)()],n.prototype,"postfix",void 0),n})(),_o=(()=>{class n extends ut.D1{get value(){return this.host.computedValue}onValueChange(t){this.host.onValueChange(t)}ngDoCheck(){this.host.nativeFocusableElement&&(this.host.nativeFocusableElement.maxLength=this.host.calculatedMaxLength,this.host.nativeFocusableElement.inputMode="decimal")}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["tui-input-number"]],features:[e._Bn([(0,ue.cp)(n)]),e.qOj]}),n})(),vo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Wt,an.I,Q.KW,Pe.cn,Qt,ye.wq]]}),n})();function bo(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"You can use mathematical expressions for the above fields. Substitution list:"),e.qZA(),e.TgZ(2,"ul")(3,"li"),e._uU(4,"L \u2014 scenario level"),e.qZA(),e.TgZ(5,"li"),e._uU(6,"C \u2014 characters count"),e.qZA(),e.TgZ(7,"li"),e._uU(8,"x - multiply symbol ('*' works as well)"),e.qZA()(),e.TgZ(9,"p"),e._uU(10," You may also use functions such as "),e.TgZ(11,"i"),e._uU(12,"math.floor"),e.qZA(),e._uU(13," and "),e.TgZ(14,"i"),e._uU(15,"math.ceil"),e.qZA(),e._uU(16," using following format as an example: [(2+L)xC/2{%math.floor}] "),e.qZA())}const Co=function(){return[]};function Mo(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",7)(1,"div",8)(2,"tui-input",9),e._uU(3,"Marker "),e._UZ(4,"input",10),e.qZA(),e.TgZ(5,"div",11)(6,"tui-input",12),e._uU(7,"Name"),e.qZA(),e._UZ(8,"tui-error",13),e.ALo(9,"async"),e.ALo(10,"tuiFieldError"),e.qZA(),e.TgZ(11,"tui-svg",14),e.NdJ("click",function(){const s=e.CHM(t).index,u=e.oxw();return e.KtG(u.remove(s))}),e.qZA()(),e.TgZ(12,"div",15)(13,"tui-radio-block",16)(14,"div",17),e._UZ(15,"tui-svg",18),e._uU(16," Objective "),e.qZA()(),e.TgZ(17,"tui-radio-block",16)(18,"div",17),e._UZ(19,"tui-svg",19),e._uU(20," Escort"),e.qZA()()(),e.TgZ(21,"div",20)(22,"div",21)(23,"tui-input",22),e._uU(24,"Health"),e.qZA(),e.TgZ(25,"tui-input",23),e._uU(26,"Count"),e.qZA(),e.TgZ(27,"tui-input-number",24),e._uU(28," Initiative "),e.qZA(),e._UZ(29,"tui-tooltip",25),e.qZA(),e.YNc(30,bo,17,0,"ng-template",null,26,e.W1O),e.qZA()()}if(2&n){const t=o.$implicit,i=e.MAs(31);e.Q6J("formGroup",t),e.xp6(2),e.Q6J("formControl",t.controls.marker),e.xp6(4),e.Q6J("formControl",t.controls.name),e.xp6(2),e.Q6J("formControl",t.controls.name)("error",e.lcZ(9,15,e.lcZ(10,17,e.DdM(19,Co)))),e.xp6(5),e.Q6J("formControl",t.controls.escort)("item",!1),e.xp6(4),e.Q6J("formControl",t.controls.escort)("item",!0),e.xp6(6),e.Q6J("formControl",t.controls.health),e.xp6(2),e.Q6J("formControl",t.controls.count),e.xp6(2),e.Q6J("formControl",t.controls.initiative)("min",1)("max",99),e.xp6(2),e.Q6J("content",i)}}class Ue extends Ct{constructor(o,t){super(o,t,i=>i.objectives$,(i,r)=>i.updateObjectives(r),()=>et({name:["",p.kI.required],health:[""],escort:[!1],initiative:[null,[p.kI.min(1),p.kI.max(99)]],count:[""],marker:["",p.kI.maxLength(1)]})),this.reset()}}Ue.\u0275fac=function(o){return new(o||Ue)(e.Y36(_.gz),e.Y36(g.a3))},Ue.\u0275cmp=e.Xpm({type:Ue,selectors:[["ghse-scenario-objectives"]],features:[e._Bn([g.a3]),e.qOj],decls:12,vars:2,consts:[[1,"new-buttons"],["tuiButton","","type","button","icon","tuiIconPlusLarge",3,"click"],[1,"objectives"],["class","objective-form",3,"formGroup",4,"ngFor","ngForOf"],[1,"form-row","buttons"],["tuiButton","","type","button",3,"disabled","click"],["tuiButton","","type","button","appearance","outline","data-automation","reset-button",3,"click"],[1,"objective-form",3,"formGroup"],[1,"form-row","multi-field"],["maxlength","1",1,"marker",3,"formControl"],["tuiTextfield","","maxlength","1"],[1,"row-errors","name"],["tuiAutoFocus","","required","",3,"formControl"],[3,"formControl","error"],["src","tuiIconTrashLarge",1,"delete",3,"click"],["tuiGroup","",1,"form-row"],[3,"formControl","item"],[1,"objective-type"],["src","assets/images/ghs/objective/objective.svg","width","32"],["src","assets/images/ghs/objective/escort.svg"],[1,"form-row"],[1,"multi-field","expression-fields"],[1,"health",3,"formControl"],[1,"count",3,"formControl"],[1,"initiative",3,"formControl","min","max"],[3,"content"],["expressionsDescription",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return t.addNew()}),e._uU(2,"Add objective"),e.qZA()(),e.TgZ(3,"div",2),e.YNc(4,Mo,32,20,"form",3),e.qZA(),e.TgZ(5,"form")(6,"div",4)(7,"div")(8,"button",5),e.NdJ("click",function(){return t.save()}),e._uU(9,"Save"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return t.reset()}),e._uU(11," Reset "),e.qZA()()()()),2&o&&(e.xp6(4),e.Q6J("ngForOf",t.form.controls),e.xp6(4),e.Q6J("disabled",!t.form.valid||t.form.pristine))},dependencies:[d.sg,p._Y,p.JJ,p.JL,p.Q7,p.nD,p.oH,p.sg,O.v0,C.P,nt.v,Je.K3,Je.wU,Q.MB,Bt.w,Et,ro,fo,_o,Wi,p.F,d.Ov,rt.Ag],styles:[".ghse-item-box[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}.ghse-item-box[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}.ghse-item-box[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{width:40rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .multi-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1.5rem}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]{width:42rem;display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-items:center;justify-content:space-between}[_nghost-%COMP%]   .new-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:2rem}[_nghost-%COMP%]   .objectives[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(30rem,1fr));gap:1.5rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]{width:auto;border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m);padding:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;color:var(--tui-base-05);margin-left:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{color:var(--tui-base-06)}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{margin-right:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-right:1rem}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .health[_ngcontent-%COMP%]{flex-grow:2}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   .initiative[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expression-fields[_ngcontent-%COMP%]   tui-tooltip[_ngcontent-%COMP%]{flex:none}[_nghost-%COMP%]   .objective-form[_ngcontent-%COMP%]   .expressions-description[_ngcontent-%COMP%]{margin-top:.5rem;color:var(--tui-text-02)}[_nghost-%COMP%]   .objective-type[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .objective-type[_ngcontent-%COMP%]   tui-svg[_ngcontent-%COMP%]{width:2rem;height:2rem;margin-right:1rem}"],changeDetection:0});const To=[{path:"",pathMatch:"full",component:X},{path:":id",component:Ne,canActivateChild:[Fe],children:[{path:"",pathMatch:"full",component:Ve,resolve:{detailsService:ce}},{path:"properties",component:Ze,resolve:{detailsService:ce}},{path:"objectives",component:Ue,resolve:{detailsService:ce}},{path:"monsters",component:Le,resolve:{detailsService:ce}},{path:"rooms",component:He,resolve:{detailsService:ce}},{path:"rules",component:ze,resolve:{detailsService:ce}},{path:"sections",component:Re,resolve:{detailsService:ce}}]}];class De{}De.\u0275fac=function(o){return new(o||De)},De.\u0275mod=e.oAB({type:De}),De.\u0275inj=e.cJS({imports:[_.Bz.forChild(To),_.Bz]});var xo=a(4466);let Oo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,C.E]]}),n})();class Ae{}Ae.\u0275fac=function(o){return new(o||Ae)},Ae.\u0275mod=e.oAB({type:Ae}),Ae.\u0275inj=e.cJS({imports:[d.ez,De,Me,xo.m,An,_e,kt.cB,zn,so,vo,qi,qn,Si,Di,p.u5,Mi,Pi,In,Oo]})},2243:function(ct){ct.exports=function(oe){function a(_){if(d[_])return d[_].exports;var e=d[_]={exports:{},id:_,loaded:!1};return oe[_].call(e.exports,e,e.exports,a),e.loaded=!0,e.exports}var d={};return a.m=oe,a.c=d,a.p="",a(0)}([function(oe,a,d){"use strict";function _(N){return N&&N.__esModule?N:{default:N}}Object.defineProperty(a,"__esModule",{value:!0});var e=d(3);Object.defineProperty(a,"conformToMask",{enumerable:!0,get:function(){return _(e).default}});var w=d(2);Object.defineProperty(a,"adjustCaretPosition",{enumerable:!0,get:function(){return _(w).default}});var b=d(5);Object.defineProperty(a,"createTextMaskInputElement",{enumerable:!0,get:function(){return _(b).default}})},function(oe,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.placeholderChar="_",a.strFunction="function"},function(oe,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function d(w){var b=w.previousConformedValue,N=void 0===b?e:b,V=w.previousPlaceholder,T=void 0===V?e:V,x=w.currentCaretPosition,O=void 0===x?0:x,v=w.conformedValue,C=w.rawValue,c=w.placeholderChar,k=w.placeholder,K=w.indexesOfPipedChars,D=void 0===K?_:K,be=w.caretTrapIndexes,ee=void 0===be?_:be;if(0===O||!C.length)return 0;var S=N.length,g=k.length,l=v.length,F=C.length-S,M=F>0;if(F>1&&!M&&0!==S)return O;var A=0,le=void 0,Z=void 0;if(!M||N!==v&&v!==k){var te=v.toLowerCase(),y=C.toLowerCase().substr(0,O).split(e).filter(function(P){return-1!==te.indexOf(P)});Z=y[y.length-1];var de=T.substr(0,y.length).split(e).filter(function(P){return P!==c}).length,H=k.substr(0,y.length).split(e).filter(function(P){return P!==c}).length;!M&&(H!==de||void 0!==T[y.length-1]&&void 0!==k[y.length-2]&&T[y.length-1]!==c&&T[y.length-1]!==k[y.length-1]&&T[y.length-1]===k[y.length-2])&&de>0&&k.indexOf(Z)>-1&&void 0!==C[O]&&(le=!0,Z=C[O]);for(var ve=D.map(function(P){return te[P]}).filter(function(P){return P===Z}).length,me=y.filter(function(P){return P===Z}).length,Ce=k.substr(0,k.indexOf(c)).split(e).filter(function(P,Oe){return P===Z&&C[Oe]!==P}).length+me+ve+(le?1:0),X=0,z=0;z<l&&(A=z+1,te[z]===Z&&X++,!(X>=Ce));z++);}else A=O-F;if(M){for(var R=A,E=A;E<=g;E++)if(k[E]===c&&(R=E),k[E]===c||-1!==ee.indexOf(E)||E===g)return R}else if(le){for(var ne=A-1;ne>=0;ne--)if(v[ne]===Z||-1!==ee.indexOf(ne)||0===ne)return ne}else for(var ie=A;ie>=0;ie--)if(k[ie-1]===c||-1!==ee.indexOf(ie)||0===ie)return ie};var _=[],e=""},function(oe,a,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(T){return typeof T}:function(T){return T&&"function"==typeof Symbol&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};a.default=function _(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(0,w.isArray)(x)){if((typeof x>"u"?"undefined":e(x))!==b.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");x=x(T,O),x=(0,w.processCaretTraps)(x).maskWithoutCaretTraps}var v=O.guide,C=void 0===v||v,c=O.previousConformedValue,k=void 0===c?V:c,K=O.placeholderChar,D=void 0===K?b.placeholderChar:K,be=O.placeholder,ee=void 0===be?(0,w.convertMaskToPlaceholder)(x,D):be,S=O.keepCharPositions,g=!1===C&&void 0!==k,l=T.length,F=k.length,M=ee.length,fe=x.length,Y=l-F,re=Y>0,A=O.currentCaretPosition+(re?-Y:0),le=A+Math.abs(Y);if(!0===S&&!re){for(var Z=V,te=A;te<le;te++)ee[te]===D&&(Z+=D);T=T.slice(0,A)+Z+T.slice(A,l)}for(var L=T.split(V).map(function(ne,ie){return{char:ne,isNew:ie>=A&&ie<le}}),B=l-1;B>=0;B--){var y=L[B].char;y!==D&&y===ee[B>=A&&F===fe?B-Y:B]&&L.splice(B,1)}var H=V,se=!1;e:for(var ae=0;ae<M;ae++){var _e=ee[ae];if(_e===D){if(L.length>0)for(;L.length>0;){var ve=L.shift(),me=ve.char,xe=ve.isNew;if(me===D&&!0!==g){H+=D;continue e}if(x[ae].test(me)){if(!0===S&&!1!==xe&&k!==V&&!1!==C&&re){for(var Ce=L.length,X=null,z=0;z<Ce;z++){var $=L[z];if($.char!==D&&!1===$.isNew)break;if($.char===D){X=z;break}}null!==X?(H+=me,L.splice(X,1)):ae--}else H+=me;continue e}se=!0}!1===g&&(H+=ee.substr(ae,M));break}H+=_e}if(g&&!1===re){for(var R=null,E=0;E<H.length;E++)ee[E]===D&&(R=E);H=null!==R?H.substr(0,R+1):V}return{conformedValue:H,meta:{someCharsRejected:se}}};var w=d(4),b=d(1),N=[],V=""},function(oe,a,d){"use strict";function e(v){return Array.isArray&&Array.isArray(v)||v instanceof Array}Object.defineProperty(a,"__esModule",{value:!0}),a.convertMaskToPlaceholder=function _(){var v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.placeholderChar;if(!e(v))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==v.indexOf(C))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(C)+"\n\nThe mask that was received is: "+JSON.stringify(v));return v.map(function(c){return c instanceof RegExp?C:c}).join("")},a.isArray=e,a.isString=function w(v){return"string"==typeof v||v instanceof String},a.isNumber=function b(v){return"number"==typeof v&&void 0===v.length&&!isNaN(v)},a.isNil=function N(v){return typeof v>"u"||null===v},a.processCaretTraps=function V(v){for(var C=[],c=void 0;-1!==(c=v.indexOf(O));)C.push(c),v.splice(c,1);return{maskWithoutCaretTraps:v,indexes:C}};var T=d(1),x=[],O="[]"},function(oe,a,d){"use strict";function _(f){return f&&f.__esModule?f:{default:f}}function w(f,S){document.activeElement===f&&(be?ee(function(){return f.setSelectionRange(S,S,K)},0):f.setSelectionRange(S,S,K))}function b(f){if((0,C.isString)(f))return f;if((0,C.isNumber)(f))return String(f);if(null==f)return k;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(f))}Object.defineProperty(a,"__esModule",{value:!0});var N=Object.assign||function(f){for(var S=1;S<arguments.length;S++){var g=arguments[S];for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&(f[l]=g[l])}return f},V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};a.default=function e(f){var S={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:S,update:function(g){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,F=l.inputElement,M=l.mask,fe=l.guide,Y=l.pipe,re=l.placeholderChar,A=void 0===re?c.placeholderChar:re,le=l.keepCharPositions,Z=void 0!==le&&le,te=l.showMask,L=void 0!==te&&te;if(typeof g>"u"&&(g=F.value),g!==S.previousConformedValue){(typeof M>"u"?"undefined":V(M))===D&&void 0!==M.pipe&&void 0!==M.mask&&(Y=M.pipe,M=M.mask);var B=void 0,y=void 0;if(M instanceof Array&&(B=(0,C.convertMaskToPlaceholder)(M,A)),!1!==M){var de=b(g),H=F.selectionEnd,se=S.previousConformedValue,ae=S.previousPlaceholder,_e=void 0;if((typeof M>"u"?"undefined":V(M))===c.strFunction){if(!1===(y=M(de,{currentCaretPosition:H,previousConformedValue:se,placeholderChar:A})))return;var ve=(0,C.processCaretTraps)(y);_e=ve.indexes,B=(0,C.convertMaskToPlaceholder)(y=ve.maskWithoutCaretTraps,A)}else y=M;var Ce={previousConformedValue:se,guide:fe,placeholderChar:A,pipe:Y,placeholder:B,currentCaretPosition:H,keepCharPositions:Z},z=(0,v.default)(de,y,Ce).conformedValue,$=(typeof Y>"u"?"undefined":V(Y))===c.strFunction,R={};$&&(!1===(R=Y(z,N({rawValue:de},Ce)))?R={value:se,rejected:!0}:(0,C.isString)(R)&&(R={value:R}));var E=$?R.value:z,ne=(0,x.default)({previousConformedValue:se,previousPlaceholder:ae,conformedValue:E,placeholder:B,rawValue:de,currentCaretPosition:H,placeholderChar:A,indexesOfPipedChars:R.indexesOfPipedChars,caretTrapIndexes:_e}),Oe=E===B&&0===ne?L?B:k:E;S.previousConformedValue=Oe,S.previousPlaceholder=B,F.value!==Oe&&(F.value=Oe,w(F,ne))}}}}};var x=_(d(2)),v=_(d(3)),C=d(4),c=d(1),k="",K="none",D="object",be=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),ee=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout}])}}]);